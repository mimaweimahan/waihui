(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-tabbarPages-transaction-index"],{"155f":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var n={uIcon:i("9ca4").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"u-input",class:{"u-input--border":t.border,"u-input--error":t.validateState},style:{padding:"0 "+(t.border?20:0)+"rpx",borderColor:t.borderColor,textAlign:t.inputAlign},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.inputClick.apply(void 0,arguments)}}},["textarea"==t.type?i("v-uni-textarea",{staticClass:"u-input__input u-input__textarea",style:[t.getStyle],attrs:{value:t.defaultValue,placeholder:t.placeholder,placeholderStyle:t.placeholderStyle,disabled:t.disabled,maxlength:t.inputMaxlength,fixed:t.fixed,focus:t.focus,autoHeight:t.autoHeight,"selection-end":t.uSelectionEnd,"selection-start":t.uSelectionStart,"cursor-spacing":t.getCursorSpacing,"show-confirm-bar":t.showConfirmbar,"adjust-position":t.adjustPosition},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.handleInput.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),t.handleBlur.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.onFocus.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirm.apply(void 0,arguments)}}}):i("v-uni-input",{staticClass:"u-input__input",style:[t.getStyle],attrs:{type:"password"==t.type?"text":t.type,value:t.defaultValue,password:"password"==t.type&&!t.showPassword,placeholder:t.placeholder,placeholderStyle:t.placeholderStyle,disabled:t.disabled||"select"===t.type,maxlength:t.inputMaxlength,focus:t.focus,confirmType:t.confirmType,"cursor-spacing":t.getCursorSpacing,"selection-end":t.uSelectionEnd,"selection-start":t.uSelectionStart,"show-confirm-bar":t.showConfirmbar,"adjust-position":t.adjustPosition},on:{focus:function(e){arguments[0]=e=t.$handleEvent(e),t.onFocus.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),t.handleBlur.apply(void 0,arguments)},input:function(e){arguments[0]=e=t.$handleEvent(e),t.handleInput.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirm.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"u-input__right-icon u-flex"},[t.clearable&&""!=t.value&&t.focused?i("v-uni-view",{staticClass:"u-input__right-icon__clear u-input__right-icon__item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClear.apply(void 0,arguments)}}},[i("u-icon",{attrs:{size:"32",name:"close-circle-fill",color:"#c0c4cc"}})],1):t._e(),t.passwordIcon&&"password"==t.type?i("v-uni-view",{staticClass:"u-input__right-icon__clear u-input__right-icon__item"},[i("u-icon",{attrs:{size:"32",name:t.showPassword?"eye-fill":"eye",color:"#c0c4cc"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showPassword=!t.showPassword}}})],1):t._e(),"select"==t.type?i("v-uni-view",{staticClass:"u-input__right-icon--select u-input__right-icon__item",class:{"u-input__right-icon--select--reverse":t.selectOpen}},[i("u-icon",{attrs:{name:"arrow-down-fill",size:"26",color:"#c0c4cc"}})],1):t._e()],1)],1)},r=[]},1851:function(t,e,i){"use strict";var n=i("8bdb"),a=i("84d6"),r=i("1cb5");n({target:"Array",proto:!0},{fill:a}),r("fill")},"2c98":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.index[data-v-5122a2e8]{padding:0 5px}.content[data-v-5122a2e8]{height:448px}',""]),t.exports=e},"2dd9":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("3c95"),r=n(i("c0de")),o=(i("9e1d"),{data:function(){return{chart:null,macd:null}},mounted:function(){this.initChart()},methods:{initChart:function(){(0,a.dispose)("renderKlinechart"),this.chart=(0,a.init)("renderKlinechart"),this.chart.setStyleOptions((0,r.default)("dark")),this.chart.createTechnicalIndicator({name:"MA",calcParams:[5,10,30]},!1,{id:"candle_pane"}),this.chart.createTechnicalIndicator({name:"VOL",calcParams:[20,30]},!1,{height:100,dragEnabled:!1})},getData:function(t,e){this.chart&&(t.historyData&&(this.chart.clearData(),this.chart.applyNewData(t.historyData)),t.updateData&&this.chart.updateData(t.updateData),t.chartType&&this.chart.setStyleOptions({candle:{type:t.chartType}}),this.chart.setPriceVolumePrecision(t.precision,t.precision))}},beforeDestroy:function(){}});e.default=o},"3c95":function(t,e,i){var n,a,r,o=i("bdbb").default;i("4085"),i("fd3c"),i("bf0f"),i("2797"),i("aa9c"),i("f7a5"),i("4259"),i("64aa"),i("e062"),i("c223"),i("7a76"),i("c9b5"),i("6a54"),i("01a2"),i("e39c"),i("844d"),i("18f7"),i("de6c"),i("5c47"),i("2c10"),i("a1c1"),i("5ef2"),i("22b6"),i("8a8d"),i("926e"),i("3872e"),i("4e9b"),i("114e"),i("c240"),i("dc69"),i("e966"),i("08eb"),i("0506"),i("7996"),i("6a88"),i("c1a3"),i("1851"),i("dc8a"),i("8f71"),i("9a2c"),i("a644"),i("a03a"),i("aa77"),i("bd06"),i("dd2b"),i("6be7"),i("9db6"),i("f042"),function(i,s){"object"==o(e)&&"undefined"!=typeof t?s(e):(a=[e],n=s,r="function"===typeof n?n.apply(e,a):n,void 0===r||(t.exports=r))}(0,(function(t){"use strict";var e={name:"BBI",shortName:"BBI",series:"price",precision:2,calcParams:[3,6,12,24],shouldCheckParamCount:!0,shouldOhlc:!0,plots:[{key:"bbi",title:"BBI: ",type:"line"}],calcTechnicalIndicator:function(t,e){var i=e.params,n=Math.max.apply(null,i),a=[],r=[];return t.map((function(e,o){var s={},c=e.close;if(i.forEach((function(e,i){a[i]=(a[i]||0)+c,e-1>o||(r[i]=a[i]/e,a[i]-=t[o-(e-1)].close)})),o>=n-1){var l=0;r.forEach((function(t){l+=t})),s.bbi=l/4}return s}))}},i={name:"DMA",shortName:"DMA",calcParams:[10,50,10],plots:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calcTechnicalIndicator:function(t,e){var i=e.params,n=Math.max(i[0],i[1]),a=0,r=0,o=0,s=[];return t.forEach((function(e,c){var l,h,u={},d=e.close;if(a+=d,r+=d,i[0]-1>c||(l=a/i[0],a-=t[c-(i[0]-1)].close),i[1]-1>c||(h=r/i[1],r-=t[c-(i[1]-1)].close),c>=n-1){var f=l-h;u.dma=f,o+=f,n+i[2]-2>c||(u.ama=o/i[2],o-=s[c-(i[2]-1)].dma)}s.push(u)})),s}},n={name:"DMI",shortName:"DMI",calcParams:[14,6],plots:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calcTechnicalIndicator:function(t,e){var i=e.params,n=0,a=0,r=0,o=0,s=0,c=0,l=0,h=0,u=[];return t.forEach((function(e,d){var f={},v=t[d-1]||e,p=v.close,_=e.high,m=e.low,y=_-m,g=Math.abs(_-p),x=Math.abs(p-m),S=_-v.high,b=v.low-m,k=Math.max(Math.max(y,g),x),w=S>0&&S>b?S:0,C=b>0&&b>S?b:0;if(n+=k,a+=w,r+=C,d>=i[0]-1){d>i[0]-1?(o=o-o/i[0]+k,s=s-s/i[0]+w,c=c-c/i[0]+C):(o=n,s=a,c=r);var E=0,A=0;0!==o&&(E=100*s/o,A=100*c/o),f.pdi=E,f.mdi=A;var I=0;A+E!==0&&(I=Math.abs(A-E)/(A+E)*100),l+=I,2*i[0]-2>d||(f.adx=h=d>2*i[0]-2?(h*(i[0]-1)+I)/i[0]:l/i[0],2*i[0]+i[1]-3>d||(f.adxr=(u[d-(i[1]-1)].adx+h)/2))}u.push(f)})),u}},a={name:"MACD",shortName:"MACD",calcParams:[12,26,9],plots:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,color:function(t,e){var i=(t.current.technicalIndicatorData||{}).macd;return i>0?e.bar.upColor:0>i?e.bar.downColor:e.bar.noChangeColor},isStroke:function(t){return(t.current.technicalIndicatorData||{}).macd>(t.prev.technicalIndicatorData||{}).macd}}],calcTechnicalIndicator:function(t,e){var i,n,a=e.params,r=0,o=0,s=0,c=0,l=Math.max(a[0],a[1]);return t.map((function(t,e){var h={},u=t.close;return r+=u,a[0]-1>e||(i=e>a[0]-1?(2*u+(a[0]-1)*i)/(a[0]+1):r/a[0]),a[1]-1>e||(n=e>a[1]-1?(2*u+(a[1]-1)*n)/(a[1]+1):r/a[1]),l-1>e||(h.dif=o=i-n,s+=o,l+a[2]-2>e||(h.macd=2*(o-(c=e>l+a[2]-2?(2*o+c*(a[2]-1))/(a[2]+1):s/a[2])),h.dea=c)),h}))}},r={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],plots:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calcTechnicalIndicator:function(t,e){var i=e.params,n=Math.ceil(i[1]/2.5+1),a=Math.ceil(i[2]/2.5+1),r=Math.ceil(i[3]/2.5+1),o=Math.ceil(i[4]/2.5+1),s=0,c=[],l=0,h=[],u=0,d=[],f=0,v=[],p=[];return t.forEach((function(e,_){var m={},y=t[_-1]||e,g=(y.high+y.close+y.low+y.open)/4,x=Math.max(0,e.high-g),S=Math.max(0,g-e.low);i[0]-1>_||(m.cr=0!==S?x/S*100:0,s+=m.cr,l+=m.cr,u+=m.cr,f+=m.cr,i[0]+i[1]-2>_||(c.push(s/i[1]),i[0]+i[1]+n-3>_||(m.ma1=c[c.length-1-n]),s-=p[_-(i[1]-1)].cr),i[0]+i[2]-2>_||(h.push(l/i[2]),i[0]+i[2]+a-3>_||(m.ma2=h[h.length-1-a]),l-=p[_-(i[2]-1)].cr),i[0]+i[3]-2>_||(d.push(u/i[3]),i[0]+i[3]+r-3>_||(m.ma3=d[d.length-1-r]),u-=p[_-(i[3]-1)].cr),i[0]+i[4]-2>_||(v.push(f/i[4]),i[0]+i[4]+o-3>_||(m.ma4=v[v.length-1-o]),f-=p[_-(i[4]-1)].cr)),p.push(m)})),p}},s={name:"AO",shortName:"AO",calcParams:[5,34],shouldCheckParamCount:!0,plots:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,color:function(t,e){return(t.current.technicalIndicatorData||{}).ao>(t.prev.technicalIndicatorData||{}).ao?e.bar.upColor:e.bar.downColor},isStroke:function(t){return(t.current.technicalIndicatorData||{}).ao>(t.prev.technicalIndicatorData||{}).ao}}],calcTechnicalIndicator:function(t,e){var i=e.params,n=Math.max(i[0],i[1]),a=0,r=0,o=0,s=0;return t.map((function(e,c){var l={},h=(e.low+e.high)/2;if(a+=h,r+=h,c>=i[0]-1){o=a/i[0];var u=t[c-(i[0]-1)];a-=(u.low+u.high)/2}if(c>=i[1]-1){s=r/i[1];var d=t[c-(i[1]-1)];r-=(d.low+d.high)/2}return n-1>c||(l.ao=o-s),l}))}},c={name:"CCI",shortName:"CCI",calcParams:[20],plots:[{key:"cci",title:"CCI: ",type:"line"}],calcTechnicalIndicator:function(t,e){var i=e.params,n=i[0]-1,a=0,r=[];return t.map((function(e,o){var s={},c=(e.high+e.low+e.close)/3;if(a+=c,r.push(c),o>=n){var l=a/i[0],h=r.slice(o-n,o+1),u=0;h.forEach((function(t){u+=Math.abs(t-l)}));var d=u/i[0];s.cci=0!==d?(c-l)/d/.015:0,a-=(t[o-n].high+t[o-n].low+t[o-n].close)/3}return s}))}},l={name:"RSI",shortName:"RSI",calcParams:[6,12,24],shouldCheckParamCount:!1,plots:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regeneratePlots:function(t){return t.map((function(t,e){var i=e+1;return{key:"rsi".concat(i),title:"RSI".concat(i,": "),type:"line"}}))},calcTechnicalIndicator:function(t,e){var i=e.params,n=e.plots,a=[],r=[];return t.map((function(e,o){var s={},c=e.close-(t[o-1]||e).close;return i.forEach((function(e,i){if(c>0?a[i]=(a[i]||0)+c:r[i]=(r[i]||0)+Math.abs(c),o>=e-1){s[n[i].key]=0!==r[i]?100-100/(1+a[i]/r[i]):0;var l=t[o-(e-1)],h=l.close-(t[o-e]||l).close;h>0?a[i]-=h:r[i]-=Math.abs(h)}})),s}))}};function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER;return t.forEach((function(t){e=Math.max(t.high,e),i=Math.min(t.low,i)})),{hn:e,ln:i}}var u={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],plots:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calcTechnicalIndicator:function(t,e){var i=e.params,n=[];return t.forEach((function(e,a){var r={},o=e.close;if(a>=i[0]-1){var s=h(t.slice(a-(i[0]-1),a+1)),c=s.ln,l=s.hn-c;r.k=((i[1]-1)*(n[a-1].k||50)+(o-c)/(0===l?1:l)*100)/i[1],r.d=((i[2]-1)*(n[a-1].d||50)+r.k)/i[2],r.j=3*r.k-2*r.d}n.push(r)})),n}},d={name:"WR",shortName:"WR",calcParams:[6,10,14],shouldCheckParamCount:!1,plots:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regeneratePlots:function(t){return t.map((function(t,e){return{key:"wr".concat(e+1),title:"WR".concat(e+1,": "),type:"line"}}))},calcTechnicalIndicator:function(t,e){var i=e.params,n=e.plots;return t.map((function(e,a){var r={},o=e.close;return i.forEach((function(e,i){var s=e-1;if(a>=s){var c=h(t.slice(a-s,a+1)),l=c.hn,u=l-c.ln;r[n[i].key]=0===u?0:(o-l)/u*100}})),r}))}},f={name:"BOLL",shortName:"BOLL",calcParams:[20,{value:2,allowDecimal:!0}],precision:2,shouldOhlc:!0,plots:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calcTechnicalIndicator:function(t,e){var i=e.params,n=i[0]-1,a=0;return t.map((function(e,r){var o={};if(a+=e.close,r>=n){o.mid=a/i[0];var s=function(t,e){var i=t.length,n=0;t.forEach((function(t){var i=t.close-e;n+=i*i}));var a=n>0,r=Math.sqrt((n=Math.abs(n))/i);return a?r:-1*r}(t.slice(r-n,r+1),o.mid);o.up=o.mid+i[1]*s,o.dn=o.mid-i[1]*s,a-=t[r-n].close}return o}))}},v={name:"SAR",shortName:"SAR",series:"price",calcParams:[2,2,20],precision:2,shouldOhlc:!0,plots:[{key:"sar",title:"SAR: ",type:"circle",color:function(t,e){var i=t.current,n=i.kLineData||{};return(n.high+n.low)/2>(i.technicalIndicatorData||{}).sar?e.circle.upColor:e.circle.downColor}}],calcTechnicalIndicator:function(t,e){var i=e.params,n=i[0]/100,a=i[1]/100,r=i[2]/100,o=n,s=-100,c=!1,l=0;return t.map((function(e,i){var h=l,u=e.high,d=e.low;if(c){(-100===s||u>s)&&(s=u,o=Math.min(o+a,r)),l=h+o*(s-h);var f=Math.min(t[Math.max(1,i)-1].low,d);l>e.low?(l=s,o=n,s=-100,c=!c):l>f&&(l=f)}else{(-100===s||s>d)&&(s=d,o=Math.min(o+a,r)),l=h+o*(s-h);var v=Math.max(t[Math.max(1,i)-1].high,u);e.high>l?(l=s,o=0,s=-100,c=!c):v>l&&(l=v)}return{sar:l}}))}},p={technicalIndicatorExtensions:{},shapeExtensions:{},addTechnicalIndicatorTemplate:function(t){var e=this;t&&[].concat(t).forEach((function(t){t.name&&(e.technicalIndicatorExtensions[t.name]=t)}))},addShapeTemplate:function(t){var e=this;t&&[].concat(t).forEach((function(t){t.name&&(e.shapeExtensions[t.name]=t)}))}};function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e,i){return e&&m(t.prototype,e),i&&m(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t){return g="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(t){return o(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":o(t)},g(t)}function x(t,e){if(w(t)&&w(e))for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&i in t){var n=t[i],a=e[i];w(a)&&w(n)&&!b(a)&&!b(n)?x(n,a):E(e[i])&&(t[i]=e[i])}}function S(t){if(!w(t))return t;var e;for(var i in e=b(t)?[]:{},t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];e[i]=w(n)?S(n):n}return e}function b(t){return"[object Array]"===Object.prototype.toString.call(t)}function k(t){return t&&"function"==typeof t}function w(t){return!!t&&"object"===g(t)}function C(t){return"number"==typeof t&&!isNaN(t)}function E(t){return null!=t}function A(t){return"boolean"==typeof t}function I(t){return"string"==typeof t}var P="stroke",T="fill",M="dash",D="solid",O="left",L="right",R="normal",B="percentage",F="log",z="candle_solid",j="area",V="always",N="rect",H="standard",Y="circle",W="rect",U="triangle",G="diamond",J="custom",Q="point",X="top",$={grid:{show:!0,horizontal:{show:!0,size:1,color:"#EDEDED",style:M,dashValue:[2,2]},vertical:{show:!0,size:1,color:"#EDEDED",style:M,dashValue:[2,2]}},candle:{margin:{top:.2,bottom:.1},type:z,bar:{upColor:"#26A69A",downColor:"#EF5350",noChangeColor:"#999999"},area:{lineSize:2,lineColor:"#2196F3",value:"close",backgroundColor:[{offset:0,color:"rgba(33, 150, 243, 0.01)"},{offset:1,color:"rgba(33, 150, 243, 0.2)"}]},priceMark:{show:!0,high:{show:!0,color:"#76808F",textMargin:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"},low:{show:!0,color:"#76808F",textMargin:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"},last:{show:!0,upColor:"#26A69A",downColor:"#EF5350",noChangeColor:"#888888",line:{show:!0,style:M,dashValue:[4,4],size:1},text:{show:!0,size:12,paddingLeft:2,paddingTop:2,paddingRight:2,paddingBottom:2,color:"#FFFFFF",family:"Helvetica Neue",weight:"normal",borderRadius:2}}},tooltip:{showRule:V,showType:H,labels:["时间: ","开: ","收: ","高: ","低: ","成交量: "],values:null,defaultValue:"n/a",rect:{paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:6,offsetLeft:8,offsetTop:8,offsetRight:8,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",backgroundColor:"#FEFEFE"},text:{size:12,family:"Helvetica Neue",weight:"normal",color:"#76808F",marginLeft:8,marginTop:6,marginRight:8,marginBottom:0}}},technicalIndicator:{margin:{top:.2,bottom:.1},bar:{upColor:"rgba(38, 166, 154, .65)",downColor:"rgba(239, 83, 80, .65)",noChangeColor:"#888888"},line:{size:1,colors:["#FF9600","#9D65C9","#2196F3","#E11D74","#01C5C4"]},circle:{upColor:"rgba(38, 166, 154, .65)",downColor:"rgba(239, 83, 80, .65)",noChangeColor:"#888888"},lastValueMark:{show:!1,text:{show:!1,color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:3,paddingTop:2,paddingRight:3,paddingBottom:2,borderRadius:2}},tooltip:{showRule:V,showType:H,showName:!0,showParams:!0,defaultValue:"n/a",text:{size:12,family:"Helvetica Neue",weight:"normal",color:"#76808F",marginTop:6,marginRight:8,marginBottom:0,marginLeft:8}}},xAxis:{show:!0,height:null,axisLine:{show:!0,color:"#DDDDDD",size:1},tickText:{show:!0,color:"#76808F",size:12,family:"Helvetica Neue",weight:"normal",paddingTop:3,paddingBottom:6},tickLine:{show:!0,size:1,length:3,color:"#DDDDDD"}},yAxis:{show:!0,width:null,type:R,position:L,inside:!1,axisLine:{show:!0,color:"#DDDDDD",size:1},tickText:{show:!0,color:"#76808F",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:3,paddingRight:6},tickLine:{show:!0,size:1,length:3,color:"#DDDDDD"}},separator:{size:1,color:"#DDDDDD",fill:!0,activeBackgroundColor:"rgba(33, 150, 243, 0.08)"},crosshair:{show:!0,horizontal:{show:!0,line:{show:!0,style:M,dashValue:[4,2],size:1,color:"#76808F"},text:{show:!0,color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:2,borderSize:1,borderColor:"#686D76",borderRadius:2,backgroundColor:"#686D76"}},vertical:{show:!0,line:{show:!0,style:M,dashValue:[4,2],size:1,color:"#76808F"},text:{show:!0,color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:2,borderSize:1,borderRadius:2,borderColor:"#686D76",backgroundColor:"#686D76"}}},shape:{point:{backgroundColor:"#2196F3",borderColor:"rgba(33, 150, 243, 0.35)",borderSize:1,radius:5,activeBackgroundColor:"#2196F3",activeBorderColor:"rgba(33, 150, 243, 0.35)",activeBorderSize:3,activeRadius:5},line:{style:D,color:"#2196F3",size:1,dashValue:[2,2]},polygon:{style:P,stroke:{style:D,size:1,color:"#2196F3",dashValue:[2,2]},fill:{color:"#2196F3"}},arc:{style:P,stroke:{style:D,size:1,color:"#2196F3",dashValue:[2,2]},fill:{color:"#2196F3"}},text:{style:T,color:"#2196F3",size:12,family:"Helvetica Neue",weight:"normal",offset:[0,0]}},annotation:{position:X,offset:[20,0],symbol:{type:G,size:8,color:"#2196F3",activeSize:10,activeColor:"#FF9600"}},tag:{position:Q,offset:0,line:{show:!0,style:M,dashValue:[4,2],size:1,color:"#2196F3"},text:{color:"#FFFFFF",backgroundColor:"#2196F3",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:2,borderRadius:2,borderSize:1,borderColor:"#2196F3"},mark:{offset:0,color:"#FFFFFF",backgroundColor:"#2196F3",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:2,borderRadius:2,borderSize:1,borderColor:"#2196F3"}}};function Z(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"--";if(w(t)){var n=t[e];if(E(n))return n}return i}function K(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"MM-DD hh:mm";if(C(e)){var n=t.format(new Date(e)),a=n.split(", "),r=a[0].split("/"),o={YYYY:r[2],MM:r[0],DD:r[1],"hh:mm":"24"===a[1].match(/^[\d]{2}/)[0]?a[1].replace(/^[\d]{2}/,"00"):a[1]};return i.replace(/YYYY|MM|DD|(hh:mm)/g,(function(t){return o[t]}))}return"--"}function q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=+t;return(i||0===i)&&C(i)?i.toFixed(e):"".concat(i)}function tt(t){return C(+t)?t>1e9?"".concat(+(t/1e9).toFixed(3),"B"):t>1e6?"".concat(+(t/1e6).toFixed(3),"M"):t>1e3?"".concat(+(t/1e3).toFixed(3),"K"):t:"--"}function et(t,e){return null==e&&(e=10),+(t=(+t).toFixed(e=Math.min(Math.max(0,e),20)))}function it(t){return Math.log(t)/Math.log(10)}function nt(t){return Math.pow(10,t)}var at={ZOOM:"zoom",SCROLL:"scroll",CROSSHAIR:"crosshair",TOOLTIP:"tooltip",PANE_DRAG:"pane_drag"};function rt(t){return Object.values(at).indexOf(t)>-1}var ot=function(){function t(e){_(this,t),this._chartStore=e,this._dateTimeFormat=new Intl.DateTimeFormat("en",{hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),this._zoomEnabled=!0,this._scrollEnabled=!0,this._loading=!0,this._loadMoreCallback=null,this._more=!0,this._totalDataSpace=0,this._dataSpace=6,this._barSpace=this._calcBarSpace(),this._offsetRightSpace=50,this._offsetRightBarCount=this._offsetRightSpace/this._dataSpace,this._leftMinVisibleBarCount=2,this._rightMinVisibleBarCount=2,this._from=0,this._to=0,this._preOffsetRightBarCount=0}return y(t,[{key:"_calcBarSpace",value:function(){return Math.max(1,Math.min(Math.floor(.82*this._dataSpace),Math.floor(this._dataSpace)-1))}},{key:"adjustFromTo",value:function(){var t=this._chartStore.dataList().length,e=this._totalDataSpace/this._dataSpace,i=e-Math.min(this._leftMinVisibleBarCount,t);this._offsetRightBarCount>i&&(this._offsetRightBarCount=i);var n=-t+Math.min(this._rightMinVisibleBarCount,t);n>this._offsetRightBarCount&&(this._offsetRightBarCount=n),this._to=Math.round(this._offsetRightBarCount+t+.5),this._from=Math.round(this._to-e)-1,this._to>t&&(this._to=t),0>this._from&&(this._from=0),this._chartStore.adjustVisibleDataList(),0===this._from&&this._more&&!this._loading&&k(this._loadMoreCallback)&&(this._loading=!0,this._loadMoreCallback(Z(this._chartStore.dataList()[0],"timestamp")))}},{key:"setMore",value:function(t){this._more=t}},{key:"setLoading",value:function(t){this._loading=t}},{key:"dateTimeFormat",value:function(){return this._dateTimeFormat}},{key:"setTimezone",value:function(t){var e;try{e=new Intl.DateTimeFormat("en",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(t){}e&&(this._dateTimeFormat=e)}},{key:"timezone",value:function(){return this._dateTimeFormat.resolvedOptions().timeZone}},{key:"dataSpace",value:function(){return this._dataSpace}},{key:"barSpace",value:function(){return this._barSpace}},{key:"halfBarSpace",value:function(){return this._barSpace/2}},{key:"setDataSpace",value:function(t,e){1>t||t>50||this._dataSpace===t||(this._dataSpace=t,this._barSpace=this._calcBarSpace(),e&&e(),this.adjustFromTo(),this._chartStore.crosshairStore().recalculate(!0),this._chartStore.invalidate())}},{key:"setTotalDataSpace",value:function(t){this._totalDataSpace!==t&&(this._totalDataSpace=t,this.adjustFromTo(),this._chartStore.crosshairStore().recalculate(!0))}},{key:"setOffsetRightSpace",value:function(t,e){this._offsetRightSpace=t,this._offsetRightBarCount=t/this._dataSpace,e&&(this.adjustFromTo(),this._chartStore.crosshairStore().recalculate(!0),this._chartStore.invalidate())}},{key:"resetOffsetRightSpace",value:function(){this.setOffsetRightSpace(this._offsetRightSpace)}},{key:"offsetRightSpace",value:function(){return this._offsetRightSpace}},{key:"offsetRightBarCount",value:function(){return this._offsetRightBarCount}},{key:"setOffsetRightBarCount",value:function(t){this._offsetRightBarCount=t}},{key:"setLeftMinVisibleBarCount",value:function(t){this._leftMinVisibleBarCount=t}},{key:"setRightMinVisibleBarCount",value:function(t){this._rightMinVisibleBarCount=t}},{key:"from",value:function(){return this._from}},{key:"to",value:function(){return this._to}},{key:"startScroll",value:function(){this._preOffsetRightBarCount=this._offsetRightBarCount}},{key:"scroll",value:function(t,e){if(this._scrollEnabled){var i=t/this._dataSpace;this._chartStore.actionStore().execute(at.SCROLL,{barCount:i,distance:t}),this._offsetRightBarCount=this._preOffsetRightBarCount-i,this.adjustFromTo();var n=e||this._chartStore.crosshairStore().get();this._chartStore.crosshairStore().set(n,!0),this._chartStore.invalidate()}}},{key:"getDataByDataIndex",value:function(t){return this._chartStore.dataList()[t]}},{key:"coordinateToFloatIndex",value:function(t){var e=this._chartStore.dataList().length;return Math.round(1e6*(e+this._offsetRightBarCount-(this._totalDataSpace-t)/this._dataSpace))/1e6}},{key:"dataIndexToTimestamp",value:function(t){var e=this.getDataByDataIndex(t);if(e)return e.timestamp}},{key:"timestampToDataIndex",value:function(t){return 0===this._chartStore.dataList().length?0:function(t,e,i){var n=0,a=0;for(a=t.length-1;n!==a;){var r=Math.floor((a+n)/2),o=a-n,s=t[r][e];if(i===t[n][e])return n;if(i===t[a][e])return a;if(i===s)return r;if(i>s?n=r:a=r,2>=o)break}return n}(this._chartStore.dataList(),"timestamp",t)}},{key:"dataIndexToCoordinate",value:function(t){var e=this._chartStore.dataList().length;return this._totalDataSpace-(e+this._offsetRightBarCount-t-.5)*this._dataSpace}},{key:"coordinateToDataIndex",value:function(t){return Math.ceil(this.coordinateToFloatIndex(t))-1}},{key:"zoom",value:function(t,e){var i=this;if(this._zoomEnabled){if(!e||!E(e.x)){var n=this._chartStore.crosshairStore().get();e={x:E(n.x)?n.x:this._totalDataSpace/2}}this._chartStore.actionStore().execute(at.ZOOM,{coordinate:e,scale:t});var a=this.coordinateToFloatIndex(e.x);this.setDataSpace(this._dataSpace+t*(this._dataSpace/10),(function(){i._offsetRightBarCount+=a-i.coordinateToFloatIndex(e.x)}))}}},{key:"setZoomEnabled",value:function(t){this._zoomEnabled=t}},{key:"zoomEnabled",value:function(){return this._zoomEnabled}},{key:"setScrollEnabled",value:function(t){this._scrollEnabled=t}},{key:"scrollEnabled",value:function(){return this._scrollEnabled}},{key:"setLoadMoreCallback",value:function(t){this._loadMoreCallback=t}},{key:"clear",value:function(){this._more=!0,this._loading=!0,this._from=0,this._to=0}}]),t}();function st(t,e){return st=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},st(t,e)}function ct(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&st(t,e)}function lt(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ht(t){return ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ht(t)}function ut(t,e,i,n,a,r,o){try{var s=t[r](o),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,a)}var dt={exports:{}};!function(t){var e=function(t){var e,i=Object.prototype,n=i.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,i){return t[e]=i}}function h(t,e,i,n){var a=Object.create((e&&e.prototype instanceof m?e:m).prototype),r=new P(n||[]);return a._invoke=function(t,e,i){var n=d;return function(a,r){if(n===v)throw Error("Generator is already running");if(n===p){if("throw"===a)throw r;return M()}for(i.method=a,i.arg=r;;){var o=i.delegate;if(o){var s=E(o,i);if(s){if(s===_)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===d)throw n=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=v;var c=u(t,e,i);if("normal"===c.type){if(n=i.done?p:f,c.arg===_)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n=p,i.method="throw",i.arg=c.arg)}}}(t,i,r),a}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var d="suspendedStart",f="suspendedYield",v="executing",p="completed",_={};function m(){}function y(){}function g(){}var x={};l(x,r,(function(){return this}));var S=Object.getPrototypeOf,b=S&&S(S(T([])));b&&b!==i&&n.call(b,r)&&(x=b);var k=g.prototype=m.prototype=Object.create(x);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function i(a,r,s,c){var l=u(t[a],t,r);if("throw"!==l.type){var h=l.arg,d=h.value;return d&&"object"==o(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,s,c)}),(function(t){i("throw",t,s,c)})):e.resolve(d).then((function(t){h.value=t,s(h)}),(function(t){return i("throw",t,s,c)}))}c(l.arg)}var a;this._invoke=function(t,n){function r(){return new e((function(e,a){i(t,n,e,a)}))}return a=a?a.then(r,r):r()}}function E(t,i){var n=t.iterator[i.method];if(n===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,E(t,i),"throw"===i.method))return _;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var a=u(n,t.iterator,i.arg);if("throw"===a.type)return i.method="throw",i.arg=a.arg,i.delegate=null,_;var r=a.arg;return r?r.done?(i[t.resultName]=r.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,_):r:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,_)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(t){if(t){var i=t[r];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function i(){for(;++a<t.length;)if(n.call(t,a))return i.value=t[a],i.done=!1,i;return i.value=e,i.done=!0,i};return o.next=o}}return{next:M}}function M(){return{value:e,done:!0}}return y.prototype=g,l(k,"constructor",g),l(g,"constructor",y),y.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},w(C.prototype),l(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,i,n,a,r){void 0===r&&(r=Promise);var o=new C(h(e,i,n,a),r);return t.isGeneratorFunction(i)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(k),l(k,c,"Generator"),l(k,r,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=T,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function a(n,a){return s.type="throw",s.arg=t,i.next=n,a&&(i.method="next",i.arg=e),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return a("end");if(this.prev>=o.tryLoc){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(o.catchLoc>this.prev)return a(o.catchLoc,!0);if(o.finallyLoc>this.prev)return a(o.finallyLoc)}else if(c){if(o.catchLoc>this.prev)return a(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(o.finallyLoc>this.prev)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(this.prev>=a.tryLoc&&n.call(a,"finallyLoc")&&a.finallyLoc>this.prev){var r=a;break}}!r||"break"!==t&&"continue"!==t||r.tryLoc>e||e>r.finallyLoc||(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,_):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),I(i),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var a=n.arg;I(i)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:T(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==("undefined"===typeof globalThis?"undefined":o(globalThis))?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(dt);var ft=dt.exports,vt="line",pt="circle",_t={PRICE:"price",VOLUME:"volume",NORMAL:"normal"};function mt(t,e,i,n,a,r){var o=r.color,s=r.isStroke,c={prev:{kLineData:t[i-1],technicalIndicatorData:e[i-1]},current:{kLineData:t[i],technicalIndicatorData:e[i]},next:{kLineData:t[i+1],technicalIndicatorData:e[i+1]}};return E(n.color)&&(o=k(n.color)?n.color(c,a)||r.color:n.color||r.color),E(n.isStroke)&&(s=k(n.isStroke)?n.isStroke(c):n.isStroke),{color:o,isStroke:s}}var yt=function(){function t(e){var i=e.name,n=e.shortName,a=e.series,r=e.calcParams,o=e.plots,s=e.precision,c=e.shouldCheckParamCount,l=e.shouldOhlc,h=e.shouldFormatBigNumber,u=e.minValue,d=e.maxValue,f=e.styles;_(this,t),this.name=i||"",this.shortName=n||i||"",this.series=-1!==Object.values(_t).indexOf(a)?a:_t.NORMAL,this.precision=C(s)&&s>=0?s:4,this._precisionFlag=!1,this.calcParams=b(r)?r:[],this.plots=b(o)?o:[],this.shouldCheckParamCount=!A(c)||c,this.shouldOhlc=!!A(l)&&l,this.shouldFormatBigNumber=!!A(h)&&h,this.minValue=u,this.maxValue=d,this.styles=f,this.result=[]}var e,i;return y(t,[{key:"_createParams",value:function(t){return t.map((function(t){return w(t)?t.value:t}))}},{key:"setShortName",value:function(t){return this.shortName!==t&&(this.shortName=t,!0)}},{key:"setPrecision",value:function(t,e){return!(!C(t)||0>t||e&&(!e||this._precisionFlag))&&(this.precision=parseInt(t,10),e||(this._precisionFlag=!0),!0)}},{key:"setCalcParams",value:function(t){if(!b(t))return!1;if(this.shouldCheckParamCount&&t.length!==this.calcParams.length)return!1;for(var e=[],i=0;t.length>i;i++){var n=t[i],a=void 0,r=void 0;w(n)?(a=n.value,r=n.allowDecimal):(a=n,r=!1);var o=this.calcParams[i];if(w(o)&&A(o.allowDecimal)&&(r=o.allowDecimal),!C(a)||0>=a||!r&&parseInt(a,10)!==a)return!1;e.push({allowDecimal:r,value:a})}this.calcParams=e;var s=this.regeneratePlots(this._createParams(e));return s&&b(s)&&(this.plots=s),!0}},{key:"setShouldOhlc",value:function(t){return!(!A(t)||this.shouldOhlc===t)&&(this.shouldOhlc=t,!0)}},{key:"setShouldFormatBigNumber",value:function(t){return!(!A(t)||this.shouldFormatBigNumber===t)&&(this.shouldFormatBigNumber=t,!0)}},{key:"setStyles",value:function(t,e){return!!w(t)&&(this.styles||(this.styles={margin:S(e.margin),bar:S(e.bar),line:S(e.line),circle:S(e.circle)}),x(this.styles,t),!0)}},{key:"calc",value:(e=ft.mark((function t(e){return ft.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.calcTechnicalIndicator(e,{params:this._createParams(this.calcParams),plots:this.plots});case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:this.result=t.t0;case 6:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,i=arguments;return new Promise((function(n,a){var r=e.apply(t,i);function o(t){ut(r,n,a,o,s,"next",t)}function s(t){ut(r,n,a,o,s,"throw",t)}o(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"calcTechnicalIndicator",value:function(t,e){}},{key:"regeneratePlots",value:function(t){}}]),t}();function gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);e>i;i++)n[i]=t[i];return n}var xt=function(){function t(e){_(this,t),this._chartStore=e,this._templates=this._createTemplates(),this._instances=new Map}return y(t,[{key:"_createTechInfo",value:function(t){return{name:t.name,shortName:t.shortName,series:t.series,calcParams:t.calcParams,shouldCheckParamCount:t.shouldCheckParamCount,shouldOhlc:t.shouldOhlc,shouldFormatBigNumber:t.shouldFormatBigNumber,precision:t.precision,styles:t.styles,plots:t.plots,result:t.result||[]}}},{key:"_createTemplates",value:function(){var t={},e=p.technicalIndicatorExtensions;for(var i in e){var n=this._createTemplateInstance(e[i]);n&&(t[i]=n)}return t}},{key:"_createTemplateInstance",value:function(t){var e=t.name,i=t.shortName,n=t.series,a=t.calcParams,r=t.plots,o=t.precision,s=t.shouldCheckParamCount,c=t.shouldOhlc,l=t.shouldFormatBigNumber,h=t.minValue,u=t.maxValue,d=t.styles,f=t.calcTechnicalIndicator,v=t.regeneratePlots,p=t.createToolTipDataSource,m=t.render;if(!e||!k(f))return null;var g=function(t){ct(v,t);var f=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(v);function v(){return _(this,v),f.call(this,{name:e,shortName:i,series:n,calcParams:a,plots:r,precision:o,shouldCheckParamCount:s,shouldOhlc:c,shouldFormatBigNumber:l,minValue:h,maxValue:u,styles:d})}return y(v)}(yt);return g.prototype.calcTechnicalIndicator=f,k(v)&&(g.prototype.regeneratePlots=v),k(p)&&(g.prototype.createToolTipDataSource=p),k(m)&&(g.prototype.render=m),new g}},{key:"addTemplate",value:function(t){var e=this;t.forEach((function(t){var i=e._createTemplateInstance(t||{});i&&(e._templates[i.name]=i)}))}},{key:"hasTemplate",value:function(t){return!!this._templates[t]}},{key:"getTemplateInfo",value:function(t){if(!E(t)){var e={};for(var i in this._templates)e[i]=this._createTechInfo(this._templates[i]);return e}var n=this._templates[t];return n?this._createTechInfo(n):{}}},{key:"addInstance",value:function(t,e,i){var n=e.name,a=e.calcParams,r=e.precision,o=e.shouldOhlc,s=e.shouldFormatBigNumber,c=e.styles,l=this._instances.get(t);if(!l||!l.has(n)){l||(l=new Map,this._instances.set(t,l));var h=this._templates[n],u=Object.create(Object.getPrototypeOf(h));for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(u[d]=h[d]);return u.setCalcParams(a),u.setPrecision(r),u.setShouldOhlc(o),u.setShouldFormatBigNumber(s),u.setStyles(c,this._chartStore.styleOptions().technicalIndicator),i||l.clear(),l.set(n,u),u.calc(this._chartStore.dataList())}}},{key:"instances",value:function(t){return this._instances.get(t)||new Map}},{key:"removeInstance",value:function(t,e){var i=!1;if(this._instances.has(t)){var n=this._instances.get(t);E(e)?n.has(e)&&(n.delete(e),i=!0):(n.clear(),i=!0),0===n.size&&this._instances.delete(t)}return i}},{key:"hasInstance",value:function(t){return this._instances.has(t)}},{key:"calcInstance",value:function(t,e){var i=this,n=[];if(E(t))if(E(e)){var a=this._instances.get(e);a&&a.has(t)&&n.push(a.get(t).calc(this._chartStore.dataList()))}else this._instances.forEach((function(e){e.has(t)&&n.push(e.get(t).calc(i._chartStore.dataList()))}));else this._instances.forEach((function(t){t.forEach((function(t){n.push(t.calc(i._chartStore.dataList()))}))}));return Promise.all(n)}},{key:"getInstanceInfo",value:function(t,e){var i=this,n=function(t){var n,a=[],r=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return gt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?gt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,a=function(){};return{s:a,n:function(){return t.length>n?{done:!1,value:t[n++]}:{done:!0}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}(t);try{for(r.s();!(n=r.n()).done;){var o=n.value[1];if(o){var s=i._createTechInfo(o);if(o.name===e)return s;a.push(s)}}}catch(t){r.e(t)}finally{r.f()}return a};if(!E(t)){var a={};return this._instances.forEach((function(t,e){a[e]=n(t)})),a}return this._instances.has(t)?n(this._instances.get(t)):{}}},{key:"setSeriesPrecision",value:function(t,e){var i=function(i){i.series===_t.PRICE&&i.setPrecision(t,!0),i.series===_t.VOLUME&&i.setPrecision(e,!0)};for(var n in this._templates)i(this._templates[n]);this._instances.forEach((function(t){t.forEach((function(t){i(t)}))}))}},{key:"override",value:function(t,e){var i=this,n=t.name,a=t.shortName,r=t.calcParams,o=t.precision,s=t.shouldOhlc,c=t.shouldFormatBigNumber,l=t.styles,h=this._chartStore.styleOptions().technicalIndicator,u=new Map;if(E(e))this._instances.has(e)&&u.set(e,this._instances.get(e));else{u=this._instances;var d=this._templates[n];d&&(d.setCalcParams(r),d.setShortName(a),d.setPrecision(o),d.setShouldOhlc(s),d.setShouldFormatBigNumber(c),d.setStyles(l,h))}var f=!1,v=[];if(u.forEach((function(t){if(t.has(n)){var e=t.get(n),u=e.setShortName(a),d=e.setCalcParams(r),p=e.setPrecision(o),_=e.setShouldOhlc(s),m=e.setShouldFormatBigNumber(c),y=e.setStyles(l,h);(u||d||p||_||m||y)&&(f=!0),d&&v.push(e.calc(i._chartStore.dataList()))}})),f)return Promise.all(v)}}]),t}();function St(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function bt(t,e){e.forEach((function(e){var i=e.key,n=e.fn;k(n)&&(t[i]=n)}))}var kt=function(){function t(e){var i=e.id,n=e.chartStore,a=e.xAxis,r=e.yAxis;_(this,t),this._id=i,this._chartStore=n,this._xAxis=a,this._yAxis=r,this._styles=null}return y(t,[{key:"draw",value:function(t){}},{key:"setStyles",value:function(t,e){return!!w(t)&&(this._styles||(this._styles=S(e)),x(this._styles,t),!0)}},{key:"id",value:function(){return this._id}},{key:"styles",value:function(){return this._styles}},{key:"setYAxis",value:function(t){t&&(this._yAxis=t)}},{key:"checkEventCoordinateOn",value:function(t){}},{key:"onClick",value:function(t){}},{key:"onRightClick",value:function(t){}},{key:"onMouseEnter",value:function(t){}},{key:"onMouseLeave",value:function(t){}}]),t}();function wt(t,e,i,n){t.fillStyle=e,t.beginPath(),t.arc(i.x,i.y,n,0,2*Math.PI),t.closePath(),t.fill()}function Ct(t,e,i){var n=Math.abs(e.x-t.x),a=Math.abs(e.y-t.y),r=Math.abs(i.x-t.x);return Math.abs(n*Math.abs(i.y-t.y)-r*a)/2}function Et(t,e){var i=t.x-e.x;if(0!==i){var n=(t.y-e.y)/i;return{k:n,b:t.y-n*t.x}}}function At(t,e,i){return It(Et(t,e),i)}function It(t,e){return t?e.x*t.k+t.b:e.y}function Pt(t,e,i){if(!i||!t||!e)return!1;if(t.x===e.x)return 2>Math.abs(i.x-t.x);var n=Et(t,e),a=It(n,i),r=Math.abs(a-i.y);return 4>r*r/(n.k*n.k+1)}function Tt(t,e,i){return!!Pt(t,e,i)&&(t.x===e.x?e.y>t.y?2>t.y-i.y:2>i.y-t.y:e.x>t.x?2>t.x-i.x:2>i.x-t.x)}function Mt(t,e,i){return!!Pt(t,e,i)&&(t.x===e.x?4>Math.abs(t.y-i.y)+Math.abs(e.y-i.y)-Math.abs(t.y-e.y):4>Math.abs(t.x-i.x)+Math.abs(e.x-i.x)-Math.abs(t.x-e.x))}function Dt(t,e,i){if(!i)return!1;var n=i.x-t.x,a=i.y-t.y;return!(n*n+a*a>e*e)}function Ot(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=[];if(t.length>1)if(t[0].x===t[1].x){var a=0,r=e.y;if(n.push([{x:t[0].x,y:a},{x:t[0].x,y:r}]),t.length>2){n.push([{x:t[2].x,y:a},{x:t[2].x,y:r}]);for(var o=t[0].x-t[2].x,s=0;i>s;s++){var c=o*(s+1);n.push([{x:t[0].x+c,y:a},{x:t[0].x+c,y:r}])}}}else{var l=0,h=e.x,u=Et(t[0],t[1]),d=u.k,f=u.b;if(n.push([{x:l,y:l*d+f},{x:h,y:h*d+f}]),t.length>2){var v=t[2].y-d*t[2].x;n.push([{x:l,y:l*d+v},{x:h,y:h*d+v}]);for(var p=f-v,_=0;i>_;_++){var m=f+p*(_+1);n.push([{x:l,y:l*d+m},{x:h,y:h*d+m}])}}}return n}function Lt(t,e,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),t.beginPath();var n=!0;e.forEach((function(e){e&&(n?(t.moveTo(e.x,e.y),n=!1):t.lineTo(e.x,e.y))})),i(),t.restore()}function Rt(t,e){Lt(t,e,(function(){t.closePath(),t.stroke()}))}function Bt(t,e){Lt(t,e,(function(){t.closePath(),t.fill()}))}function Ft(t,e,i,n){t.beginPath();var a=t.lineWidth%2?.5:0;t.moveTo(i,e+a),t.lineTo(n,e+a),t.stroke(),t.closePath()}function zt(t,e,i,n){t.beginPath();var a=t.lineWidth%2?.5:0;t.moveTo(e+a,i),t.lineTo(e+a,n),t.stroke(),t.closePath()}function jt(t,e){Lt(t,e,(function(){t.stroke(),t.closePath()}))}function Vt(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||2}function Nt(t,e){return Math.round(t.measureText(e).width)}function Ht(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Helvetica Neue";return"".concat(e," ").concat(t,"px ").concat(i)}function Yt(t,e,i){t.font=Ht(i.size,i.weight,i.family);var n=Nt(t,e);return i.paddingLeft+i.paddingRight+n+2*(i.borderSize||0)}function Wt(t){return t.paddingTop+t.paddingBottom+t.size+2*(t.borderSize||0)}function Ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);e>i;i++)n[i]=t[i];return n}var Gt="point",Jt="none",Qt={NORMAL:"normal",WEAK_MAGNET:"weak_magnet",STRONG_MAGNET:"strong_magnet"},Xt=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(t){var n,a=t.id,r=t.name,o=t.totalStep,s=t.chartStore,c=t.xAxis,l=t.yAxis,h=t.points,u=t.styles,d=t.lock,f=t.mode,v=t.data;return _(this,i),(n=e.call(this,{id:a,chartStore:s,xAxis:c,yAxis:l}))._name=r,n._totalStep=o,n._lock=d,n._mode=Qt.NORMAL,n.setMode(f),n._data=v,n._drawStep=1,n._points=[],n.setPoints(h),n.setStyles(u,s.styleOptions().shape),n._prevPressPoint=null,n._prevPoints=null,n._coordinates=[],n}return y(i,[{key:"setPoints",value:function(t){if(b(t)&&t.length>0){var e;this._totalStep-1>t.length?(this._drawStep=t.length+1,this._points=S(t),e=t.length):(this._drawStep=-1,this._points=t.slice(0,this._totalStep-1),e=this._totalStep-1);for(var i=0;e>i;i++)this.performEventMoveForDrawing({step:i+2,mode:this._mode,points:this._points,movePoint:this._points[i],xAxis:this._xAxis,yAxis:this._yAxis});-1===this._drawStep&&this.performEventPressedMove({mode:this._mode,points:this._points,pressPointIndex:this._points.length-1,pressPoint:this._points[this._points.length-1],xAxis:this._xAxis,yAxis:this._yAxis})}}},{key:"_timestampOrDataIndexToCoordinateX",value:function(t){var e=t.timestamp,i=t.dataIndex;return e&&(i=this._chartStore.timeScaleStore().timestampToDataIndex(e)),this._xAxis.convertToPixel(i)}},{key:"_drawLines",value:function(t,e,i,n){t.save(),t.strokeStyle=i.color||n.color,t.lineWidth=i.size||n.size,i.style===M&&t.setLineDash(i.dashValue||n.dashValue),e.forEach((function(e){var i,n;if(e.length>1)switch((i=e[0]).x===(n=e[1]).x?2:i.y===n.y?1:0){case 0:jt(t,e);break;case 1:Ft(t,e[0].y,e[0].x,e[1].x);break;case 2:zt(t,e[0].x,e[0].y,e[1].y)}})),t.restore()}},{key:"_drawContinuousLines",value:function(t,e,i,n){t.save(),t.strokeStyle=i.color||n.color,t.lineWidth=i.size||n.size,i.style===M&&t.setLineDash(i.dashValue||n.dashValue),e.forEach((function(e){e.length>0&&jt(t,e)})),t.restore()}},{key:"_drawPolygons",value:function(t,e,i,n){var a;if(t.save(),i.style===T)t.fillStyle=(i.fill||n.fill).color,a=Bt;else{var r=i.stroke||n.stroke;r.style===M&&t.setLineDash(r.dashValue),t.lineWidth=r.size,t.strokeStyle=r.color,a=Rt}e.forEach((function(e){e.length>0&&a(t,e)})),t.restore()}},{key:"_drawArcs",value:function(t,e,i,n){if(t.save(),i.style===T)t.fillStyle=(i.fill||n.fill).color;else{var a=i.stroke||n.stroke;a.style===M&&t.setLineDash(a.dashValue),t.lineWidth=a.size,t.strokeStyle=a.color}e.forEach((function(e){var n=e.x,a=e.y,r=e.radius,o=e.startAngle,s=e.endAngle;t.beginPath(),t.arc(n,a,r,o,s),i.style===T?(t.closePath(),t.fill()):(t.stroke(),t.closePath())})),t.restore()}},{key:"_drawText",value:function(t,e,i,n){var a;t.save(),i.style===P?(t.strokeStyle=i.color||n.color,a=t.strokeText):(t.fillStyle=i.color||n.color,a=t.fillText),t.font=Ht(i.size||n.size,i.family||n.family,i.weight||n.weight);var r=i.offset||n.offset||[0,0];e.forEach((function(e){a.call(t,e.text,e.x+r[1],e.y+r[0])})),t.restore()}},{key:"draw",value:function(t){var e=this;this._coordinates=this._points.map((function(t){var i=t.value;return{x:e._timestampOrDataIndexToCoordinateX({timestamp:t.timestamp,dataIndex:t.dataIndex}),y:e._yAxis.convertToPixel(i)}}));var i=this._styles||this._chartStore.styleOptions().shape;if(1!==this._drawStep&&this._coordinates.length>0){var n={width:this._xAxis.width(),height:this._yAxis.height()},a={price:this._chartStore.pricePrecision(),volume:this._chartStore.volumePrecision()};this._shapeDataSources=this.createShapeDataSource({step:this._drawStep,mode:this._mode,points:this._points,coordinates:this._coordinates,viewport:{width:this._xAxis.width(),height:this._yAxis.height()},precision:{price:this._chartStore.pricePrecision(),volume:this._chartStore.volumePrecision()},styles:i,xAxis:this._xAxis,yAxis:this._yAxis,data:this._data})||[],this._shapeDataSources.forEach((function(n){var a=n.styles,r=n.dataSource,o=void 0===r?[]:r;if(n.isDraw)switch(n.type){case"line":e._drawLines(t,o,a||i.line,i.line);break;case"continuous_line":e._drawContinuousLines(t,o,a||i.line,i.line);break;case"polygon":e._drawPolygons(t,o,a||i.polygon,i.polygon);break;case"arc":e._drawArcs(t,o,a||i.arc,i.arc);break;case"text":e._drawText(t,o,a||i.text,i.text)}})),this.drawExtend&&(t.save(),this.drawExtend({ctx:t,dataSource:this._shapeDataSources,styles:i,viewport:n,precision:a,mode:this._mode,xAxis:this._xAxis,yAxis:this._yAxis,data:this._data}),t.restore())}var r=this._chartStore.shapeStore().mouseOperate();(r.hover.id===this._id&&r.hover.element!==Jt||r.click.id===this._id&&r.click.element!==Jt||this.isDrawing())&&this._coordinates.forEach((function(n,a){var o=n.x,s=n.y,c=i.point.radius,l=i.point.backgroundColor,h=i.point.borderColor,u=i.point.borderSize;r.hover.id===e._id&&r.hover.element===Gt&&a===r.hover.elementIndex&&(c=i.point.activeRadius,l=i.point.activeBackgroundColor,h=i.point.activeBorderColor,u=i.point.activeBorderSize),wt(t,h,{x:o,y:s},c+u),wt(t,l,{x:o,y:s},c)}))}},{key:"setLock",value:function(t){this._lock=t}},{key:"name",value:function(){return this._name}},{key:"lock",value:function(){return this._lock}},{key:"totalStep",value:function(){return this._totalStep}},{key:"mode",value:function(){return this._mode}},{key:"setMode",value:function(t){Object.values(Qt).indexOf(t)>-1&&(this._mode=t)}},{key:"setData",value:function(t){return t!==this._data&&(this._data=t,!0)}},{key:"data",value:function(){return this._data}},{key:"points",value:function(){return this._points}},{key:"isDrawing",value:function(){return-1!==this._drawStep}},{key:"isStart",value:function(){return 1===this._drawStep}},{key:"checkEventCoordinateOn",value:function(t){for(var e=this._styles||this._chartStore.styleOptions().shape,i=this._coordinates.length-1;i>-1;i--)if(Dt(this._coordinates[i],e.point.radius,t))return{id:this._id,element:Gt,elementIndex:i,instance:this};if(this._shapeDataSources){var n,a=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return Ut(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ut(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,a=function(){};return{s:a,n:function(){return t.length>n?{done:!1,value:t[n++]}:{done:!0}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}(this._shapeDataSources);try{for(a.s();!(n=a.n()).done;){var r=n.value,o=r.key,s=r.type,c=r.dataSource,l=void 0===c?[]:c;if(r.isCheck)for(var h=0;l.length>h;h++)if(this.checkEventCoordinateOnShape({key:o,type:s,dataSource:l[h],eventCoordinate:t}))return{id:this._id,element:"other",elementIndex:h,instance:this}}}catch(t){a.e(t)}finally{a.f()}}}},{key:"_performValue",value:function(t,e,i){var n=this._yAxis.convertFromPixel(t);if(this._mode===Qt.NORMAL||"candle_pane"!==i)return n;var a=this._chartStore.timeScaleStore().getDataByDataIndex(e);if(!a)return n;if(n>a.high){if(this._mode===Qt.WEAK_MAGNET){var r=this._yAxis.convertToPixel(a.high);return this._yAxis.convertFromPixel(r-8)>n?a.high:n}return a.high}if(a.low>n){if(this._mode===Qt.WEAK_MAGNET){var o=this._yAxis.convertToPixel(a.low);return n>this._yAxis.convertFromPixel(o-8)?a.low:n}return a.low}var s=Math.max(a.open,a.close);if(n>s)return a.high-n>n-s?s:a.high;var c=Math.min(a.open,a.close);return c>n?c-n>n-a.low?a.low:c:n-c>s-n?s:c}},{key:"mouseMoveForDrawing",value:function(t,e){var i=this._xAxis.convertFromPixel(t.x),n=this._chartStore.timeScaleStore().dataIndexToTimestamp(i),a=this._performValue(t.y,i,e.paneId);this._points[this._drawStep-1]={timestamp:n,value:a,dataIndex:i},this.performEventMoveForDrawing({step:this._drawStep,mode:this._mode,points:this._points,movePoint:{timestamp:n,value:a,dataIndex:i},xAxis:this._xAxis,yAxis:this._yAxis}),this.onDrawing({id:this._id,step:this._drawStep,points:this._points})}},{key:"mouseLeftButtonDownForDrawing",value:function(){this._drawStep===this._totalStep-1?(this._drawStep=-1,this._chartStore.shapeStore().progressInstanceComplete(),this.onDrawEnd({id:this._id,points:this._points})):this._drawStep++}},{key:"mousePressedPointMove",value:function(t,e){var i=this._chartStore.shapeStore().mouseOperate(),n=i.click.elementIndex;if(!this._lock&&i.click.id===this._id&&i.click.element===Gt&&-1!==n){var a=this._xAxis.convertFromPixel(t.x),r=this._chartStore.timeScaleStore().dataIndexToTimestamp(a),o=this._performValue(t.y,a,e.paneId);this._points[n].timestamp=r,this._points[n].dataIndex=a,this._points[n].value=o,this.performEventPressedMove({points:this._points,mode:this._mode,pressPointIndex:n,pressPoint:{dataIndex:a,timestamp:r,value:o},xAxis:this._xAxis,yAxis:this._yAxis}),this.onPressedMove({id:this._id,element:Gt,points:this._points,event:e})}}},{key:"startPressedOtherMove",value:function(t){var e=this._xAxis.convertFromPixel(t.x),i=this._yAxis.convertFromPixel(t.y);this._prevPressPoint={dataIndex:e,value:i},this._prevPoints=S(this._points)}},{key:"mousePressedOtherMove",value:function(t,e){var i=this;if(this._prevPressPoint){var n=this._xAxis.convertFromPixel(t.x),a=this._yAxis.convertFromPixel(t.y),r=n-this._prevPressPoint.dataIndex,o=a-this._prevPressPoint.value;this._points=this._prevPoints.map((function(t){E(t.dataIndex)||(t.dataIndex=i._chartStore.timeScaleStore().timestampToDataIndex(t.timestamp));var e=t.dataIndex+r;return{dataIndex:e,value:t.value+o,timestamp:i._chartStore.timeScaleStore().dataIndexToTimestamp(e)}})),this.onPressedMove({id:this._id,element:"other",points:this._points,event:e})}}},{key:"onDrawStart",value:function(t){}},{key:"onDrawing",value:function(t){}},{key:"onDrawEnd",value:function(t){}},{key:"onPressedMove",value:function(t){}},{key:"onRemove",value:function(t){}},{key:"checkEventCoordinateOnShape",value:function(t){}},{key:"createShapeDataSource",value:function(t){}},{key:"performEventMoveForDrawing",value:function(t){}},{key:"performEventPressedMove",value:function(t){}}]),i}(kt);function $t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Zt(t){for(var e=1;arguments.length>e;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?$t(Object(i),!0).forEach((function(e){St(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):$t(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Kt(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return qt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?qt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,a=function(){};return{s:a,n:function(){return t.length>n?{done:!1,value:t[n++]}:{done:!0}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function qt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);e>i;i++)n[i]=t[i];return n}var te=function(){function t(e){_(this,t),this._chartStore=e,this._templates=this._createTemplates(),this._mouseOperate={click:{id:"",element:Jt,elementIndex:-1},hover:{id:"",element:Jt,elementIndex:-1}},this._progressInstance=null,this._pressedInstance=null,this._instances=new Map}return y(t,[{key:"_createTemplates",value:function(){var t={},e=p.shapeExtensions;for(var i in e){var n=this._createTemplateClass(e[i]);n&&(t[i]=n)}return t}},{key:"_createTemplateClass",value:function(t){var e=t.name,i=t.totalStep,n=t.checkEventCoordinateOnShape,a=t.createShapeDataSource,r=t.performEventPressedMove,o=t.performEventMoveForDrawing,s=t.drawExtend;if(!(e&&C(i)&&k(n)&&k(a)))return null;var c=function(t){ct(a,t);var n=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(a);function a(t){var r=t.id,o=t.chartStore,s=t.xAxis,c=t.yAxis,l=t.points,h=t.styles,u=t.lock,d=t.mode,f=t.data;return _(this,a),n.call(this,{id:r,name:e,totalStep:i,chartStore:o,xAxis:s,yAxis:c,points:l,styles:h,lock:u,mode:d,data:f})}return y(a)}(Xt);return c.prototype.checkEventCoordinateOnShape=n,c.prototype.createShapeDataSource=a,k(r)&&(c.prototype.performEventPressedMove=r),k(o)&&(c.prototype.performEventMoveForDrawing=o),k(s)&&(c.prototype.drawExtend=s),c}},{key:"addTemplate",value:function(t){var e=this;t.forEach((function(t){var i=e._createTemplateClass(t);i&&(e._templates[t.name]=i)}))}},{key:"getTemplate",value:function(t){return this._templates[t]}},{key:"getInstance",value:function(t){var e,i=Kt(this._instances);try{for(i.s();!(e=i.n()).done;){var n=(e.value[1]||[]).find((function(e){return e.id()===t}));if(n)return n}}catch(t){i.e(t)}finally{i.f()}return null}},{key:"hasInstance",value:function(t){return!!this.getInstance(t)}},{key:"addInstance",value:function(t,e){t.isDrawing()?this._progressInstance={paneId:e,instance:t,fixed:E(e)}:(this._instances.has(e)||this._instances.set(e,[]),this._instances.get(e).push(t)),this._chartStore.invalidate(1)}},{key:"progressInstance",value:function(){return this._progressInstance||{}}},{key:"progressInstanceComplete",value:function(){var t=this.progressInstance(),e=t.instance,i=t.paneId;e&&!e.isDrawing()&&(this._instances.has(i)||this._instances.set(i,[]),this._instances.get(i).push(e),this._progressInstance=null)}},{key:"updateProgressInstance",value:function(t,e){var i=this.progressInstance(),n=i.instance;n&&!i.fixed&&(n.setYAxis(t),this._progressInstance.paneId=e)}},{key:"pressedInstance",value:function(){return this._pressedInstance||{}}},{key:"updatePressedInstance",value:function(t,e,i){this._pressedInstance=t?{instance:t,paneId:e,element:i}:null}},{key:"instances",value:function(t){return this._instances.get(t)||[]}},{key:"setInstanceOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=t.styles,n=t.lock,a=t.mode,r=t.data,o=this._chartStore.styleOptions().shape,s=!1;if(E(e)){var c=this.getInstance(e);c&&(c.setLock(n),c.setMode(a),(c.setStyles(i,o)||c.setData(r))&&(s=!0))}else this._instances.forEach((function(t){t.forEach((function(t){t.setLock(n),t.setMode(a),(t.setStyles(i,o)||t.setData(r))&&(s=!0)}))}));s&&this._chartStore.invalidate(1)}},{key:"getInstanceInfo",value:function(t){var e=function(t){return{name:t.name(),id:t.id(),totalStep:t.totalStep(),lock:t.lock(),mode:t.mode(),points:t.points(),styles:t.styles(),data:t.data()}},i=this.progressInstance();if(!E(t)){var n={};return this._instances.forEach((function(t,a){n[a]=t.map((function(t){return e(t)})),i.paneId===a&&i.instance&&n[a].push(e(i.instance))})),n}if(i.instance&&i.instance.id()===t)return e(i.instance);var a=this.getInstance(t);return a?e(a):null}},{key:"removeInstance",value:function(t){var e=!1,i=this.progressInstance().instance;if(!i||E(t)&&i.id()!==t||(i.onRemove({id:i.id()}),this._progressInstance=null,e=!0),E(t)){var n,a=Kt(this._instances);try{for(a.s();!(n=a.n()).done;){var r=n.value,o=r[1]||[],s=o.findIndex((function(e){return e.id()===t}));if(s>-1){o[s].onRemove({id:o[s].id()}),o.splice(s,1),0===o.length&&this._instances.delete(r[0]),e=!0;break}}}catch(t){a.e(t)}finally{a.f()}}else this._instances.forEach((function(t){t.length>0&&t.forEach((function(t){t.onRemove({id:t.id()})}))})),this._instances.clear(),e=!0;e&&this._chartStore.invalidate(1)}},{key:"mouseOperate",value:function(){return this._mouseOperate}},{key:"setMouseOperate",value:function(t){var e=this._mouseOperate,i=e.hover,n=e.click;!t.hover||i.id===t.hover.id&&i.element===t.hover.element&&i.elementIndex===t.hover.elementIndex||(this._mouseOperate.hover=Zt({},t.hover)),!t.click||n.id===t.click.id&&n.element===t.click.element&&n.elementIndex===t.click.elementIndex||(this._mouseOperate.click=Zt({},t.click))}},{key:"isEmpty",value:function(){return 0===this._instances.size&&!this.progressInstance().instance}},{key:"isDrawing",value:function(){var t=this.progressInstance().instance;return t&&t.isDrawing()}},{key:"isPressed",value:function(){return!!this.pressedInstance().instance}}]),t}();function ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);e>i;i++)n[i]=t[i];return n}function ie(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var ne=function(){function t(e){_(this,t),this._chartStore=e,this._annotations=new Map,this._visibleAnnotations=new Map,this._mouseOperate={id:""}}return y(t,[{key:"mouseOperate",value:function(){return this._mouseOperate}},{key:"setMouseOperate",value:function(t){t&&this._mouseOperate.id!==t.id&&(this._mouseOperate=function(t){for(var e=1;arguments.length>e;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ie(Object(i),!0).forEach((function(e){St(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ie(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},t))}},{key:"createVisibleAnnotations",value:function(){var t=this;this._visibleAnnotations.clear(),this._annotations.size>0&&this._chartStore.visibleDataList().forEach((function(e){var i=e.data,n=e.x;t._annotations.forEach((function(e,a){if(e.size>0){var r=e.get(i.timestamp)||[];if(r.length>0){var o,s=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return ee(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ee(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,a=function(){};return{s:a,n:function(){return t.length>n?{done:!1,value:t[n++]}:{done:!0}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}(r);try{for(s.s();!(o=s.n()).done;){var c=o.value;c.createSymbolCoordinate(n),t._visibleAnnotations.has(a)?t._visibleAnnotations.get(a).push(c):t._visibleAnnotations.set(a,[c])}}catch(t){s.e(t)}finally{s.f()}}}}))}))}},{key:"add",value:function(t,e){var i=this;this._annotations.has(e)||this._annotations.set(e,new Map),t.forEach((function(t){var n=i._annotations.get(e);n.has(t.id())?n.get(t.id()).push(t):n.set(t.id(),[t])})),this.createVisibleAnnotations(),this._chartStore.invalidate(1)}},{key:"get",value:function(t){return this._visibleAnnotations.get(t)}},{key:"remove",value:function(t,e){var i=!1;if(E(t)){if(this._annotations.has(t))if(E(e)){var n=this._annotations.get(t);[].concat(e).forEach((function(t){var e=t.timestamp;n.has(e)&&(i=!0,n.delete(e))})),0===n.size&&this._annotations.delete(t),i&&this.createVisibleAnnotations()}else i=!0,this._annotations.delete(t),this._visibleAnnotations.delete(t)}else i=!0,this._annotations.clear(),this._visibleAnnotations.clear();i&&this._chartStore.invalidate(1)}},{key:"isEmpty",value:function(){return 0===this._visibleAnnotations.size}}]),t}(),ae=function(){function t(e){_(this,t),this._chartStore=e,this._tags=new Map}return y(t,[{key:"_getById",value:function(t,e){var i=this.get(e);return i?i.get(t):null}},{key:"has",value:function(t,e){return!!this._getById(t,e)}},{key:"update",value:function(t,e,i){var n=this._getById(t,e);return!!n&&n.update(i)}},{key:"get",value:function(t){return this._tags.get(t)}},{key:"add",value:function(t,e){this._tags.has(e)||this._tags.set(e,new Map);var i=this._tags.get(e);t.forEach((function(t){i.set(t.id(),t)})),this._chartStore.invalidate(1)}},{key:"remove",value:function(t,e){var i=!1;if(E(t)){if(this._tags.has(t))if(E(e)){var n=this._tags.get(t);[].concat(e).forEach((function(t){n.has(t)&&(i=!0,n.delete(t))})),0===n.size&&this._tags.delete(t)}else i=!0,this._tags.delete(t)}else i=!0,this._tags.clear();i&&this._chartStore.invalidate(1)}}]),t}();function re(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function oe(t){for(var e=1;arguments.length>e;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?re(Object(i),!0).forEach((function(e){St(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):re(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var se=function(){function t(e){_(this,t),this._chartStore=e,this._crosshair={}}return y(t,[{key:"set",value:function(t,e){var i,n,a=this._chartStore.dataList(),r=t||{},o=a[n=E(r.x)?0>(i=this._chartStore.timeScaleStore().coordinateToDataIndex(r.x))?0:i>a.length-1?a.length-1:i:i=a.length-1],s=this._chartStore.timeScaleStore().dataIndexToCoordinate(i),c=this._crosshair.x,l=this._crosshair.y,h=this._crosshair.paneId;this._crosshair=oe(oe({},r),{},{realX:s,kLineData:o,realDataIndex:i,dataIndex:n}),o&&this._chartStore.crosshairChange(this._crosshair),c===r.x&&l===r.y&&h===r.paneId||e||this._chartStore.invalidate(1)}},{key:"recalculate",value:function(t){this.set(this._crosshair,t)}},{key:"get",value:function(){return this._crosshair}}]),t}(),ce=function(){function t(){_(this,t),this._observers=[]}return y(t,[{key:"subscribe",value:function(t){0>this._observers.indexOf(t)&&this._observers.push(t)}},{key:"unsubscribe",value:function(t){var e=this._observers.indexOf(t);e>-1?this._observers.splice(e,1):this._observers=[]}},{key:"execute",value:function(t){this._observers.forEach((function(e){e(t)}))}},{key:"hasObservers",value:function(){return this._observers.length>0}}]),t}(),le=function(){function t(){_(this,t),this._delegates=new Map}return y(t,[{key:"execute",value:function(t,e){this.has(t)&&this._delegates.get(t).execute(e)}},{key:"has",value:function(t){return this._delegates.has(t)&&this._delegates.get(t).hasObservers()}},{key:"subscribe",value:function(t,e){return!!rt(t)&&(this._delegates.has(t)||this._delegates.set(t,new ce),this._delegates.get(t).subscribe(e),!0)}},{key:"unsubscribe",value:function(t,e){if(rt(t)){var i=this._delegates.get(t);return i.unsubscribe(e),i.hasObservers()||this._delegates.delete(t),!0}return!1}}]),t}(),he=function(){function t(e,i){_(this,t),this._handler=i,this._styleOptions=S($),x(this._styleOptions,e),this._pricePrecision=2,this._volumePrecision=0,this._dataList=[],this._visibleDataList=[],this._dragPaneFlag=!1,this._timeScaleStore=new ot(this),this._technicalIndicatorStore=new xt(this),this._shapeStore=new te(this),this._annotationStore=new ne(this),this._tagStore=new ae(this),this._crosshairStore=new se(this),this._actionStore=new le}return y(t,[{key:"adjustVisibleDataList",value:function(){this._visibleDataList=[];for(var t=this._timeScaleStore.from(),e=this._timeScaleStore.to(),i=t;e>i;i++){var n=this._dataList[i],a=this._timeScaleStore.dataIndexToCoordinate(i);this._visibleDataList.push({index:i,x:a,data:n})}this._annotationStore.createVisibleAnnotations()}},{key:"styleOptions",value:function(){return this._styleOptions}},{key:"applyStyleOptions",value:function(t){x(this._styleOptions,t)}},{key:"pricePrecision",value:function(){return this._pricePrecision}},{key:"volumePrecision",value:function(){return this._volumePrecision}},{key:"setPriceVolumePrecision",value:function(t,e){this._pricePrecision=t,this._volumePrecision=e,this._technicalIndicatorStore.setSeriesPrecision(t,e)}},{key:"dataList",value:function(){return this._dataList}},{key:"visibleDataList",value:function(){return this._visibleDataList}},{key:"addData",value:function(t,e,i){if(w(t)){if(b(t)){this._timeScaleStore.setLoading(!1),this._timeScaleStore.setMore(!A(i)||i);var n=0===this._dataList.length;this._dataList=t.concat(this._dataList),n&&this._timeScaleStore.resetOffsetRightSpace(),this._timeScaleStore.adjustFromTo()}else if(e<this._dataList.length)this._dataList[e]=t,this.adjustVisibleDataList();else{this._dataList.push(t);var a=this._timeScaleStore.offsetRightBarCount();0>a&&this._timeScaleStore.setOffsetRightBarCount(--a),this._timeScaleStore.adjustFromTo()}this._crosshairStore.recalculate(!0)}}},{key:"clearDataList",value:function(){this._dataList=[],this._visibleDataList=[],this._timeScaleStore.clear()}},{key:"timeScaleStore",value:function(){return this._timeScaleStore}},{key:"technicalIndicatorStore",value:function(){return this._technicalIndicatorStore}},{key:"shapeStore",value:function(){return this._shapeStore}},{key:"annotationStore",value:function(){return this._annotationStore}},{key:"tagStore",value:function(){return this._tagStore}},{key:"crosshairStore",value:function(){return this._crosshairStore}},{key:"actionStore",value:function(){return this._actionStore}},{key:"invalidate",value:function(t){this._handler.invalidate(t)}},{key:"crosshairChange",value:function(t){this._handler.crosshair(t)}},{key:"dragPaneFlag",value:function(){return this._dragPaneFlag}},{key:"setDragPaneFlag",value:function(t){this._dragPaneFlag=t}}]),t}();function ue(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ht(t)););return t}function de(){return de="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=ue(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(3>arguments.length?t:i):a.value}},de.apply(this,arguments)}function fe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=document.createElement(t);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i.style[n]=e[n]);return i}var ve=function(){function t(e){_(this,t),this._height=-1,this._container=e.container,this._chartStore=e.chartStore,this._initBefore(e),this._initElement(),this._mainWidget=this._createMainWidget(this._element,e),this._yAxisWidget=this._createYAxisWidget(this._element,e)}return y(t,[{key:"_initBefore",value:function(t){}},{key:"_initElement",value:function(){this._element=fe("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"});var t=this._container.lastChild;t?this._container.insertBefore(this._element,t):this._container.appendChild(this._element)}},{key:"_createMainWidget",value:function(t,e){}},{key:"_createYAxisWidget",value:function(t,e){}},{key:"width",value:function(){return this._element.offsetWidth}},{key:"setWidth",value:function(t,e){this._mainWidget.setWidth(t),this._yAxisWidget&&this._yAxisWidget.setWidth(e)}},{key:"height",value:function(){return this._height}},{key:"setHeight",value:function(t){this._height=t,this._mainWidget.setHeight(t),this._yAxisWidget&&this._yAxisWidget.setHeight(t)}},{key:"setOffsetLeft",value:function(t,e){this._mainWidget.setOffsetLeft(t),this._yAxisWidget&&this._yAxisWidget.setOffsetLeft(e)}},{key:"layout",value:function(){this._element.offsetHeight!==this._height&&(this._element.style.height="".concat(this._height,"px")),this._mainWidget.layout(),this._yAxisWidget&&this._yAxisWidget.layout()}},{key:"invalidate",value:function(t){this._yAxisWidget&&this._yAxisWidget.invalidate(t),this._mainWidget.invalidate(t)}},{key:"createHtml",value:function(t){var e=t.id,i=t.content,n=t.style;return"yAxis"===t.position?this._yAxisWidget&&this._yAxisWidget.createHtml({id:e,content:i,style:n}):this._mainWidget.createHtml({id:e,content:i,style:n})}},{key:"removeHtml",value:function(t){this._yAxisWidget&&this._yAxisWidget.removeHtml(t),this._mainWidget.removeHtml(t)}},{key:"getImage",value:function(t){var e=this._element.offsetWidth,i=this._element.offsetHeight,n=fe("canvas",{width:"".concat(e,"px"),height:"".concat(i,"px"),boxSizing:"border-box"}),a=n.getContext("2d"),r=Vt(n);n.width=e*r,n.height=i*r,a.scale(r,r);var o=this._mainWidget.getElement(),s=o.offsetWidth,c=o.offsetHeight,l=parseInt(o.style.left,10);if(a.drawImage(this._mainWidget.getImage(t),l,0,s,c),this._yAxisWidget){var h=this._yAxisWidget.getElement(),u=h.offsetWidth,d=h.offsetHeight,f=parseInt(h.style.left,10);a.drawImage(this._yAxisWidget.getImage(t),f,0,u,d)}return n}},{key:"destroy",value:function(){this._container.removeChild(this._element)}}]),t}();function pe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var _e=function(){function t(e){_(this,t),this._width=0,this._height=0,this._initElement(e.container),this._mainView=this._createMainView(this._element,e),this._overlayView=this._createOverlayView(this._element,e),this._htmlBaseId=0,this._htmls=new Map}return y(t,[{key:"_initElement",value:function(t){this._element=fe("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box"}),t.appendChild(this._element)}},{key:"_createMainView",value:function(t,e){}},{key:"_createOverlayView",value:function(t,e){}},{key:"createHtml",value:function(t){var e=t.id,i=t.content,n=t.style,a=fe("div",function(t){for(var e=1;arguments.length>e;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(i),!0).forEach((function(e){St(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):pe(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({boxSizing:"border-box",position:"absolute",zIndex:12},void 0===n?{}:n));if(I(i)){var r=i.replace(/(^\s*)|(\s*$)/g,"");a.innerHTML=r}else a.appendChild(i);var o=e||"html_".concat(++this._htmlBaseId);return this._htmls.has(o)?this._element.replaceChild(a,this._htmls.get(o)):this._element.appendChild(a),this._htmls.set(o,a),o}},{key:"removeHtml",value:function(t){var e=this;t?[].concat(t).forEach((function(t){var i=e._htmls.get(t);i&&(e._element.removeChild(i),e._htmls.delete(t))})):(this._htmls.forEach((function(t){e._element.removeChild(t)})),this._htmls.clear())}},{key:"getElement",value:function(){return this._element}},{key:"setWidth",value:function(t){this._width=t,this._mainView.setWidth(t),this._overlayView.setWidth(t)}},{key:"setHeight",value:function(t){this._height=t,this._mainView.setHeight(t),this._overlayView.setHeight(t)}},{key:"setOffsetLeft",value:function(t){this._element.style.left="".concat(t,"px")}},{key:"layout",value:function(){this._element.offsetWidth!==this._width&&(this._element.style.width="".concat(this._width,"px")),this._element.offsetHeight!==this._height&&(this._element.style.height="".concat(this._height,"px")),this._mainView.layout(),this._overlayView.layout()}},{key:"invalidate",value:function(t){switch(t){case 1:this._overlayView.flush();break;case 2:case 3:this._mainView.flush(),this._overlayView.flush()}}},{key:"getImage",value:function(t){var e=fe("canvas",{width:"".concat(this._width,"px"),height:"".concat(this._height,"px"),boxSizing:"border-box"}),i=e.getContext("2d"),n=Vt(e);return e.width=this._width*n,e.height=this._height*n,i.scale(n,n),i.drawImage(this._mainView.getImage(),0,0,this._width,this._height),t&&this._overlayView&&i.drawImage(this._overlayView.getImage(),0,0,this._width,this._height),e}}]),t}();function me(t){return window.requestAnimationFrame?window.requestAnimationFrame(t):window.setTimeout(t,20)}var ye=function(){function t(e,i){_(this,t),this._chartStore=i,this._initCanvas(e)}return y(t,[{key:"_initCanvas",value:function(t){this._canvas=fe("canvas",{position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"}),this._ctx=this._canvas.getContext("2d"),t.appendChild(this._canvas)}},{key:"_redraw",value:function(t){this._ctx.clearRect(0,0,this._canvas.offsetWidth,this._canvas.offsetHeight),t&&t(),this._draw()}},{key:"_draw",value:function(){}},{key:"setWidth",value:function(t){this._width=t}},{key:"setHeight",value:function(t){this._height=t}},{key:"layout",value:function(){var t=this;this._height!==this._canvas.offsetHeight||this._width!==this._canvas.offsetWidth?this._redraw((function(){var e=Vt(t._canvas);t._canvas.style.width="".concat(t._width,"px"),t._canvas.style.height="".concat(t._height,"px"),t._canvas.width=Math.floor(t._width*e),t._canvas.height=Math.floor(t._height*e),t._ctx.scale(e,e)})):this.flush()}},{key:"flush",value:function(){var t,e=this;this.requestAnimationId&&(t=this.requestAnimationId,window.cancelAnimationFrame||clearTimeout(t),window.cancelAnimationFrame(t),this.requestAnimationId=null),this.requestAnimationId=me((function(){e._redraw()}))}},{key:"getImage",value:function(){return this._canvas}}]),t}();var ge=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(t,n,a,r,o){var s;return _(this,i),(s=e.call(this,t,n))._xAxis=a,s._yAxis=r,s._paneId=o,s}return y(i,[{key:"_draw",value:function(){this._ctx.globalCompositeOperation="destination-over",this._drawContent()}},{key:"_drawContent",value:function(){this._drawTechs(),this._drawGrid()}},{key:"_drawGrid",value:function(){var t=this,e=this._chartStore.styleOptions().grid;if(e.show){var i=e.horizontal;this._ctx.save(),i.show&&(this._ctx.strokeStyle=i.color,this._ctx.lineWidth=i.size,this._ctx.setLineDash(i.style===M?i.dashValue:[]),this._yAxis.ticks().forEach((function(e){Ft(t._ctx,e.y,0,t._width)})));var n=e.vertical;n.show&&(this._ctx.strokeStyle=n.color,this._ctx.lineWidth=n.size,this._ctx.setLineDash(n.style===M?n.dashValue:[]),this._xAxis.ticks().forEach((function(e){zt(t._ctx,e.x,0,t._height)}))),this._ctx.restore()}}},{key:"_drawTechs",value:function(){var t=this;this._ctx.globalCompositeOperation="source-over";var e=this._chartStore.styleOptions().technicalIndicator;this._chartStore.technicalIndicatorStore().instances(this._paneId).forEach((function(i){var n=i.plots,a=[],r=t._chartStore.dataList(),o=i.result,s=i.styles||e;i.render&&(t._ctx.save(),i.render({ctx:t._ctx,dataSource:{from:t._chartStore.timeScaleStore().from(),to:t._chartStore.timeScaleStore().to(),kLineDataList:t._chartStore.dataList(),technicalIndicatorDataList:o},viewport:{width:t._width,height:t._height,dataSpace:t._chartStore.timeScaleStore().dataSpace(),barSpace:t._chartStore.timeScaleStore().barSpace()},styles:s,xAxis:t._xAxis,yAxis:t._yAxis}),t._ctx.restore());var c=s.line.colors||[],l=c.length,h=t._yAxis.isCandleYAxis();t._ctx.lineWidth=1,t._drawGraphics((function(e,u,d,f,v){var p=o[u]||{},_=0;i.shouldOhlc&&!h&&t._drawCandleBar(e,f,v,u,d,s.bar,"ohlc"),n.forEach((function(i){var n=p[i.key],h=t._yAxis.convertToPixel(n);switch(i.type){case pt:if(E(n)){var d=mt(r,o,u,i,s,{color:s.circle.noChangeColor,isStroke:!0});t._drawCircle({x:e,y:h,radius:f,color:d.color,isStroke:d.isStroke})}break;case"bar":if(E(n)){var v;v=E(i.baseValue)?i.baseValue:t._yAxis.min();var m=t._yAxis.convertToPixel(v),y=Math.abs(m-h),g={x:e-f,width:2*f,height:Math.max(1,y)};g.y=h>m?m:1>y?m-1:h;var x=mt(r,o,u,i,s,{color:s.bar.noChangeColor});g.color=x.color,g.isStroke=x.isStroke,t._drawBar(g)}break;case vt:var S=null;if(E(n)&&(S={x:e,y:h}),a[_])a[_].coordinates.push(S);else{var b=mt(r,o,u,i,s,{color:c[_%l]});a[_]={color:b.color,coordinates:[S]}}_++}}))}),(function(){t._drawLines(a,s)}))})),this._ctx.globalCompositeOperation="destination-over"}},{key:"_drawGraphics",value:function(t,e){var i=this._chartStore.visibleDataList(),n=this._chartStore.timeScaleStore().barSpace(),a=this._chartStore.timeScaleStore().halfBarSpace();i.forEach((function(e,i){t(e.x,e.index,e.data,a,n,i)})),e&&e()}},{key:"_drawLines",value:function(t,e){var i=this;this._ctx.lineWidth=e.line.size,t.forEach((function(t){i._ctx.strokeStyle=t.color,jt(i._ctx,t.coordinates)}))}},{key:"_drawBar",value:function(t){t.isStroke?(this._ctx.strokeStyle=t.color,this._ctx.strokeRect(t.x+.5,t.y,t.width-1,t.height)):(this._ctx.fillStyle=t.color,this._ctx.fillRect(t.x,t.y,t.width,t.height))}},{key:"_drawCircle",value:function(t){this._ctx.strokeStyle=t.color,this._ctx.fillStyle=t.color,this._ctx.beginPath(),this._ctx.arc(t.x,t.y,t.radius,2*Math.PI,0,!0),t.isStroke?this._ctx.stroke():this._ctx.fill(),this._ctx.closePath()}},{key:"_drawCandleBar",value:function(t,e,i,n,a,r,o){var s=a.open,c=a.close,l=a.high,h=a.low;c>s?(this._ctx.strokeStyle=r.upColor,this._ctx.fillStyle=r.upColor):s>c?(this._ctx.strokeStyle=r.downColor,this._ctx.fillStyle=r.downColor):(this._ctx.strokeStyle=r.noChangeColor,this._ctx.fillStyle=r.noChangeColor);var u=this._yAxis.convertToPixel(s),d=this._yAxis.convertToPixel(c),f=this._yAxis.convertToPixel(l),v=this._yAxis.convertToPixel(h),p=Math.min(u,d),_=Math.max(u,d);this._ctx.fillRect(t-.5,f,1,p-f),this._ctx.fillRect(t-.5,_,1,v-_);var m=Math.max(1,_-p);switch(o){case z:this._ctx.fillRect(t-e,p,i,m);break;case"candle_stroke":this._ctx.strokeRect(t-e+.5,p,i-1,m);break;case"candle_up_stroke":c>s?this._ctx.strokeRect(t-e+.5,p,i-1,m):this._ctx.fillRect(t-e,p,i,m);break;case"candle_down_stroke":c>s?this._ctx.fillRect(t-e,p,i,m):this._ctx.strokeRect(t-e+.5,p,i-1,m);break;default:this._ctx.fillRect(t-.5,f,1,v-f),this._ctx.fillRect(t-e,u-.5,e,1),this._ctx.fillRect(t,d-.5,e,1)}}}]),i}(ye);function xe(t,e,i,n,a){t.fillStyle=e,t.fillText(a,i,n)}var Se=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(t,n,a,r,o){var s;return _(this,i),(s=e.call(this,t,n))._xAxis=a,s._yAxis=r,s._paneId=o,s}return y(i,[{key:"_draw",value:function(){this._ctx.textBaseline="alphabetic",this._drawTag(),this._drawShape(),this._drawAnnotation();var t=this._chartStore.crosshairStore().get();if(t.kLineData){var e=this._chartStore.styleOptions().crosshair;t.paneId===this._paneId&&this._drawCrosshairLine(e,"horizontal",t.y,0,this._width,Ft),t.paneId&&this._drawCrosshairLine(e,"vertical",t.realX,0,this._height,zt),this._drawTooltip(t,this._chartStore.technicalIndicatorStore().instances(this._paneId))}}},{key:"_drawAnnotation",value:function(){var t=this,e=this._chartStore.annotationStore().get(this._paneId);e&&e.forEach((function(e){e.draw(t._ctx)}))}},{key:"_drawTag",value:function(){var t=this,e=this._chartStore.tagStore().get(this._paneId);e&&e.forEach((function(e){e.drawMarkLine(t._ctx)}))}},{key:"_drawShape",value:function(){var t=this;this._chartStore.shapeStore().instances(this._paneId).forEach((function(e){e.draw(t._ctx)}));var e=this._chartStore.shapeStore().progressInstance();e.paneId===this._paneId&&e.instance.draw(this._ctx)}},{key:"_drawTooltip",value:function(t,e){var i=this._chartStore.styleOptions().technicalIndicator;this._drawBatchTechToolTip(t,e,i,0,this._shouldDrawTooltip(t,i.tooltip))}},{key:"_drawCrosshairLine",value:function(t,e,i,n,a,r){var o=t[e],s=o.line;t.show&&o.show&&s.show&&(this._ctx.save(),this._ctx.lineWidth=s.size,this._ctx.strokeStyle=s.color,s.style===M&&this._ctx.setLineDash(s.dashValue),r(this._ctx,i,n,a),this._ctx.restore())}},{key:"_drawBatchTechToolTip",value:function(t,e,i){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0;if(r){var o=i.tooltip,s=a;e.forEach((function(e){n._drawTechTooltip(t,e,i,s),s+=o.text.marginTop+o.text.size+o.text.marginBottom}))}}},{key:"_drawTechTooltip",value:function(t,e,i){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=i.tooltip,o=r.text,s=o.marginLeft,c=o.marginRight,l=o.size,h=o.color,u=0,d=o.marginTop+a,f=this._getTechTooltipData(t,e,i);if(this._ctx.textBaseline="top",this._ctx.font=Ht(l,o.weight,o.family),r.showName){var v=f.name,p=Nt(this._ctx,v);xe(this._ctx,h,u+=s,d,v),u+=p,r.showParams||(u+=c)}if(r.showParams){var _=f.calcParamText,m=Nt(this._ctx,_);r.showName||(u+=s),xe(this._ctx,h,u,d,_),u+=m+c}f.values.forEach((function(t){u+=s;var e="".concat(t.title).concat(t.value),i=Nt(n._ctx,e);xe(n._ctx,t.color||o.color,u,d,e),u+=i+c}))}},{key:"_shouldDrawTooltip",value:function(t,e){var i=e.showRule;return i===V||"follow_cross"===i&&!!t.paneId}},{key:"_getTechTooltipData",value:function(t,e,i){var n=this._chartStore.dataList(),a=e.result,r="",o=e.calcParams;if(o.length>0){var s=o.map((function(t){return w(t)?t.value:t}));r="(".concat(s.join(","),")")}var c=[];if(k(e.createToolTipDataSource))c=e.createToolTipDataSource({dataSource:{from:this._chartStore.timeScaleStore().from(),to:this._chartStore.timeScaleStore().to(),kLineDataList:this._chartStore.dataList(),technicalIndicatorDataList:a},viewport:{width:this._width,height:this._height,dataSpace:this._chartStore.timeScaleStore().dataSpace(),barSpace:this._chartStore.timeScaleStore().barSpace()},crosshair:t,technicalIndicator:e,xAxis:this._xAxis,yAxis:this._yAxis,defaultStyles:i})||[];else{var l=e.styles||i,h=a[t.dataIndex],u=e.precision,d=e.shouldFormatBigNumber,f=l.line.colors||[],v=f.length,p=0;e.plots.forEach((function(e){var r={};switch(e.type){case pt:r={color:l.circle.noChangeColor};break;case"bar":r={color:l.bar.noChangeColor};break;case vt:r={color:f[p%v]||i.tooltip.text.color},p++}var o=mt(n,a,t.dataIndex,e,l,r),s={};if(E(e.title)){var _=(h||{})[e.key];E(_)&&(_=q(_,u),d&&(_=tt(_))),s.title=e.title,s.value=_||i.tooltip.defaultValue,s.color=o.color,c.push(s)}}))}return{values:c,name:e.shortName||e.name,calcParamText:r}}}]),i}(ye);var be=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(){return _(this,i),e.apply(this,arguments)}return y(i,[{key:"_createMainView",value:function(t,e){return new ge(t,e.chartStore,e.xAxis,e.yAxis,e.paneId)}},{key:"_createOverlayView",value:function(t,e){return new Se(t,e.chartStore,e.xAxis,e.yAxis,e.paneId)}}]),i}(_e);function ke(t,e,i,n,a,r,o,s,c){Ce(t,e,a,r,o,s,c),we(t,i,n,a,r,o,s,c)}function we(t,e,i,n,a,r,o,s){t.lineWidth=i,t.strokeStyle=e,Ee(t,n,a,r,o,s),t.stroke()}function Ce(t,e,i,n,a,r,o){t.fillStyle=e,Ee(t,i,n,a,r,o),t.fill()}function Ee(t,e,i,n,a,r){t.beginPath(),t.moveTo(e+r,i),t.arcTo(e+n,i,e+n,i+a,r),t.arcTo(e+n,i+a,e,i+a,r),t.arcTo(e,i+a,e,i,r),t.arcTo(e,i,e+n,i,r),t.closePath()}function Ae(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Ie(t){for(var e=1;arguments.length>e;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ae(Object(i),!0).forEach((function(e){St(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ae(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Pe=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(t,n,a,r){var o;return _(this,i),(o=e.call(this,t,n))._yAxis=a,o._paneId=r,o}return y(i,[{key:"_draw",value:function(){var t=this._chartStore.styleOptions().yAxis;t.show&&(this._drawAxisLine(t),this._drawTickLines(t),this._drawTickLabels(t),this._drawTechLastValue(),this._drawLastPriceLabel())}},{key:"_drawAxisLine",value:function(t){var e,i=t.axisLine;i.show&&(this._ctx.strokeStyle=i.color,this._ctx.lineWidth=i.size,e=this._yAxis.isFromYAxisZero()?0:this._width-1,zt(this._ctx,e,0,this._height))}},{key:"_drawTickLines",value:function(t){var e=this,i=t.tickLine;if(i.show){this._ctx.lineWidth=i.size,this._ctx.strokeStyle=i.color;var n,a,r=i.length;this._yAxis.isFromYAxisZero()?(n=0,t.axisLine.show&&(n+=t.axisLine.size),a=n+r):(n=this._width,t.axisLine.show&&(n-=t.axisLine.size),a=n-r),this._yAxis.ticks().forEach((function(t){Ft(e._ctx,t.y,n,a)}))}}},{key:"_drawTickLabels",value:function(t){var e=this,i=t.tickText;if(i.show){var n,a=t.tickLine,r=a.show,o=a.length;this._yAxis.isFromYAxisZero()?(n=i.paddingLeft,t.axisLine.show&&(n+=t.axisLine.size),r&&(n+=o),this._ctx.textAlign="left"):(n=this._width-i.paddingRight,t.axisLine.show&&(n-=t.axisLine.size),r&&(n-=o),this._ctx.textAlign="right"),this._ctx.textBaseline="middle",this._ctx.font=Ht(i.size,i.weight,i.family),this._ctx.fillStyle=i.color,this._yAxis.ticks().forEach((function(t){e._ctx.fillText(t.v,n,t.y)})),this._ctx.textAlign="left"}}},{key:"_drawTechLastValue",value:function(){var t=this,e=this._chartStore.styleOptions().technicalIndicator,i=e.lastValueMark;if(i.show&&i.text.show){var n=this._chartStore.technicalIndicatorStore().instances(this._paneId),a=this._chartStore.dataList();n.forEach((function(n){var r=n.result||[],o=r.length,s=r[o-1]||{},c={prev:{kLineData:a[o-2],technicalIndicatorData:r[o-2]},current:{kLineData:a[o-1],technicalIndicatorData:s},next:{kLineData:null,technicalIndicatorData:null}},l=n.precision,h=n.styles||e,u=h.line.colors||[],d=u.length,f=0;n.plots.forEach((function(e){var a,r=s[e.key];switch(e.type){case pt:a=e.color&&e.color(c,h)||h.circle.noChangeColor;break;case"bar":a=e.color&&e.color(c,h)||h.bar.noChangeColor;break;case vt:a=u[f%d],f++}E(r)&&t._drawMarkLabel(r,l,n.shouldFormatBigNumber,Ie(Ie({},i.text),{},{backgroundColor:a}))}))}))}}},{key:"_drawLastPriceLabel",value:function(){if(this._yAxis.isCandleYAxis()){var t=this._chartStore.styleOptions().candle.priceMark,e=t.last;if(t.show&&e.show&&e.text.show){var i=this._chartStore.dataList(),n=i[i.length-1];if(n){var a,r=n.close,o=n.open;a=r>o?e.upColor:o>r?e.downColor:e.noChangeColor,this._drawMarkLabel(r,this._chartStore.pricePrecision(),!1,Ie(Ie({},e.text),{},{backgroundColor:a}))}}}}},{key:"_drawMarkLabel",value:function(t,e,i,n){var a,r=n.size,o=n.weight,s=n.family,c=n.color,l=n.backgroundColor,h=n.borderRadius,u=n.paddingLeft,d=n.paddingTop,f=n.paddingRight,v=n.paddingBottom,p=this._yAxis.convertToNicePixel(t);if(this._yAxis.yAxisType()===B){var _=((this._chartStore.visibleDataList()[0]||{}).data||{}).close;a="".concat(((t-_)/_*100).toFixed(2),"%")}else a=q(t,e),i&&(a=tt(a));this._ctx.font=Ht(r,o,s);var m,y=Nt(this._ctx,a)+u+f,g=d+r+v;m=this._yAxis.isFromYAxisZero()?0:this._width-y,Ce(this._ctx,l,m,p-d-r/2,y,g,h),this._ctx.textBaseline="middle",xe(this._ctx,c,m+u,p,a)}}]),i}(ye);var Te=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(t,n,a,r){var o;return _(this,i),(o=e.call(this,t,n))._yAxis=a,o._paneId=r,o}return y(i,[{key:"_draw",value:function(){this._ctx.textBaseline="middle",this._drawTag(),this._drawCrossHairLabel()}},{key:"_drawTag",value:function(){var t=this,e=this._chartStore.tagStore().get(this._paneId);e&&e.forEach((function(e){e.drawText(t._ctx)}))}},{key:"_drawCrossHairLabel",value:function(){var t=this._chartStore.crosshairStore().get();if(t.paneId===this._paneId&&0!==this._chartStore.dataList().length){var e=this._chartStore.styleOptions().crosshair,i=e.horizontal,n=i.text;if(e.show&&i.show&&n.show){var a,r,o=this._yAxis.convertFromPixel(t.y);if(this._yAxis.yAxisType()===B){var s=(this._chartStore.visibleDataList()[0]||{}).data||{};a="".concat(((o-s.close)/s.close*100).toFixed(2),"%")}else{var c=this._chartStore.technicalIndicatorStore().instances(this._paneId),l=0,h=!1;this._yAxis.isCandleYAxis()?l=this._chartStore.pricePrecision():c.forEach((function(t){l=Math.max(t.precision,l),h||(h=t.shouldFormatBigNumber)})),a=q(o,l),h&&(a=tt(a))}var u=n.borderSize,d=Yt(this._ctx,a,n),f=Wt(n);r=this._yAxis.isFromYAxisZero()?0:this._width-d,ke(this._ctx,n.backgroundColor,n.borderColor,u,r,t.y-u-n.paddingTop-n.size/2,d,f,n.borderRadius),xe(this._ctx,n.color,r+u+n.paddingLeft,t.y,a)}}}}]),i}(ye);var Me=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(){return _(this,i),e.apply(this,arguments)}return y(i,[{key:"_createMainView",value:function(t,e){return new Pe(t,e.chartStore,e.yAxis,e.paneId)}},{key:"_createOverlayView",value:function(t,e){return new Te(t,e.chartStore,e.yAxis,e.paneId)}}]),i}(_e),De=function(){function t(e){_(this,t),this._chartStore=e,this._width=0,this._height=0,this._cacheMinValue=0,this._cacheMaxValue=0,this._minValue=0,this._maxValue=0,this._range=0,this._ticks=[],this._initMeasureCanvas()}return y(t,[{key:"_initMeasureCanvas",value:function(){var t=fe("canvas"),e=Vt(t);this._measureCtx=t.getContext("2d"),this._measureCtx.scale(e,e)}},{key:"min",value:function(){return this._minValue}},{key:"max",value:function(){return this._maxValue}},{key:"width",value:function(){return this._width}},{key:"height",value:function(){return this._height}},{key:"setWidth",value:function(t){this._width=t}},{key:"setHeight",value:function(t){this._height=t}},{key:"ticks",value:function(){return this._ticks}},{key:"computeAxis",value:function(t){var e=this._optimalMinMax(this._computeMinMax());return this._minValue=e.min,this._maxValue=e.max,this._range=e.range,!(this._cacheMinValue===e.min&&this._cacheMaxValue===e.max&&!t)&&(this._cacheMinValue=e.min,this._cacheMaxValue=e.max,this._ticks=this._optimalTicks(this._computeTicks()),!0)}},{key:"_computeMinMax",value:function(){}},{key:"_optimalMinMax",value:function(t){}},{key:"_computeTicks",value:function(){var t=[];if(this._range>=0){var e=this._computeInterval(this._range),i=e.interval,n=e.precision,a=et(Math.ceil(this._minValue/i)*i,n),r=et(Math.floor(this._maxValue/i)*i,n),o=0,s=a;if(0!==i)for(;r>=s;)t[o]={v:s.toFixed(n)},++o,s+=i}return t}},{key:"_optimalTicks",value:function(t){}},{key:"_computeInterval",value:function(t){var e,i,n,a,r=(i=Math.floor(it(e=t/8)),n=nt(i),e=(1.5>(a=e/n)?1:2.5>a?2:3.5>a?3:4.5>a?4:5.5>a?5:6.5>a?6:8)*n,-20>i?e:+e.toFixed(0>i?-i:0)),o=function(t){var e=""+t,i=e.indexOf("e");if(i>0){var n=+e.slice(i+1);return 0>n?-n:0}var a=e.indexOf(".");return 0>a?0:e.length-1-a}(r);return{interval:r,precision:o}}}]),t}();var Oe=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(t,n,a){var r;return _(this,i),(r=e.call(this,t))._realRange=0,r._isCandleYAxis=n,r._paneId=a,r}return y(i,[{key:"_computeMinMax",value:function(){var t,e=this,i=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER],n=[],a=!1,r=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER;this._chartStore.technicalIndicatorStore().instances(this._paneId).forEach((function(i){if(a||(a=i.shouldOhlc),s=Math.min(s,i.precision),C(i.minValue)&&(r=Math.min(r,i.minValue)),C(i.maxValue)&&(o=Math.max(o,i.maxValue)),i.styles){t||(t={top:0,bottom:0});var c=i.styles.margin;C(c.top)&&(t.top=Math.max(1>c.top?c.top:c.top/e._height,t.top)),C(c.bottom)&&(t.bottom=Math.max(1>c.bottom?c.bottom:c.bottom/e._height,t.bottom))}n.push({plots:i.plots,result:i.result})}));var c=4;if(this._isCandleYAxis){var l=this._chartStore.pricePrecision();c=s!==Number.MAX_SAFE_INTEGER?Math.min(s,l):l}else s!==Number.MAX_SAFE_INTEGER&&(c=s);var h=this._chartStore.visibleDataList(),u=this._chartStore.styleOptions().candle,d=u.type===j,f=u.area.value,v=this._isCandleYAxis&&!d||!this._isCandleYAxis&&a;return h.forEach((function(t){var a=t.index,r=t.data;v&&(i[0]=Math.min(i[0],r.low),i[1]=Math.max(i[1],r.high)),e._isCandleYAxis&&d&&(i[0]=Math.min(i[0],r[f]),i[1]=Math.max(i[1],r[f])),n.forEach((function(t){var e=t.result[a]||{};t.plots.forEach((function(t){var n=e[t.key];E(n)&&(i[0]=Math.min(i[0],n),i[1]=Math.max(i[1],n))}))}))})),i[0]!==Number.MAX_SAFE_INTEGER&&i[1]!==Number.MIN_SAFE_INTEGER?(i[0]=Math.min(r,i[0]),i[1]=Math.max(o,i[1])):(i[0]=0,i[1]=10),{min:i[0],max:i[1],precision:c,specifyMin:r,specifyMax:o,techGap:t}}},{key:"_optimalMinMax",value:function(t){var e,i,n=t.precision,a=t.specifyMin,r=t.specifyMax,o=t.techGap,s=t.min,c=t.max,l=this.yAxisType();switch(l){case B:var h=(this._chartStore.visibleDataList()[0]||{}).data||{};C(h.close)&&(s=(s-h.close)/h.close*100,c=(c-h.close)/h.close*100),e=.01;break;case F:s=it(s),c=it(c),e=.05*nt(-n);break;default:e=nt(-n)}if(s===c||e>Math.abs(s-c)){var u=a===s,d=r===c;s=u?s:d?s-8*e:s-4*e,c=d?c:u?c+8*e:c+4*e}var f,v=.2;C((i=this._isCandleYAxis?this._chartStore.styleOptions().candle.margin:o?{top:0,bottom:0}:this._chartStore.styleOptions().technicalIndicator.margin).top)&&(f=1>i.top?i.top:i.top/this._height,v=o?Math.max(o.top,f):f);var p,_=.1;C(i.bottom)&&(p=1>i.bottom?i.bottom:i.bottom/this._height,_=o?Math.max(o.bottom,p):p);var m=Math.abs(c-s);return m=Math.abs((c+=m*v)-(s-=m*_)),this._realRange=l===F?Math.abs(nt(c)-nt(s)):m,{min:s,max:c,range:m}}},{key:"_optimalTicks",value:function(t){var e=this,i=[],n=this.yAxisType(),a=this._chartStore.technicalIndicatorStore().instances(this._paneId),r=0,o=!1;this._isCandleYAxis?r=this._chartStore.pricePrecision():a.forEach((function(t){r=Math.max(r,t.precision),o||(o=t.shouldFormatBigNumber)}));var s,c,l=this._chartStore.styleOptions().xAxis.tickText.size;return n===F&&(s=this._computeInterval(this._realRange)),t.forEach((function(t){var a,h=t.v,u=e._innerConvertToPixel(+h);switch(n){case B:a="".concat(q(h,2),"%");break;case F:a=et(nt(h),s.precision),u=e._innerConvertToPixel(it(a)),a=q(a,r);break;default:a=q(h,r),o&&(a=tt(a))}u>l&&e._height-l>u&&(c&&c-u>2*l||!c)&&(i.push({v:a,y:u}),c=u)})),i}},{key:"_innerConvertToPixel",value:function(t){return Math.round((1-(t-this._minValue)/this._range)*this._height)}},{key:"isCandleYAxis",value:function(){return this._isCandleYAxis}},{key:"yAxisType",value:function(){return this._isCandleYAxis?this._chartStore.styleOptions().yAxis.type:R}},{key:"isFromYAxisZero",value:function(){var t=this._chartStore.styleOptions().yAxis;return t.position===O&&t.inside||t.position===L&&!t.inside}},{key:"getSelfWidth",value:function(){var t=this,e=this._chartStore.styleOptions(),i=e.yAxis,n=i.width;if(C(n))return n;var a=0;if(i.show&&(i.axisLine.show&&(a+=i.axisLine.size),i.tickLine.show&&(a+=i.tickLine.length),i.tickText.show)){var r=0;this._measureCtx.font=Ht(i.tickText.size,i.tickText.weight,i.tickText.family),this._ticks.forEach((function(e){r=Math.max(r,Nt(t._measureCtx,e.v))})),a+=i.tickText.paddingLeft+i.tickText.paddingRight+r}var o=e.crosshair,s=0;if(o.show&&o.horizontal.show&&o.horizontal.text.show){var c=this._chartStore.technicalIndicatorStore().instances(this._paneId),l=0,h=!1;c.forEach((function(t){l=Math.max(t.precision,l),h||(h=t.shouldFormatBigNumber)})),this._measureCtx.font=Ht(o.horizontal.text.size,o.horizontal.text.weight,o.horizontal.text.family);var u=2;if(this.yAxisType()!==B)if(this._isCandleYAxis){var d=this._chartStore.pricePrecision(),f=e.technicalIndicator.lastValueMark;u=f.show&&f.text.show?Math.max(l,d):d}else u=l;var v=q(this._maxValue,u);h&&(v=tt(v)),s+=o.horizontal.text.paddingLeft+o.horizontal.text.paddingRight+2*o.horizontal.text.borderSize+Nt(this._measureCtx,v)}return Math.max(a,s)}},{key:"convertFromPixel",value:function(t){var e=(1-t/this._height)*this._range+this._minValue;switch(this.yAxisType()){case B:var i=(this._chartStore.visibleDataList()[0]||{}).data||{};if(C(i.close))return i.close*e/100+i.close;break;case F:return nt(e);default:return e}}},{key:"convertToPixel",value:function(t){var e;switch(this.yAxisType()){case B:var i=(this._chartStore.visibleDataList()[0]||{}).data||{};C(i.close)&&(e=(t-i.close)/i.close*100);break;case F:e=it(t);break;default:e=t}return this._innerConvertToPixel(e)}},{key:"convertToNicePixel",value:function(t){var e=this.convertToPixel(t);return Math.round(Math.max(.05*this._height,Math.min(e,.98*this._height)))}}]),i}(De);var Le=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(t){var n;return _(this,i),n=e.call(this,t),"height"in t&&n.setHeight(t.height),n}return y(i,[{key:"_initBefore",value:function(t){this._id=t.id,this._yAxis=this._createYAxis(t)}},{key:"_createYAxis",value:function(t){return new Oe(t.chartStore,!1,t.id)}},{key:"_createMainWidget",value:function(t,e){return new be({container:t,chartStore:e.chartStore,xAxis:e.xAxis,yAxis:this._yAxis,paneId:e.id})}},{key:"_createYAxisWidget",value:function(t,e){return new Me({container:t,chartStore:e.chartStore,yAxis:this._yAxis,paneId:e.id})}},{key:"setHeight",value:function(t){de(ht(i.prototype),"setHeight",this).call(this,t),this._yAxis.setHeight(t)}},{key:"setWidth",value:function(t,e){de(ht(i.prototype),"setWidth",this).call(this,t,e),this._yAxis.setWidth(e)}},{key:"id",value:function(){return this._id}},{key:"yAxis",value:function(){return this._yAxis}}]),i}(ve);var Re=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(){return _(this,i),e.apply(this,arguments)}return y(i,[{key:"_drawContent",value:function(){var t=this._chartStore.styleOptions().candle;this._drawLastPriceLine(t.priceMark),t.type===j?this._drawArea(t):(this._drawLowHighPrice(t.priceMark,"high","high",Number.MIN_SAFE_INTEGER,[-2,-5],(function(t,e){if(t>e)return t})),this._drawLowHighPrice(t.priceMark,"low","low",Number.MAX_SAFE_INTEGER,[2,5],(function(t,e){if(e>t)return t})),this._drawCandle(t)),this._drawTechs(),this._drawGrid()}},{key:"_drawArea",value:function(t){var e=this,i=[],n=[],a=Number.MAX_SAFE_INTEGER,r=t.area;this._drawGraphics((function(t,o,s,c,l,h){var u=s[r.value];if(C(u)){var d=e._yAxis.convertToPixel(u);if(0===h){var f=t-c;n.push({x:f,y:e._height}),n.push({x:f,y:d}),i.push({x:f,y:d})}i.push({x:t,y:d}),n.push({x:t,y:d}),a=Math.min(a,d)}}),(function(){var t=n.length;if(t>0){var o=n[t-1],s=e._chartStore.timeScaleStore().halfBarSpace(),c=o.x+s;i.push({x:c,y:o.y}),n.push({x:c,y:o.y}),n.push({x:c,y:e._height})}if(i.length>0&&(e._ctx.lineWidth=r.lineSize,e._ctx.strokeStyle=r.lineColor,jt(e._ctx,i)),n.length>0){var l=r.backgroundColor;if(b(l)){var h=e._ctx.createLinearGradient(0,e._height,0,a);try{l.forEach((function(t){h.addColorStop(t.offset,t.color)}))}catch(t){}e._ctx.fillStyle=h}else e._ctx.fillStyle=l;Bt(e._ctx,n)}}))}},{key:"_drawCandle",value:function(t){var e=this;this._drawGraphics((function(i,n,a,r,o){e._drawCandleBar(i,r,o,n,a,t.bar,t.type)}))}},{key:"_drawLowHighPrice",value:function(t,e,i,n,a,r){var o=t[e];if(t.show&&o.show){var s=this._chartStore.visibleDataList(),c=n,l=-1;s.forEach((function(t){var e=t.index,a=r(Z(t.data,i,n),c);a&&(c=a,l=e)}));var h=this._chartStore.pricePrecision(),u=this._yAxis.convertToPixel(c),d=this._xAxis.convertToPixel(l),f=u+a[0];this._ctx.textAlign="left",this._ctx.lineWidth=1,this._ctx.strokeStyle=o.color,this._ctx.fillStyle=o.color,jt(this._ctx,[{x:d-2,y:f+a[0]},{x:d,y:f},{x:d+2,y:f+a[0]}]);var v=f+a[1];jt(this._ctx,[{x:d,y:f},{x:d,y:v},{x:d+5,y:v}]),this._ctx.font=Ht(o.textSize,o.textWeight,o.textFamily);var p=q(c,h);this._ctx.textBaseline="middle",this._ctx.fillText(p,d+5+o.textMargin,v)}}},{key:"_drawLastPriceLine",value:function(t){var e=t.last;if(t.show&&e.show&&e.line.show){var i=this._chartStore.dataList(),n=i[i.length-1];if(n){var a,r=n.close,o=n.open,s=this._yAxis.convertToNicePixel(r);a=r>o?e.upColor:o>r?e.downColor:e.noChangeColor,this._ctx.save(),this._ctx.strokeStyle=a,this._ctx.lineWidth=e.line.size,e.line.style===M&&this._ctx.setLineDash(e.line.dashValue),Ft(this._ctx,s,0,this._width),this._ctx.restore()}}}}]),i}(ge);var Be=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(){return _(this,i),e.apply(this,arguments)}return y(i,[{key:"_drawTooltip",value:function(t,e){var i=this._chartStore.styleOptions(),n=i.candle,a=n.tooltip,r=i.technicalIndicator,o=r.tooltip,s=this._shouldDrawTooltip(t,a),c=this._shouldDrawTooltip(t,o);a.showType===N&&o.showType===N?this._drawCandleTooltipWithRect(t,e,n,s,r,c):a.showType===H?(this._drawCandleTooltipWithStandard(t.kLineData,n,s),o.showType===H?this._drawBatchTechToolTip(t,e,r,s?a.text.size+a.text.marginTop:0,c):this._drawCandleTooltipWithRect(t,e,n,!1,r,c)):(this._drawCandleTooltipWithRect(t,e,n,s,r,!1),this._drawBatchTechToolTip(t,e,r,0,c))}},{key:"_drawCandleTooltipWithStandard",value:function(t,e,i){var n=this;if(i){var a=this._getCandleTooltipData(t,e),r=e.tooltip,o=r.text.marginLeft,s=r.text.marginRight,c=r.text.size,l=r.text.color,h=r.labels;this._ctx.textBaseline="top",this._ctx.font=Ht(c,r.text.weight,r.text.family);var u=o,d=r.text.marginTop;h.forEach((function(t,e){var i=Nt(n._ctx,t);xe(n._ctx,l,u,d,t),u+=i;var c,h,f=a[e]||r.defaultValue;w(f)?(c=f.value||r.defaultValue,h=f.color||l):(h=l,c=f);var v=Nt(n._ctx,c);xe(n._ctx,h,u,d,c),u+=v+o+s}))}}},{key:"_drawCandleTooltipWithRect",value:function(t,e,i,n,a,r){var o=this;if(n||r){var s=i.tooltip,c=s.labels,l=this._getCandleTooltipData(t.kLineData,i),h=s.text.marginLeft,u=s.text.marginRight,d=s.text.marginTop,f=s.text.marginBottom,v=s.text.size,p=s.text.color,_=s.rect,m=_.borderSize,y=_.paddingLeft,g=_.paddingRight,x=_.paddingTop,S=_.paddingBottom,b=_.offsetLeft,k=_.offsetRight,C=0,A=0,I=0;this._ctx.save(),this._ctx.textBaseline="top",n&&(this._ctx.font=Ht(v,s.text.weight,s.text.family),c.forEach((function(t,e){var i,n=l[e];i=w(n)?n.value||s.defaultValue:n;var a="".concat(t).concat(i),r=Nt(o._ctx,a)+h+u;C=Math.max(C,r)})),I+=(f+d+v)*c.length);var P=a.tooltip,T=P.text.marginLeft,M=P.text.marginRight,D=P.text.marginTop,O=P.text.marginBottom,L=P.text.size,R=[];if(e.forEach((function(e){R.push(o._getTechTooltipData(t,e,a))})),r&&(this._ctx.font=Ht(L,P.text.weight,P.text.family),R.forEach((function(t){t.values.forEach((function(t){var e=t.title,i=t.value;if(E(e)){var n="".concat(e).concat(i),a=Nt(o._ctx,n)+T+M;C=Math.max(C,a),I+=D+O+L}}))}))),0!==(A+=C)&&0!==I){var B;A+=2*m+y+g;var F=_.offsetTop,z=_.borderRadius;Ce(this._ctx,_.backgroundColor,B=this._width/2>t.realX?this._width-k-A:b,F,A,I+=2*m+x+S,z),we(this._ctx,_.borderColor,m,B,F,A,I,z);var j=B+m+y+h,V=F+m+x;if(n&&(this._ctx.font=Ht(v,s.text.weight,s.text.family),c.forEach((function(t,e){V+=d,o._ctx.textAlign="left",xe(o._ctx,p,j,V,t);var i,n,a=l[e];w(a)?(n=a.color||p,i=a.value||s.defaultValue):(n=p,i=a||s.defaultValue),o._ctx.textAlign="right",xe(o._ctx,n,B+A-m-u-g,V,i),V+=v+f}))),r){var N=B+m+y+T;this._ctx.font=Ht(L,P.text.weight,P.text.family),R.forEach((function(t){t.values.forEach((function(t){V+=D,o._ctx.textAlign="left",o._ctx.fillStyle=t.color||P.text.color,o._ctx.fillText(t.title,N,V),o._ctx.textAlign="right",o._ctx.fillText(t.value,B+A-m-M-g,V),V+=L+O}))}))}this._ctx.restore()}}}},{key:"_getCandleTooltipData",value:function(t,e){var i=this,n=e.tooltip.values,a=[];if(n)k(n)?a=n(t,e)||[]:b(n)&&(a=n);else{var r=this._chartStore.pricePrecision(),o=this._chartStore.volumePrecision();(a=[Z(t,"timestamp"),Z(t,"open"),Z(t,"close"),Z(t,"high"),Z(t,"low"),Z(t,"volume")]).forEach((function(t,e){switch(e){case 0:a[e]=K(i._chartStore.timeScaleStore().dateTimeFormat(),t,"YYYY-MM-DD hh:mm");break;case a.length-1:a[e]=tt(q(t,o));break;default:a[e]=q(t,r)}}))}return a}}]),i}(Se);var Fe=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(){return _(this,i),e.apply(this,arguments)}return y(i,[{key:"_createMainView",value:function(t,e){return new Re(t,e.chartStore,e.xAxis,e.yAxis,e.paneId)}},{key:"_createOverlayView",value:function(t,e){return new Be(t,e.chartStore,e.xAxis,e.yAxis,e.paneId)}}]),i}(be);var ze=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(){return _(this,i),e.apply(this,arguments)}return y(i,[{key:"_createYAxis",value:function(t){return new Oe(t.chartStore,!0,t.id)}},{key:"_createMainWidget",value:function(t,e){return new Fe({container:t,chartStore:e.chartStore,xAxis:e.xAxis,yAxis:this._yAxis,paneId:e.id})}}]),i}(Le);var je=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(t,n,a){var r;return _(this,i),(r=e.call(this,t,n))._xAxis=a,r}return y(i,[{key:"_draw",value:function(){var t=this._chartStore.styleOptions().xAxis;t.show&&(this._drawAxisLine(t),this._drawTickLines(t),this._drawTickLabels(t))}},{key:"_drawAxisLine",value:function(t){var e=t.axisLine;e.show&&(this._ctx.strokeStyle=e.color,this._ctx.lineWidth=e.size,Ft(this._ctx,0,0,this._width))}},{key:"_drawTickLines",value:function(t){var e=this,i=t.tickLine;if(i.show){this._ctx.lineWidth=i.size,this._ctx.strokeStyle=i.color;var n=t.axisLine.show?t.axisLine.size:0,a=n+i.length;this._xAxis.ticks().forEach((function(t){zt(e._ctx,t.x,n,a)}))}}},{key:"_drawTickLabels",value:function(t){var e=t.tickText;if(e.show){var i=t.tickLine;this._ctx.textBaseline="top",this._ctx.font=Ht(e.size,e.weight,e.family),this._ctx.textAlign="center",this._ctx.fillStyle=e.color;var n=e.paddingTop;t.axisLine.show&&(n+=t.axisLine.size),i.show&&(n+=i.length);for(var a=this._xAxis.ticks(),r=a.length,o=0;r>o;o++)this._ctx.fillText(a[o].v,a[o].x,n)}}}]),i}(ye);var Ve=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(t,n,a){var r;return _(this,i),(r=e.call(this,t,n))._xAxis=a,r}return y(i,[{key:"_draw",value:function(){this._drawCrosshairLabel()}},{key:"_drawCrosshairLabel",value:function(){var t=this._chartStore.crosshairStore().get();if(t.paneId){var e=this._chartStore.styleOptions().crosshair,i=e.vertical,n=i.text;if(e.show&&i.show&&n.show&&t.dataIndex===t.realDataIndex){var a=t.kLineData.timestamp,r=K(this._chartStore.timeScaleStore().dateTimeFormat(),a,"YYYY-MM-DD hh:mm"),o=n.paddingLeft,s=n.paddingRight,c=n.paddingTop,l=n.borderSize,h=Yt(this._ctx,r,n),u=Wt(n),d=h-2*l-o-s,f=t.realX-d/2;o+l>f?f=o+l:f>this._width-d-l-s&&(f=this._width-d-l-s),ke(this._ctx,n.backgroundColor,n.borderColor,l,f-l-o,0,h,u,n.borderRadius),this._ctx.textBaseline="top",xe(this._ctx,n.color,f,l+c,r)}}}}]),i}(ye);var Ne=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(){return _(this,i),e.apply(this,arguments)}return y(i,[{key:"_createMainView",value:function(t,e){return new je(t,e.chartStore,e.xAxis)}},{key:"_createOverlayView",value:function(t,e){return new Ve(t,e.chartStore,e.xAxis)}}]),i}(_e);var He=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(){return _(this,i),e.apply(this,arguments)}return y(i,[{key:"_computeMinMax",value:function(){return{min:this._chartStore.timeScaleStore().from(),max:this._chartStore.timeScaleStore().to()-1}}},{key:"_optimalMinMax",value:function(t){var e=t.min,i=t.max;return{min:e,max:i,range:i-e+1}}},{key:"_optimalTicks",value:function(t){var e=[],i=t.length,n=this._chartStore.dataList();if(i>0){var a=this._chartStore.timeScaleStore().dateTimeFormat(),r=this._chartStore.styleOptions().xAxis.tickText;this._measureCtx.font=Ht(r.size,r.weight,r.family);var o=Nt(this._measureCtx,"00-00 00:00"),s=this.convertToPixel(parseInt(t[0].v,10)),c=1;if(i>1){var l=this.convertToPixel(parseInt(t[1].v,10)),h=Math.abs(l-s);o>h&&(c=Math.ceil(o/h))}for(var u=0;i>u;u+=c){var d=parseInt(t[u].v,10),f=n[d].timestamp,v=K(a,f,"hh:mm");0!==u&&(v=this._optimalTickLabel(a,f,n[parseInt(t[u-c].v,10)].timestamp)||v);var p=this.convertToPixel(d);e.push({v:v,x:p,oV:f})}if(1===e.length)e[0].v=K(a,e[0].oV,"YYYY-MM-DD hh:mm");else{var _=e[0].oV,m=e[1].oV;if(e[2]){var y=e[2].v;/^[0-9]{2}-[0-9]{2}$/.test(y)?e[0].v=K(a,_,"MM-DD"):/^[0-9]{4}-[0-9]{2}$/.test(y)?e[0].v=K(a,_,"YYYY-MM"):/^[0-9]{4}$/.test(y)&&(e[0].v=K(a,_,"YYYY"))}else e[0].v=this._optimalTickLabel(a,_,m)||e[0].v}}return e}},{key:"_optimalTickLabel",value:function(t,e,i){var n=K(t,e,"YYYY"),a=K(t,e,"YYYY-MM"),r=K(t,e,"MM-DD");return n!==K(t,i,"YYYY")?n:a!==K(t,i,"YYYY-MM")?a:r!==K(t,i,"MM-DD")?r:null}},{key:"getSelfHeight",value:function(){var t=this._chartStore.styleOptions(),e=t.xAxis,i=e.height;if(C(i))return i;var n=t.crosshair,a=0;e.show&&(e.axisLine.show&&(a+=e.axisLine.size),e.tickLine.show&&(a+=e.tickLine.length),e.tickText.show&&(a+=e.tickText.paddingTop+e.tickText.paddingBottom+e.tickText.size));var r=0;return n.show&&n.vertical.show&&n.vertical.text.show&&(r+=n.vertical.text.paddingTop+n.vertical.text.paddingBottom+2*n.vertical.text.borderSize+n.vertical.text.size),Math.max(a,r)}},{key:"convertFromPixel",value:function(t){return this._chartStore.timeScaleStore().coordinateToDataIndex(t)}},{key:"convertToPixel",value:function(t){return this._chartStore.timeScaleStore().dataIndexToCoordinate(t)}}]),i}(De);var Ye=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(){return _(this,i),e.apply(this,arguments)}return y(i,[{key:"_initBefore",value:function(){this._xAxis=new He(this._chartStore)}},{key:"_createMainWidget",value:function(t,e){return new Ne({container:t,chartStore:e.chartStore,xAxis:this._xAxis})}},{key:"xAxis",value:function(){return this._xAxis}},{key:"setWidth",value:function(t,e){de(ht(i.prototype),"setWidth",this).call(this,t,e),this._xAxis.setWidth(t)}},{key:"setHeight",value:function(t){de(ht(i.prototype),"setHeight",this).call(this,t),this._xAxis.setHeight(t)}}]),i}(ve);function We(t){return"touch"===t.type}function Ue(t){return"mouse"===t.type}function Ge(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Je(t){for(var e=1;arguments.length>e;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ge(Object(i),!0).forEach((function(e){St(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ge(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Qe(t){return t.getBoundingClientRect()||{left:0,top:0}}function Xe(t){return!!t.touches}function $e(t){t.cancelable&&t.preventDefault()}function Ze(t,e){var i=t.clientX-e.clientX,n=t.clientY-e.clientY;return Math.sqrt(i*i+n*n)}var Ke=function(){function t(e,i,n){_(this,t),this._target=e,this._handler=i,this._options=n,this._clickCount=0,this._clickTimeoutId=null,this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartPosition=null,this._moveExceededManhattanDistance=!1,this._cancelClick=!1,this._unsubscribeOutsideEvents=null,this._unsubscribeMousemove=null,this._unsubscribeRoot=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventDragProcess=!1,this._mousePressed=!1,this._init()}return y(t,[{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=Je(Je({},this.options),t)}},{key:"destroy",value:function(){null!==this._unsubscribeOutsideEvents&&(this._unsubscribeOutsideEvents(),this._unsubscribeOutsideEvents=null),null!==this._unsubscribeMousemove&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),null!==this._unsubscribeRoot&&(this._unsubscribeRoot(),this._unsubscribeRoot=null),this._clearLongTapTimeout(),this._resetClickTimeout()}},{key:"_mouseEnterHandler",value:function(t){var e=this;this._unsubscribeMousemove&&this._unsubscribeMousemove();var i=this._mouseMoveHandler.bind(this),n=this._mouseWheelHandler.bind(this);this._unsubscribeMousemove=function(){e._target.removeEventListener("mousemove",i),e._target.removeEventListener("wheel",n)},this._target.addEventListener("mousemove",i),this._target.addEventListener("wheel",n,{passive:!1}),Xe(t)&&this._mouseMoveHandler(t);var a=this._makeCompatEvent(t);this._processEvent(a,this._handler.mouseEnterEvent)}},{key:"_resetClickTimeout",value:function(){null!==this._clickTimeoutId&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null}},{key:"_mouseMoveHandler",value:function(t){if(!this._mousePressed||Xe(t)){var e=this._makeCompatEvent(t);this._processEvent(e,this._handler.mouseMoveEvent)}}},{key:"_mouseWheelHandler",value:function(t){var e=this._makeCompatEvent(t);t.localX=e.localX,t.localY=e.localY,this._processEvent(t,this._handler.mouseWheelEvent)}},{key:"_mouseMoveWithDownHandler",value:function(t){if((!("button"in t)||0===t.button)&&null===this._startPinchMiddleCoordinate){var e=Xe(t);if(!this._preventDragProcess||!e){this._pinchPrevented=!0;var i=this._makeCompatEvent(t),n=this._mouseMoveStartPosition,a=Math.abs(n.x-i.pageX),r=Math.abs(n.y-i.pageY),o=a+r>5;if(o||!e){if(o&&!this._moveExceededManhattanDistance&&e){var s=.5*a;r>=s&&!this._options.treatVertTouchDragAsPageScroll||s>r&&!this._options.treatHorzTouchDragAsPageScroll||(this._preventDragProcess=!0)}o&&(this._moveExceededManhattanDistance=!0,this._cancelClick=!0,e&&this._clearLongTapTimeout()),this._preventDragProcess||(this._processEvent(i,this._handler.pressedMouseMoveEvent),e&&$e(t))}}}}},{key:"_mouseUpHandler",value:function(t){if(!("button"in t)||0===t.button){var e=this._makeCompatEvent(t);this._clearLongTapTimeout(),this._mouseMoveStartPosition=null,this._mousePressed=!1,this._unsubscribeRoot&&(this._unsubscribeRoot(),this._unsubscribeRoot=null),Xe(t)&&this._mouseLeaveHandler(t),this._processEvent(e,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId&&this._clickCount>1?(this._processEvent(e,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()):this._cancelClick||this._processEvent(e,this._handler.mouseClickEvent),Xe(t)&&($e(t),this._mouseLeaveHandler(t),0===t.touches.length&&(this._longTapActive=!1))}}},{key:"_clearLongTapTimeout",value:function(){null!==this._longTapTimeoutId&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)}},{key:"_mouseDownHandler",value:function(t){if(!("button"in t)||0===t.button||2===t.button){var e=this._makeCompatEvent(t);if("button"in t&&2===t.button)this._processEvent(e,this._handler.mouseRightDownEvent);else{this._cancelClick=!1,this._moveExceededManhattanDistance=!1,this._preventDragProcess=!1,Xe(t)&&this._mouseEnterHandler(t),this._mouseMoveStartPosition={x:e.pageX,y:e.pageY},this._unsubscribeRoot&&(this._unsubscribeRoot(),this._unsubscribeRoot=null);var i=this._mouseMoveWithDownHandler.bind(this),n=this._mouseUpHandler.bind(this),a=this._target.ownerDocument.documentElement;this._unsubscribeRoot=function(){a.removeEventListener("touchmove",i),a.removeEventListener("touchend",n),a.removeEventListener("mousemove",i),a.removeEventListener("mouseup",n)},a.addEventListener("touchmove",i,{passive:!1}),a.addEventListener("touchend",n,{passive:!1}),this._clearLongTapTimeout(),Xe(t)&&1===t.touches.length?this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,t),600):(a.addEventListener("mousemove",i),a.addEventListener("mouseup",n)),this._mousePressed=!0,this._processEvent(e,this._handler.mouseDownEvent),this._clickTimeoutId||(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500))}}}},{key:"_init",value:function(){var t=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));var e,i=this._target.ownerDocument,n=function(e){t._handler.mouseDownOutsideEvent&&(e.target&&t._target.contains(e.target)||t._handler.mouseDownOutsideEvent())};this._unsubscribeOutsideEvents=function(){i.removeEventListener("mousedown",n),i.removeEventListener("touchstart",n)},i.addEventListener("mousedown",n),i.addEventListener("touchstart",n,{passive:!0}),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._mouseDownHandler.bind(this),{passive:!0}),e="ontouchstart"in window||!!(window.DocumentTouch&&document instanceof window.DocumentTouch),"onorientationchange"in window&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints||e)||this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",(function(){}),{passive:!1})}},{key:"_initPinch",value:function(){var t=this;void 0===this._handler.pinchStartEvent&&void 0===this._handler.pinchEvent&&void 0===this._handler.pinchEndEvent||(this._target.addEventListener("touchstart",(function(e){return t._checkPinchState(e.touches)}),{passive:!0}),this._target.addEventListener("touchmove",(function(e){if(2===e.touches.length&&null!==t._startPinchMiddleCoordinate&&void 0!==t._handler.pinchEvent){var i=Ze(e.touches[0],e.touches[1]);t._handler.pinchEvent(t._startPinchMiddleCoordinate,i/t._startPinchDistance),$e(e)}}),{passive:!1}),this._target.addEventListener("touchend",(function(e){t._checkPinchState(e.touches)})))}},{key:"_checkPinchState",value:function(t){1===t.length&&(this._pinchPrevented=!1),2!==t.length||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(t)}},{key:"_startPinch",value:function(t){var e=Qe(this._target);this._startPinchMiddleCoordinate={x:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,y:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this._startPinchDistance=Ze(t[0],t[1]),void 0!==this._handler.pinchStartEvent&&this._handler.pinchStartEvent(),this._clearLongTapTimeout()}},{key:"_stopPinch",value:function(){null!==this._startPinchMiddleCoordinate&&(this._startPinchMiddleCoordinate=null,void 0!==this._handler.pinchEndEvent&&this._handler.pinchEndEvent())}},{key:"_mouseLeaveHandler",value:function(t){this._unsubscribeMousemove&&this._unsubscribeMousemove();var e=this._makeCompatEvent(t);this._processEvent(e,this._handler.mouseLeaveEvent)}},{key:"_longTapHandler",value:function(t){var e=this._makeCompatEvent(t);this._processEvent(e,this._handler.longTapEvent),this._cancelClick=!0,this._longTapActive=!0}},{key:"_processEvent",value:function(t,e){e&&e.call(this._handler,t)}},{key:"_makeCompatEvent",value:function(t){var e;e="touches"in t&&t.touches.length?t.touches[0]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0]:t;var i=Qe(this._target);return{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY,localX:e.clientX-i.left,localY:e.clientY-i.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,type:t.type.startsWith("mouse")?"mouse":"touch",target:e.target,view:t.view}}}]),t}(),qe=function(){function t(e,i,n,a,r,o){_(this,t),this._chartStore=i,this._topPaneId=n,this._bottomPaneId=a,this._dragEnabled=r,this._width=0,this._offsetLeft=0,this._dragEventHandler=o,this._dragFlag=!1,this._initElement(e),this._initEvent(r)}return y(t,[{key:"_initElement",value:function(t){this._container=t,this._wrapper=fe("div",{margin:"0",padding:"0",position:"relative",boxSizing:"border-box"}),this._element=fe("div",{width:"100%",height:"7px",margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box"}),this._wrapper.appendChild(this._element);var e=t.lastChild;e?t.insertBefore(this._wrapper,e):t.appendChild(this._wrapper)}},{key:"_initEvent",value:function(t){t&&(this._element.style.cursor="ns-resize",this._dragEvent=new Ke(this._element,{mouseDownEvent:this._mouseDownEvent.bind(this),mouseUpEvent:this._mouseUpEvent.bind(this),pressedMouseMoveEvent:this._pressedMouseMoveEvent.bind(this),mouseEnterEvent:this._mouseEnterEvent.bind(this),mouseLeaveEvent:this._mouseLeaveEvent.bind(this)},{treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!0}))}},{key:"_mouseDownEvent",value:function(t){this._dragFlag=!0,this._startY=t.pageY,this._dragEventHandler.startDrag(this._topPaneId,this._bottomPaneId)}},{key:"_mouseUpEvent",value:function(){this._dragFlag=!1,this._chartStore.setDragPaneFlag(!1)}},{key:"_pressedMouseMoveEvent",value:function(t){this._dragEventHandler.drag(t.pageY-this._startY,this._topPaneId,this._bottomPaneId),this._chartStore.setDragPaneFlag(!0),this._chartStore.crosshairStore().set()}},{key:"_mouseEnterEvent",value:function(){var t=this._chartStore.styleOptions().separator;this._element.style.background=t.activeBackgroundColor,this._chartStore.crosshairStore().set()}},{key:"_mouseLeaveEvent",value:function(){this._dragFlag||(this._element.style.background=null,this._chartStore.setDragPaneFlag(!1))}},{key:"height",value:function(){return this._wrapper.offsetHeight}},{key:"setSize",value:function(t,e){this._offsetLeft=t,this._width=e,this.invalidate()}},{key:"setDragEnabled",value:function(t){t!==this._dragEnabled&&(this._dragEnabled=t,t?!this._dragEvent&&this._initEvent(t):(this._element.style.cursor="default",this._dragEvent&&this._dragEvent.destroy(),this._dragEvent=null))}},{key:"topPaneId",value:function(){return this._topPaneId}},{key:"bottomPaneId",value:function(){return this._bottomPaneId}},{key:"updatePaneId",value:function(t,e){E(t)&&(this._topPaneId=t),E(e)&&(this._bottomPaneId=e)}},{key:"invalidate",value:function(){var t=this._chartStore.styleOptions().separator;this._element.style.top="".concat(-Math.floor((7-t.size)/2),"px"),this._wrapper.style.backgroundColor=t.color,this._wrapper.style.height="".concat(t.size,"px"),this._wrapper.style.marginLeft="".concat(t.fill?0:this._offsetLeft,"px"),this._wrapper.style.width=t.fill?"100%":"".concat(this._width,"px")}},{key:"getImage",value:function(){var t=this._chartStore.styleOptions().separator,e=this._wrapper.offsetWidth,i=t.size,n=fe("canvas",{width:"".concat(e,"px"),height:"".concat(i,"px"),boxSizing:"border-box"}),a=n.getContext("2d"),r=Vt(n);return n.width=e*r,n.height=i*r,a.scale(r,r),a.fillStyle=t.color,a.fillRect(this._offsetLeft,0,e,i),n}},{key:"destroy",value:function(){this._dragEvent&&this._dragEvent.destroy(),this._container.removeChild(this._wrapper)}}]),t}(),ti=y((function t(e){_(this,t),this._chartStore=e}));var ei=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(t){var n;return _(this,i),(n=e.call(this,t))._startScrollCoordinate=null,n._touchCoordinate=null,n._touchCancelCrosshair=!1,n._touchZoomed=!1,n._pinchScale=1,n}return y(i,[{key:"pinchStartEvent",value:function(){this._pinchScale=1,this._touchZoomed=!0}},{key:"pinchEvent",value:function(t,e){var i=5*(e-this._pinchScale);this._pinchScale=e,this._chartStore.timeScaleStore().zoom(i,t)}},{key:"mouseUpEvent",value:function(){this._startScrollCoordinate=null}},{key:"mouseLeaveEvent",value:function(t){this._startScrollCoordinate=null,Ue(t)&&this._chartStore.crosshairStore().set()}},{key:"mouseMoveEvent",value:function(t){Ue(t)&&this._chartStore.crosshairStore().set({x:t.localX,y:t.paneY,paneId:t.paneId})}},{key:"mouseWheelEvent",value:function(t){if(Math.abs(t.deltaX)>Math.abs(t.deltaY)){if(t.cancelable&&t.preventDefault(),0===Math.abs(t.deltaX))return;this._chartStore.timeScaleStore().startScroll(),this._chartStore.timeScaleStore().scroll(-t.deltaX)}else{var e=-t.deltaY/100;if(0===e)return;switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:e*=120;break;case t.DOM_DELTA_LINE:e*=32}if(0!==e){var i=Math.sign(e)*Math.min(1,Math.abs(e));this._chartStore.timeScaleStore().zoom(i,{x:t.localX,y:t.localY})}}}},{key:"mouseClickEvent",value:function(t){We(t)&&(this._touchCoordinate||this._touchCancelCrosshair||this._touchZoomed||(this._touchCoordinate={x:t.localX,y:t.localY},this._chartStore.crosshairStore().set({x:t.localX,y:t.paneY,paneId:t.paneId})))}},{key:"mouseDownEvent",value:function(t){if(this._startScrollCoordinate={x:t.localX,y:t.localY},this._chartStore.timeScaleStore().startScroll(),We(t))if(this._touchZoomed=!1,this._touchCoordinate){var e=t.localX-this._touchCoordinate.x,i=t.localY-this._touchCoordinate.y;10>Math.sqrt(e*e+i*i)?(this._touchCoordinate={x:t.localX,y:t.localY},this._chartStore.crosshairStore().set({x:t.localX,y:t.paneY,paneId:t.paneId})):(this._touchCancelCrosshair=!0,this._touchCoordinate=null,this._chartStore.crosshairStore().set())}else this._touchCancelCrosshair=!1}},{key:"pressedMouseMoveEvent",value:function(t){var e={x:t.localX,y:t.paneY,paneId:t.paneId};if(We(t)){if(this._touchCoordinate)return this._touchCoordinate={x:t.localX,y:t.localY},void this._chartStore.crosshairStore().set(e);e=null}if(this._startScrollCoordinate){var i=t.localX-this._startScrollCoordinate.x;this._chartStore.timeScaleStore().scroll(i,e)}}},{key:"longTapEvent",value:function(t){We(t)&&(this._touchCoordinate={x:t.localX,y:t.localY},this._chartStore.crosshairStore().set({x:t.localX,y:t.paneY,paneId:t.paneId}))}}]),i}(ti);function ii(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function ni(t){for(var e=1;arguments.length>e;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ii(Object(i),!0).forEach((function(e){St(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ii(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ai(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return ri(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ri(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,a=function(){};return{s:a,n:function(){return t.length>n?{done:!1,value:t[n++]}:{done:!0}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function ri(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);e>i;i++)n[i]=t[i];return n}var oi=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(t,n){var a;return _(this,i),(a=e.call(this,t))._yAxis=n,a}return y(i,[{key:"_performOverlayMouseHover",value:function(t,e,i,n){var a;if(t){var r,o=ai(t);try{for(o.s();!(r=o.n()).done;)if(a=r.value.checkEventCoordinateOn(i))break}catch(t){o.e(t)}finally{o.f()}a&&e.id===a.id||(e.id&&e.instance&&Ue(n)&&e.instance.onMouseLeave({id:e.id,points:e.instance.points(),event:n}),a&&a.id!==e.id&&a.instance&&Ue(n)&&a.instance.onMouseEnter({id:a.id,points:a.instance.points(),event:n}))}return a}},{key:"mouseUpEvent",value:function(){this._chartStore.shapeStore().updatePressedInstance()}},{key:"mouseMoveEvent",value:function(t){if(this._waitingForMouseMove)return!1;this._waitingForMouseMove=!0;var e,i,n,a={x:t.localX,y:t.paneY},r=this._chartStore.shapeStore().progressInstance(),o=r.paneId,s=r.instance;if(s&&s.isDrawing())t.paneId&&(s.isStart()&&this._chartStore.shapeStore().updateProgressInstance(this._yAxis(t.paneId),t.paneId),o===t.paneId&&s.mouseMoveForDrawing(a,t),e=s.checkEventCoordinateOn(a)),i={id:"",element:Jt,elementIndex:-1};else{var c=this._chartStore.annotationStore().get(t.paneId),l=this._chartStore.shapeStore().instances(t.paneId),h=this._chartStore.shapeStore().mouseOperate().hover,u=this._chartStore.annotationStore().mouseOperate();e=this._performOverlayMouseHover(l,h,a,t),n=this._performOverlayMouseHover(c,u,a,t)}this._chartStore.shapeStore().setMouseOperate({hover:e||{id:"",element:Jt,elementIndex:-1},click:i}),this._chartStore.annotationStore().setMouseOperate(n||{id:""}),this._waitingForMouseMove=!1}},{key:"mouseDownEvent",value:function(t){var e,i={x:t.localX,y:t.paneY},n=this._chartStore.shapeStore().progressInstance(),a=n.instance,r=n.paneId,o={id:"",element:Jt,elementIndex:-1};if(a&&a.isDrawing()&&r===t.paneId)a.mouseLeftButtonDownForDrawing(),e=a.checkEventCoordinateOn(i);else{var s,c=ai(this._chartStore.shapeStore().instances(t.paneId));try{for(c.s();!(s=c.n()).done;){var l=s.value;if(e=l.checkEventCoordinateOn(i)){this._chartStore.shapeStore().updatePressedInstance(l,t.paneId,e.element),e.element===Gt?o=ni({},e):l.startPressedOtherMove(i),l.onClick({id:e.id,points:l.points(),event:t});break}}}catch(t){c.e(t)}finally{c.f()}var h=this._chartStore.annotationStore().get(t.paneId);if(h){var u,d=ai(h);try{for(d.s();!(u=d.n()).done;){var f=u.value,v=f.checkEventCoordinateOn(i);if(v){f.onClick({id:v.id,points:f.points(),event:t});break}}}catch(t){d.e(t)}finally{d.f()}}}this._chartStore.shapeStore().setMouseOperate({hover:o,click:e||{id:"",element:Jt,elementIndex:-1}})&&this._chartStore.invalidate(1)}},{key:"mouseRightDownEvent",value:function(t){var e,i=this._chartStore.shapeStore().progressInstance().instance;e=i||this._chartStore.shapeStore().instances(t.paneId).find((function(e){return e.checkEventCoordinateOn({x:t.localX,y:t.paneY})})),e&&!e.onRightClick({id:e.id(),points:e.points(),event:t})&&this._chartStore.shapeStore().removeInstance(e.id());var n=this._chartStore.annotationStore().get(t.paneId);if(n){var a=n.find((function(e){return e.checkEventCoordinateOn({x:t.localX,y:t.paneY})}));a&&a.onRightClick({id:a.id(),points:a.points(),event:t})}}},{key:"pressedMouseMoveEvent",value:function(t){var e=this._chartStore.shapeStore().pressedInstance(),i=e.instance;if(i&&e.paneId===t.paneId){var n={x:t.localX,y:t.paneY};e.element===Gt?i.mousePressedPointMove(n,t):i.mousePressedOtherMove(n,t),this._chartStore.crosshairStore().set({x:t.localX,y:t.paneY,paneId:t.paneId})}}}]),i}(ti);var si=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(){return _(this,i),e.apply(this,arguments)}return y(i,[{key:"keyBoardDownEvent",value:function(t){if(t.shiftKey)switch(t.code){case"Equal":this._chartStore.timeScaleStore().zoom(.5);break;case"Minus":this._chartStore.timeScaleStore().zoom(-.5);break;case"ArrowLeft":this._chartStore.timeScaleStore().startScroll(),this._chartStore.timeScaleStore().scroll(-3*this._chartStore.timeScaleStore().dataSpace());break;case"ArrowRight":this._chartStore.timeScaleStore().startScroll(),this._chartStore.timeScaleStore().scroll(3*this._chartStore.timeScaleStore().dataSpace())}}}]),i}(ti),ci=function(){function t(e,i,n){_(this,t),this._target=e,this._chartStore=i,this._chartContentLeftRight={},this._chartContentTopBottom={},this._paneContentSize={},this._event=new Ke(this._target,{pinchStartEvent:this._pinchStartEvent.bind(this),pinchEvent:this._pinchEvent.bind(this),mouseUpEvent:this._mouseUpEvent.bind(this),mouseClickEvent:this._mouseClickEvent.bind(this),mouseDownEvent:this._mouseDownEvent.bind(this),mouseRightDownEvent:this._mouseRightDownEvent.bind(this),mouseLeaveEvent:this._mouseLeaveEvent.bind(this),mouseMoveEvent:this._mouseMoveEvent.bind(this),mouseWheelEvent:this._mouseWheelEvent.bind(this),pressedMouseMoveEvent:this._pressedMouseMoveEvent.bind(this),longTapEvent:this._longTapEvent.bind(this)},{treatVertTouchDragAsPageScroll:!0,treatHorzTouchDragAsPageScroll:!1}),this._boundKeyBoardDownEvent=this._keyBoardDownEvent.bind(this),this._target.addEventListener("keydown",this._boundKeyBoardDownEvent),this._boundContextMenuEvent=function(t){t.preventDefault()},this._target.addEventListener("contextmenu",this._boundContextMenuEvent,!1),this._zoomScrollEventHandler=new ei(i),this._overlayEventHandler=new oi(i,n),this._keyBoardEventHandler=new si(i)}return y(t,[{key:"_keyBoardDownEvent",value:function(t){this._keyBoardEventHandler.keyBoardDownEvent(t)}},{key:"_pinchStartEvent",value:function(){this._zoomScrollEventHandler.pinchStartEvent()}},{key:"_pinchEvent",value:function(t,e){this._zoomScrollEventHandler.pinchEvent(t,e)}},{key:"_mouseUpEvent",value:function(t){this._checkEventInChartContent(t)&&(this._target.style.cursor="crosshair"),this._zoomScrollEventHandler.mouseUpEvent(t),this._shouldPerformOverlayEvent()&&this._overlayEventHandler.mouseUpEvent(t)}},{key:"_mouseLeaveEvent",value:function(t){this._zoomScrollEventHandler.mouseLeaveEvent(t)}},{key:"_mouseMoveEvent",value:function(t){if(t.target instanceof HTMLCanvasElement)if(this._checkEventInChartContent(t)){this._target.style.cursor="crosshair";var e=this._compatChartEvent(t,!0);this._shouldPerformOverlayEvent()&&this._overlayEventHandler.mouseMoveEvent(e),this._chartStore.dragPaneFlag()||this._zoomScrollEventHandler.mouseMoveEvent(e)}else this._target.style.cursor="default",this._zoomScrollEventHandler.mouseLeaveEvent(t);else this._target.style.cursor="default",this._chartStore.crosshairStore().set()}},{key:"_mouseWheelEvent",value:function(t){this._checkZoomScroll()&&this._checkEventInChartContent(t)&&this._zoomScrollEventHandler.mouseWheelEvent(this._compatChartEvent(t))}},{key:"_mouseClickEvent",value:function(t){this._checkZoomScroll()&&this._checkEventInChartContent(t)&&(this._zoomScrollEventHandler.mouseClickEvent(this._compatChartEvent(t,!0)),this._modifyEventOptions(t))}},{key:"_mouseDownEvent",value:function(t){if(this._checkEventInChartContent(t)){this._target.style.cursor="pointer";var e=this._compatChartEvent(t,!0);this._shouldPerformOverlayEvent()&&this._overlayEventHandler.mouseDownEvent(e),this._checkZoomScroll()&&(this._zoomScrollEventHandler.mouseDownEvent(e),this._modifyEventOptions(t))}}},{key:"_mouseRightDownEvent",value:function(t){this._shouldPerformOverlayEvent()&&this._checkEventInChartContent(t)&&this._overlayEventHandler.mouseRightDownEvent(this._compatChartEvent(t,!0))}},{key:"_pressedMouseMoveEvent",value:function(t){if(this._checkEventInChartContent(t)){var e=this._compatChartEvent(t,!0);this._checkZoomScroll()?(this._zoomScrollEventHandler.pressedMouseMoveEvent(e),this._modifyEventOptions(t)):this._overlayEventHandler.pressedMouseMoveEvent(e)}}},{key:"_longTapEvent",value:function(t){this._checkZoomScroll()&&this._checkEventInChartContent(t)&&(this._zoomScrollEventHandler.longTapEvent(this._compatChartEvent(t,!0)),this._modifyEventOptions(t))}},{key:"_checkZoomScroll",value:function(){return!this._chartStore.dragPaneFlag()&&!this._chartStore.shapeStore().isPressed()&&!this._chartStore.shapeStore().isDrawing()}},{key:"_shouldPerformOverlayEvent",value:function(){return!this._chartStore.shapeStore().isEmpty()||!this._chartStore.annotationStore().isEmpty()}},{key:"_modifyEventOptions",value:function(t){We(t)&&this._chartStore.crosshairStore().get().paneId?this._event.setOptions({treatVertTouchDragAsPageScroll:!1}):this._event.setOptions({treatVertTouchDragAsPageScroll:!0})}},{key:"_compatChartEvent",value:function(t,e){if(e)for(var i in this._paneContentSize)if(Object.prototype.hasOwnProperty.call(this._paneContentSize,i)){var n=this._paneContentSize[i];if(t.localY>n.contentTop&&n.contentBottom>t.localY){t.paneY=t.localY-n.contentTop,t.paneId=i;break}}return t.localX-=this._chartContentLeftRight.contentLeft,t}},{key:"_checkEventInChartContent",value:function(t){return t.localX>this._chartContentLeftRight.contentLeft&&this._chartContentLeftRight.contentRight>t.localX&&t.localY>this._chartContentTopBottom.contentTop&&this._chartContentTopBottom.contentBottom>t.localY}},{key:"setChartContentLeftRight",value:function(t){this._chartContentLeftRight=t}},{key:"setChartContentTopBottom",value:function(t){this._chartContentTopBottom=t}},{key:"setPaneContentSize",value:function(t){this._paneContentSize=t}},{key:"destroy",value:function(){this._event.destroy(),this._target.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._target.removeEventListener("contextmenu",this._boundContextMenuEvent)}}]),t}();function li(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,i=0;return function(){var n=Date.now(),a=this,r=arguments;n-i>e&&(t.apply(a,r),i=n)}}var hi=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(t){var n,a=t.id,r=t.point,o=t.chartStore,s=t.xAxis,c=t.yAxis,l=t.styles;return _(this,i),(n=e.call(this,{id:a,chartStore:o,xAxis:s,yAxis:c}))._point=r,n._symbolCoordinate={},n.setStyles(l,o.styleOptions().annotation),n}return y(i,[{key:"_drawSymbol",value:function(t,e,i){var n=this._chartStore.timeScaleStore().barSpace(),a=i.symbol,r=a.size,o=a.activeSize,s=e?C(o)?o:n:C(r)?r:n,c=e?a.activeColor:a.color;switch(a.type){case Y:wt(t,c,this._symbolCoordinate,s/2);break;case W:!function(t,e,i,n,a,r){t.fillStyle=e,t.fillRect(i,n,a,r)}(t,c,this._symbolCoordinate.x-s/2,this._symbolCoordinate.y-s/2,s,s);break;case G:!function(t,e,i,n,a){t.fillStyle=e,t.beginPath(),t.moveTo(i.x-n/2,i.y),t.lineTo(i.x,i.y-a/2),t.lineTo(i.x+n/2,i.y),t.lineTo(i.x,i.y+a/2),t.closePath(),t.fill()}(t,c,this._symbolCoordinate,s,s);break;case U:!function(t,e,i,n,a){t.fillStyle=e,t.beginPath(),t.moveTo(i.x-n/2,i.y+a/2),t.lineTo(i.x,i.y-a/2),t.lineTo(i.x+n/2,i.y+a/2),t.closePath(),t.fill()}(t,c,this._symbolCoordinate,s,s);break;case J:t.save(),this.drawCustomSymbol({ctx:t,point:this._point,coordinate:this._symbolCoordinate,viewport:{width:this._xAxis.width(),height:this._yAxis.height(),barSpace:n},styles:a,isActive:e}),t.restore()}}},{key:"draw",value:function(t){var e=this._styles||this._chartStore.styleOptions().annotation,i=e.offset||[0,0],n=0;switch(e.position){case Q:n=this._yAxis.convertToPixel(this._point.value);break;case X:n=0;break;case"bottom":n=this._yAxis.height()}this._symbolCoordinate.y=n+i[0];var a=this._id===this._chartStore.annotationStore().mouseOperate().id;this._drawSymbol(t,a,e),this.drawExtend&&(t.save(),this.drawExtend({ctx:t,point:this._point,coordinate:this._symbolCoordinate,viewport:{width:this._xAxis.width(),height:this._yAxis.height()},styles:e,isActive:a}),t.restore())}},{key:"checkEventCoordinateOn",value:function(t){var e,i,n,a,r,o=this._chartStore.timeScaleStore().barSpace(),s=(this._styles||this._chartStore.styleOptions().annotation).symbol,c=C(s.size)?s.size:o;switch(s.type){case Y:e=Dt(this._symbolCoordinate,c/2,t);break;case W:e=function(t,e,i){return!(t.x>i.x||i.x>e.x||t.y>i.y||i.y>e.y)}({x:this._symbolCoordinate.x-c/2,y:this._symbolCoordinate.y-c/2},{x:this._symbolCoordinate.x+c/2,y:this._symbolCoordinate.y+c/2},t);break;case G:e=(n=c)*(a=c)/2+2>Math.abs((i=this._symbolCoordinate).x-(r=t).x)*a+Math.abs(i.y-r.y)*n;break;case U:e=function(t,e){var i=Ct(t[0],t[1],t[2]),n=Ct(t[0],t[1],e)+Ct(t[0],t[2],e)+Ct(t[1],t[2],e);return 2>Math.abs(i-n)}([{x:this._symbolCoordinate.x-c/2,y:this._symbolCoordinate.y+c/2},{x:this._symbolCoordinate.x,y:this._symbolCoordinate.y-c/2},{x:this._symbolCoordinate.x+c/2,y:this._symbolCoordinate.y+c/2}],t);break;case J:e=this.checkEventCoordinateOnCustomSymbol({eventCoordinate:t,coordinate:this._symbolCoordinate,size:c})}if(e)return{id:this._id,instance:this}}},{key:"createSymbolCoordinate",value:function(t){var e=this._styles||this._chartStore.styleOptions().annotation;this._symbolCoordinate={x:t+(e.offset||[0,0])[1]}}},{key:"points",value:function(){return this._point}},{key:"checkEventCoordinateOnCustomSymbol",value:function(t){}},{key:"drawCustomSymbol",value:function(t){}}]),i}(kt);var ui=function(t){ct(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var a=ht(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lt(this,i)}}(i);function i(t){var n,a=t.id,r=t.point,o=t.text,s=t.mark,c=t.chartStore,l=t.xAxis,h=t.yAxis,u=t.styles;return _(this,i),(n=e.call(this,{id:a,chartStore:c,xAxis:l,yAxis:h}))._point=r||{},n._text=o,n._mark=s,n.setStyles(u,c.styleOptions().tag),n}return y(i,[{key:"update",value:function(t){var e=t.point,i=t.text,n=t.mark,a=t.styles,r=!1;return w(e)&&(this._point=e,r=!0),E(i)&&(this._text=i,r=!0),E(n)&&(this._mark=n,r=!0),this.setStyles(a,this._chartStore.styleOptions().tag)&&(r=!0),r}},{key:"drawMarkLine",value:function(t){var e=this._chartStore.styleOptions(),i=e.yAxis,n=this._styles||e.tag,a=this._getY(n);t.save(),this._drawLine(t,a,n,i),this._drawMark(t,a,n,i),t.restore()}},{key:"drawText",value:function(t){if(E(this._text)){var e=this._chartStore.styleOptions(),i=this._styles||e.tag,n=i.text;t.save();var a,r=Yt(t,this._text,n),o=Wt(n);a=this._yAxis.isFromYAxisZero()?0:this._yAxis.width()-r;var s=this._getY(i);ke(t,n.backgroundColor,n.borderColor,n.borderSize,a,s-o/2,r,o,n.borderRadius),xe(t,n.color,a+n.paddingLeft,s,this._text),t.restore()}}},{key:"_drawLine",value:function(t,e,i,n){var a=i.line;if(a.show){t.save();var r=Yt(t,this._text,i.text),o=Yt(t,this._mark,i.mark);t.strokeStyle=a.color,t.lineWidth=a.size,a.style===M&&t.setLineDash(a.dashValue);var s=i.mark.offset,c=[],l=E(this._text),h=E(this._mark);n.inside?n.position===O?l&&h?s>0?(c.push([r,r+s]),c.push([r+s+o,this._xAxis.width()])):c.push(Math.min(r,o)>Math.abs(s)?[r+s+o,this._xAxis.width()]:[Math.max(r,o),this._xAxis.width()]):l?c.push([r,this._xAxis.width()]):h?s>0?(c.push([0,s]),c.push([s+o,this._xAxis.width()])):c.push(o>Math.abs(s)?[s+o,this._xAxis.width()]:[0,this._xAxis.width()]):c.push([0,this._xAxis.width()]):l&&h?0>s?(c.push([0,this._xAxis.width()-r+s-o]),c.push([this._xAxis.width()-r+s,this._xAxis.width()-r])):c.push(Math.min(r,o)>s?[0,this._xAxis.width()-r-o+s]:[0,this._xAxis.width()-Math.max(r,o)]):l?c.push([0,this._xAxis.width()-r]):h?0>s?(c.push([0,this._xAxis.width()+s-o]),c.push([this._xAxis.width()+s,this._xAxis.width()])):c.push(o>s?[0,this._xAxis.width()-o+s]:[0,this._xAxis.width()]):c.push([0,this._xAxis.width()]):n.position===O?h?s>0?(c.push([0,s]),c.push([s+o,this._xAxis.width()])):c.push(o>Math.abs(s)?[o+s,this._xAxis.width()]:[0,this._xAxis.width()]):c.push([0,this._xAxis.width()]):h?0>s?(c.push([0,this._xAxis.width()-o+s]),c.push([this._xAxis.width()+s,this._xAxis.width()])):c.push(o>s?[0,this._xAxis.width()-o+s]:[0,this._xAxis.width()]):c.push([0,this._xAxis.width()]),c.forEach((function(i){Ft(t,e,i[0],i[1])})),t.restore()}}},{key:"_drawMark",value:function(t,e,i,n){if(E(this._mark)){var a,r=i.mark,o=Yt(t,this._mark,r),s=Wt(r);if(n.inside){var c=0;E(this._text)&&(c=Yt(t,this._text,i.text)),a=n.position===O?c:this._xAxis.width()-c-o}else a=n.position===O?0:this._xAxis.width()-o;ke(t,r.backgroundColor,r.borderColor,r.borderSize,a+=r.offset,e-s/2,o,s,r.borderRadius),t.textBaseline="middle",t.font=Ht(r.size,r.weight,r.family),xe(t,r.color,a+r.paddingLeft,e,this._mark)}}},{key:"_getY",value:function(t){var e=t.offset;switch(t.position){case X:return e;case"bottom":return this._yAxis.height()+e;default:return this._yAxis.convertToNicePixel(this._point.value)+e}}}]),i}(kt);function di(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return fi(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?fi(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,a=function(){};return{s:a,n:function(){return t.length>n?{done:!1,value:t[n++]}:{done:!0}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function fi(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);e>i;i++)n[i]=t[i];return n}var vi="technical_indicator_pane_",pi="candle_pane",_i=function(){function t(e,i){var n=this;_(this,t),this._initChartContainer(e),this._shapeBaseId=0,this._paneBaseId=0,this._separatorDragStartTopPaneHeight=0,this._separatorDragStartBottomPaneHeight=0,this._chartStore=new he(i,{invalidate:this._invalidatePane.bind(this),crosshair:this._crosshairObserver.bind(this)}),this._xAxisPane=new Ye({id:"x_axis_pane",container:this._chartContainer,chartStore:this._chartStore}),this._panes=new Map([[pi,new ze({container:this._chartContainer,chartStore:this._chartStore,xAxis:this._xAxisPane.xAxis(),id:pi})]]),this._separators=new Map,this._chartWidth={},this._chartHeight={},this._chartEvent=new ci(this._chartContainer,this._chartStore,(function(t){return n._panes.get(t).yAxis()})),this.adjustPaneViewport(!0,!0,!0)}return y(t,[{key:"_initChartContainer",value:function(t){this._container=t,this._chartContainer=fe("div",{userSelect:"none",webkitUserSelect:"none",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent",position:"relative",outline:"none",borderStyle:"none",width:"100%",cursor:"crosshair",boxSizing:"border-box"}),this._chartContainer.tabIndex=1,t.appendChild(this._chartContainer)}},{key:"_crosshairObserver",value:function(t){var e=this,i=t.paneId,n=t.dataIndex,a=t.kLineData,r=t.x,o=t.y;if(this._chartStore.actionStore().has(at.CROSSHAIR)||this._chartStore.actionStore().has(at.TOOLTIP)){var s={};this._panes.forEach((function(t,i){var r={},o=[];e.chartStore().technicalIndicatorStore().instances(i).forEach((function(t){var e=t.result[n];r[t.name]=e,o.push({name:t.name,data:e})})),s[i]=r,e._chartStore.actionStore().execute(at.TOOLTIP,{paneId:i,dataIndex:n,kLineData:a,technicalIndicatorData:o})})),i&&this._chartStore.actionStore().execute(at.CROSSHAIR,{paneId:i,coordinate:{x:r,y:o},dataIndex:n,kLineData:a,technicalIndicatorData:s})}}},{key:"_separatorStartDrag",value:function(t,e){this._separatorDragStartTopPaneHeight=this._panes.get(t).height(),this._separatorDragStartBottomPaneHeight=this._panes.get(e).height()}},{key:"_separatorDrag",value:function(t,e,i){var n=this._separatorDragStartTopPaneHeight+t,a=this._separatorDragStartBottomPaneHeight-t;n>this._separatorDragStartTopPaneHeight+this._separatorDragStartBottomPaneHeight&&(n=this._separatorDragStartTopPaneHeight+this._separatorDragStartBottomPaneHeight,a=0),0>n&&(n=0,a=this._separatorDragStartTopPaneHeight+this._separatorDragStartBottomPaneHeight),this._panes.get(e).setHeight(n),this._panes.get(i).setHeight(a),this._chartStore.actionStore().execute(at.PANE_DRAG,{topPaneId:e,bottomPaneId:i,topPaneHeight:n,bottomPaneHeight:a}),this.adjustPaneViewport(!0,!0,!0,!0,!0)}},{key:"_invalidatePane",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;if(1===t)this._xAxisPane.invalidate(t),this._panes.forEach((function(e){e.invalidate(t)}));else{var e=!1;this._panes.forEach((function(t){var i=t.yAxis().computeAxis();i&&(e=i)})),this.adjustPaneViewport(!1,e,!0)}}},{key:"_measurePaneHeight",value:function(){var t=this,e=this._chartStore.styleOptions(),i=this._container.offsetHeight,n=e.separator.size,a=n*this._separators.size,r=this._xAxisPane.xAxis().getSelfHeight(),o=i-r-a,s=0;this._panes.forEach((function(t){if(t.id()!==pi){var e=t.height();s+e>o?(t.setHeight(o-s),s=o):s+=e}}));var c=o-s,l={};l.candle_pane={contentTop:0,contentBottom:c};var h=c,u=c;this._panes.get(pi).setHeight(c),this._chartHeight.candle_pane=c,this._panes.forEach((function(e){if(e.id()!==pi){var i=e.height();u+=i+n,l[e.id()]={contentTop:h,contentBottom:u},t._chartHeight[e.id()]=i,h=u}})),this._xAxisPane.setHeight(r),this._chartHeight.xAxis=r,this._chartHeight.total=i,this._chartEvent.setPaneContentSize(l),this._chartEvent.setChartContentTopBottom({contentTop:0,contentBottom:u})}},{key:"_measurePaneWidth",value:function(){var t,e,i,n=this,a=this._chartStore.styleOptions().yAxis,r=a.position===O,o=this._container.offsetWidth,s=Number.MIN_SAFE_INTEGER;a.inside?(t=o,s=o,e=0,i=0):(this._panes.forEach((function(t){s=Math.max(s,t.yAxis().getSelfWidth())})),t=o-s,r?(e=0,i=s):(i=0,e=o-s)),this._chartStore.timeScaleStore().setTotalDataSpace(t),this._panes.forEach((function(a,r){a.setWidth(t,s),a.setOffsetLeft(i,e);var o=n._separators.get(r);o&&o.setSize(i,t)})),this._chartWidth={content:t,yAxis:s,total:o},this._xAxisPane.setWidth(t,s),this._xAxisPane.setOffsetLeft(i,e),this._chartEvent.setChartContentLeftRight({contentLeft:i,contentRight:i+t})}},{key:"adjustPaneViewport",value:function(t,e,i,n,a){t&&this._measurePaneHeight();var r=!1;n&&this._panes.forEach((function(t){var e=t.yAxis().computeAxis(a);r||(r=e)})),(!n&&e||n&&r)&&this._measurePaneWidth(),i&&(this._xAxisPane.xAxis().computeAxis(!0),this._xAxisPane.layout(),this._panes.forEach((function(t){t.layout()})))}},{key:"hasPane",value:function(t){return this._panes.has(t)}},{key:"getPane",value:function(t){return this._panes.get(t)}},{key:"chartStore",value:function(){return this._chartStore}},{key:"removeTechnicalIndicator",value:function(t,e){var i=this;if(this._chartStore.technicalIndicatorStore().removeInstance(t,e)){var n=!1;if(t!==pi&&!this._chartStore.technicalIndicatorStore().hasInstance(t)){n=!0,this._panes.get(t).destroy();var a=this._separators.get(t).topPaneId();this._separators.get(t).destroy(),this._panes.delete(t),this._separators.delete(t),this._separators.forEach((function(t){var e=t.topPaneId();i._separators.has(e)||t.updatePaneId(a)}))}this.adjustPaneViewport(n,!0,!0,!0,!0)}}},{key:"createTechnicalIndicator",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._panes.has(n.id)){var a=this._chartStore.technicalIndicatorStore().addInstance(n.id,t,e);return a&&a.finally((function(t){i.setPaneOptions(n,i._panes.get(n.id).yAxis().computeAxis())})),n.id}var r=n.id||"".concat(vi).concat(++this._paneBaseId),o=!A(n.dragEnabled)||n.dragEnabled;this._separators.set(r,new qe(this._chartContainer,this._chartStore,Array.from(this._panes.keys()).pop(),r,o,{startDrag:this._separatorStartDrag.bind(this),drag:li(this._separatorDrag.bind(this),50)}));var s=new Le({container:this._chartContainer,chartStore:this._chartStore,xAxis:this._xAxisPane.xAxis(),id:r,height:n.height||100});this._panes.set(r,s);var c=this._chartStore.technicalIndicatorStore().addInstance(r,t,e);return c&&c.finally((function(t){i.adjustPaneViewport(!0,!0,!0,!0,!0)})),r}},{key:"createShape",value:function(t,e,i){var n=e.points,a=e.styles,r=e.lock,o=e.mode,s=e.data,c=e.onDrawStart,l=e.onDrawing,h=e.onDrawEnd,u=e.onClick,d=e.onRightClick,f=e.onPressedMove,v=e.onMouseEnter,p=e.onMouseLeave,_=e.onRemove,m=e.id||"".concat("shape_").concat(++this._shapeBaseId);if(!this._chartStore.shapeStore().hasInstance(m)){var y=null;this.hasPane(i)?y=this._panes.get(i).yAxis():n&&n.length>0&&(i=pi,y=this._panes.get(pi).yAxis());var g=new t({id:m,chartStore:this._chartStore,xAxis:this._xAxisPane.xAxis(),yAxis:y,points:n,styles:a,lock:r,mode:o,data:s});return k(c)&&c({id:m}),bt(g,[{key:"onDrawing",fn:l},{key:"onDrawEnd",fn:h},{key:"onClick",fn:u},{key:"onRightClick",fn:d},{key:"onPressedMove",fn:f},{key:"onMouseEnter",fn:v},{key:"onMouseLeave",fn:p},{key:"onRemove",fn:_}]),this._chartStore.shapeStore().addInstance(g,i),m}return null}},{key:"createAnnotation",value:function(t,e){var i=this,n=[];t.forEach((function(t){var a=t.point,r=t.styles,o=t.checkEventCoordinateOnCustomSymbol,s=t.drawCustomSymbol,c=t.drawExtend,l=t.onClick,h=t.onRightClick,u=t.onMouseEnter,d=t.onMouseLeave;if(a&&a.timestamp){var f=new hi({id:a.timestamp,chartStore:i._chartStore,point:a,xAxis:i._xAxisPane.xAxis(),yAxis:i._panes.get(e).yAxis(),styles:r});bt(f,[{key:"drawExtend",fn:c},{key:"drawCustomSymbol",fn:s},{key:"checkEventCoordinateOnCustomSymbol",fn:o},{key:"onClick",fn:l},{key:"onRightClick",fn:h},{key:"onMouseEnter",fn:u},{key:"onMouseLeave",fn:d}]),n.push(f)}})),n.length>0&&this._chartStore.annotationStore().add(n,e)}},{key:"createTag",value:function(t,e){var i=this,n=[],a=!1,r=!1;t.forEach((function(t){var o=t.id,s=t.point,c=t.text,l=t.mark,h=t.styles;if(E(o))if(i._chartStore.tagStore().has(o,e)){var u=i._chartStore.tagStore().update(o,e,{point:s,text:c,mark:l,styles:h});a||(a=u)}else r=!0,n.push(new ui({id:o,point:s,text:c,mark:l,styles:h,chartStore:i._chartStore,xAxis:i._xAxisPane.xAxis(),yAxis:i._panes.get(e).yAxis()}))})),r?this._chartStore.tagStore().add(n,e):a&&this._invalidatePane(1)}},{key:"removeAllHtml",value:function(){this._panes.forEach((function(t){t.removeHtml()})),this._xAxisPane.removeHtml()}},{key:"setPaneOptions",value:function(t,e){var i=e,n=!1;if(t.id!==pi){var a=this._panes.get(t.id);a&&(C(t.height)&&t.height>0&&a.height()!==t.height&&(i=!0,a.setHeight(t.height),n=!0),A(t.dragEnabled)&&this._separators.get(t.id).setDragEnabled(t.dragEnabled))}i&&this.adjustPaneViewport(n,!0,!0,!0,!0)}},{key:"setTimezone",value:function(t){this._chartStore.timeScaleStore().setTimezone(t),this._xAxisPane.xAxis().computeAxis(!0),this._xAxisPane.invalidate(3)}},{key:"convertToPixel",value:function(t,e){var i,n=this,a=e.paneId,r=void 0===a?pi:a,o=e.absoluteYAxis,s=[].concat(t),c=[],l=this._chartStore.styleOptions().separator.size,h=0,u=di(this._panes.values());try{var d=function(){var t=i.value;if(t.id()===r)return c=s.map((function(e){var i=e.timestamp,a=e.value,r={},s=e.dataIndex;if(E(i)&&(s=n._chartStore.timeScaleStore().timestampToDataIndex(i)),E(s)&&(r.x=n._xAxisPane.xAxis().convertToPixel(s)),E(a)){var c=t.yAxis().convertToPixel(a);r.y=o?h+c:c}return r})),"break";h+=t.height()+l};for(u.s();!(i=u.n()).done;)if("break"===d())break}catch(t){u.e(t)}finally{u.f()}return b(t)?c:c[0]||{}}},{key:"convertFromPixel",value:function(t,e){var i,n=this,a=e.paneId,r=void 0===a?pi:a,o=e.absoluteYAxis,s=[].concat(t),c=[],l=this._chartStore.styleOptions().separator.size,h=0,u=di(this._panes.values());try{var d=function(){var t=i.value;if(t.id()===r)return c=s.map((function(e){var i=e.x,a=e.y,r={};if(E(i)&&(r.dataIndex=n._xAxisPane.xAxis().convertFromPixel(i),r.timestamp=n._chartStore.timeScaleStore().dataIndexToTimestamp(r.dataIndex)),E(a)){var s=o?a-h:a;r.value=t.yAxis().convertFromPixel(s)}return r})),"break";h+=t.height()+l};for(u.s();!(i=u.n()).done;)if("break"===d())break}catch(t){u.e(t)}finally{u.f()}return b(t)?c:c[0]||{}}},{key:"chartWidth",value:function(){return this._chartWidth}},{key:"chartHeight",value:function(){return this._chartHeight}},{key:"getConvertPictureUrl",value:function(t,e,i){var n=this,a=this._chartContainer.offsetWidth,r=this._chartContainer.offsetHeight,o=fe("canvas",{width:"".concat(a,"px"),height:"".concat(r,"px"),boxSizing:"border-box"}),s=o.getContext("2d"),c=Vt(o);o.width=a*c,o.height=r*c,s.scale(c,c),s.fillStyle=i,s.fillRect(0,0,a,r);var l=0;return this._panes.forEach((function(e,i){if(i!==pi){var r=n._separators.get(i);s.drawImage(r.getImage(),0,l,a,r.height()),l+=r.height()}s.drawImage(e.getImage(t),0,l,a,e.height()),l+=e.height()})),s.drawImage(this._xAxisPane.getImage(t),0,l,a,this._xAxisPane.height()),o.toDataURL("image/".concat(e))}},{key:"destroy",value:function(){this._panes.forEach((function(t){t.destroy()})),this._separators.forEach((function(t){t.destroy()})),this._panes.clear(),this._separators.clear(),this._xAxisPane.destroy(),this._container.removeChild(this._chartContainer),this._chartEvent.destroy()}}]),t}(),mi=function(){function t(e,i){_(this,t),this._chartPane=new _i(e,i)}return y(t,[{key:"getWidth",value:function(){return this._chartPane.chartWidth()}},{key:"getHeight",value:function(){return this._chartPane.chartHeight()}},{key:"setStyleOptions",value:function(t){w(t)&&(this._chartPane.chartStore().applyStyleOptions(t),this._chartPane.adjustPaneViewport(!0,!0,!0,!0,!0))}},{key:"getStyleOptions",value:function(){return S(this._chartPane.chartStore().styleOptions())}},{key:"setPriceVolumePrecision",value:function(t,e){C(t)&&t>=0&&C(e)&&e>=0&&this._chartPane.chartStore().setPriceVolumePrecision(t,e)}},{key:"setTimezone",value:function(t){this._chartPane.setTimezone(t)}},{key:"getTimezone",value:function(){return this._chartPane.chartStore().timeScaleStore().timezone()}},{key:"resize",value:function(){this._chartPane.adjustPaneViewport(!0,!0,!0,!0,!0)}},{key:"setOffsetRightSpace",value:function(t){C(t)&&this._chartPane.chartStore().timeScaleStore().setOffsetRightSpace(t,!0)}},{key:"setLeftMinVisibleBarCount",value:function(t){C(t)&&t>0&&this._chartPane.chartStore().timeScaleStore().setLeftMinVisibleBarCount(Math.ceil(t))}},{key:"setRightMinVisibleBarCount",value:function(t){C(t)&&t>0&&this._chartPane.chartStore().timeScaleStore().setRightMinVisibleBarCount(Math.ceil(t))}},{key:"setDataSpace",value:function(t){C(t)&&this._chartPane.chartStore().timeScaleStore().setDataSpace(t)}},{key:"getDataSpace",value:function(){return this._chartPane.chartStore().timeScaleStore().dataSpace()}},{key:"getBarSpace",value:function(){return this._chartPane.chartStore().timeScaleStore().barSpace()}},{key:"clearData",value:function(){this._chartPane.chartStore().clearDataList()}},{key:"getDataList",value:function(){return this._chartPane.chartStore().dataList()}},{key:"applyNewData",value:function(t,e){var i=this;if(b(t)){var n=this._chartPane.chartStore();n.clearDataList(),n.addData(t,0,e),n.technicalIndicatorStore().calcInstance().finally((function(t){i._chartPane.adjustPaneViewport(!1,!0,!0,!0)}))}}},{key:"applyMoreData",value:function(t,e){var i=this;if(b(t)){var n=this._chartPane.chartStore();n.addData(t,0,e),n.technicalIndicatorStore().calcInstance().finally((function(t){i._chartPane.adjustPaneViewport(!1,!0,!0,!0)}))}}},{key:"updateData",value:function(t){var e=this;if(w(t)&&!b(t)){var i=this._chartPane.chartStore(),n=i.dataList(),a=n.length,r=Z(t,"timestamp",0),o=Z(n[a-1],"timestamp",0);if(r>=o){var s=a;r===o&&(s=a-1),i.addData(t,s),i.technicalIndicatorStore().calcInstance().finally((function(t){e._chartPane.adjustPaneViewport(!1,!0,!0,!0)}))}}}},{key:"loadMore",value:function(t){k(t)&&this._chartPane.chartStore().timeScaleStore().setLoadMoreCallback(t)}},{key:"createTechnicalIndicator",value:function(t,e,i){if(!E(t))return null;var n=w(t)&&!b(t)?t:{name:t};return this._chartPane.chartStore().technicalIndicatorStore().hasTemplate(n.name)?this._chartPane.createTechnicalIndicator(n,e,i):null}},{key:"addTechnicalIndicatorTemplate",value:function(t){if(w(t)){var e=[].concat(t);this._chartPane.chartStore().technicalIndicatorStore().addTemplate(e)}}},{key:"overrideTechnicalIndicator",value:function(t,e){var i=this;if(w(t)&&!b(t)){var n=this._chartPane.chartStore().technicalIndicatorStore().override(t,e);n&&n.then((function(t){i._chartPane.adjustPaneViewport(!1,!0,!0,!0)}))}}},{key:"getTechnicalIndicatorTemplate",value:function(t){return this._chartPane.chartStore().technicalIndicatorStore().getTemplateInfo(t)}},{key:"getTechnicalIndicatorByPaneId",value:function(t,e){return this._chartPane.chartStore().technicalIndicatorStore().getInstanceInfo(t,e)}},{key:"removeTechnicalIndicator",value:function(t,e){this._chartPane.removeTechnicalIndicator(t,e)}},{key:"addShapeTemplate",value:function(t){if(w(t)){var e=[].concat(t);this._chartPane.chartStore().shapeStore().addTemplate(e)}}},{key:"createShape",value:function(t,e){if(!E(t))return null;var i=w(t)&&!b(t)?t:{name:t},n=this._chartPane.chartStore().shapeStore().getTemplate(i.name);return n?this._chartPane.createShape(n,i,e):null}},{key:"getShape",value:function(t){return this._chartPane.chartStore().shapeStore().getInstanceInfo(t)}},{key:"setShapeOptions",value:function(t){w(t)&&!b(t)&&this._chartPane.chartStore().shapeStore().setInstanceOptions(t)}},{key:"removeShape",value:function(t){this._chartPane.chartStore().shapeStore().removeInstance(t)}},{key:"createAnnotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pi;if(w(t)&&this._chartPane.hasPane(e)){var i=[].concat(t);this._chartPane.createAnnotation(i,e)}}},{key:"removeAnnotation",value:function(t,e){this._chartPane.chartStore().annotationStore().remove(t,e)}},{key:"createTag",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pi;if(w(t)&&this._chartPane.hasPane(e)){var i=[].concat(t);this._chartPane.createTag(i,e)}}},{key:"removeTag",value:function(t,e){this._chartPane.chartStore().tagStore().remove(t,e)}},{key:"createHtml",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pi;if(!w(t))return null;if(!(I(t.content)||t.content instanceof HTMLElement))return null;var i=this._chartPane.getPane(e);return i?i.createHtml(t):null}},{key:"removeHtml",value:function(t,e){if(t){var i=this._chartPane.getPane(t);i&&i.removeHtml(e)}else this._chartPane.removeAllHtml()}},{key:"setPaneOptions",value:function(t){w(t)&&this._chartPane.setPaneOptions(t,!1)}},{key:"setZoomEnabled",value:function(t){this._chartPane.chartStore().timeScaleStore().setZoomEnabled(t)}},{key:"isZoomEnabled",value:function(){return this._chartPane.chartStore().timeScaleStore().zoomEnabled()}},{key:"setScrollEnabled",value:function(t){this._chartPane.chartStore().timeScaleStore().setScrollEnabled(t)}},{key:"isScrollEnabled",value:function(){return this._chartPane.chartStore().timeScaleStore().scrollEnabled()}},{key:"scrollByDistance",value:function(t,e){var i=this;if(C(t))if(C(e)&&e>0){this._chartPane.chartStore().timeScaleStore().startScroll();var n=(new Date).getTime();!function a(){var r=((new Date).getTime()-n)/e,o=r>=1,s=o?t:t*r;i._chartPane.chartStore().timeScaleStore().scroll(s),o||me(a)}()}else this._chartPane.chartStore().timeScaleStore().startScroll(),this._chartPane.chartStore().timeScaleStore().scroll(t)}},{key:"scrollToRealTime",value:function(t){var e=(this._chartPane.chartStore().timeScaleStore().offsetRightBarCount()-this._chartPane.chartStore().timeScaleStore().offsetRightSpace()/this._chartPane.chartStore().timeScaleStore().dataSpace())*this._chartPane.chartStore().timeScaleStore().dataSpace();this.scrollByDistance(e,t)}},{key:"scrollToDataIndex",value:function(t,e){if(C(t)){var i=(this._chartPane.chartStore().dataList().length-1-t)*this._chartPane.chartStore().timeScaleStore().dataSpace();this.scrollByDistance(i,e)}}},{key:"zoomAtCoordinate",value:function(t,e,i){var n=this;if(C(t))if(C(i)&&i>0){var a=this._chartPane.chartStore().timeScaleStore().dataSpace(),r=a*t-a,o=(new Date).getTime();!function t(){var s=((new Date).getTime()-o)/i,c=s>=1,l=c?r:r*s;n._chartPane.chartStore().timeScaleStore().zoom(l/a,e),c||me(t)}()}else this._chartPane.chartStore().timeScaleStore().zoom(t,e)}},{key:"zoomAtDataIndex",value:function(t,e,i){if(C(t)&&C(e)){var n=this._chartPane.chartStore().timeScaleStore().dataIndexToCoordinate(e);this.zoomAtCoordinate(t,{x:n},i)}}},{key:"convertToPixel",value:function(t,e){return this._chartPane.convertToPixel(t,e)}},{key:"convertFromPixel",value:function(t,e){return this._chartPane.convertFromPixel(t,e)}},{key:"subscribeAction",value:function(t,e){this._chartPane.chartStore().actionStore().subscribe(t,e)}},{key:"unsubscribeAction",value:function(t,e){this._chartPane.chartStore().actionStore().unsubscribe(t,e)}},{key:"getConvertPictureUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jpeg",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FFFFFF";if("png"===e||"jpeg"===e||"bmp"===e)return this._chartPane.getConvertPictureUrl(t,e,i)}},{key:"destroy",value:function(){this._chartPane.destroy()}}]),t}(),yi={},gi=1,xi="k_line_chart_",Si={clone:S,merge:x,isString:I,isNumber:C,isValid:E,isObject:w,isArray:b,isFunction:k,isBoolean:A,formatValue:Z,formatPrecision:q,formatBigNumber:tt};p.addTechnicalIndicatorTemplate([{name:"AVP",shortName:"AVP",series:"price",precision:2,plots:[{key:"avp",title:"AVP: ",type:"line"}],calcTechnicalIndicator:function(t){var e=0,i=0;return t.map((function(t){var n={};return e+=t.turnover||0,0!==(i+=t.volume||0)&&(n.avp=e/i),n}))}},e,i,n,{name:"EMV",shortName:"EMV",calcParams:[14,9],plots:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calcTechnicalIndicator:function(t,e){var i=e.params,n=0,a=0,r=[],o=[];return t.forEach((function(e,s){var c={},l=t[s-1]||e,h=e.high,u=e.low,d=e.turnover||0,f=0;0!==d&&(f=((h+u)/2-(l.high+l.low)/2)*(h-u)/d),r.push(f),n+=f,i[0]-1>s||(c.emv=n,n-=r[s-(i[0]-1)],a+=c.emv,i[0]+i[1]-2>s||(c.maEmv=a/i[1],a-=o[s-(i[1]-1)].emv)),o.push(c)})),o}},{name:"EMA",shortName:"EMA",series:"price",calcParams:[6,12,20],precision:2,shouldCheckParamCount:!1,shouldOhlc:!0,plots:[{key:"ema6",title:"EMA6: ",type:"line"},{key:"ema12",title:"EMA12: ",type:"line"},{key:"ema20",title:"EMA20: ",type:"line"}],regeneratePlots:function(t){return t.map((function(t){return{key:"ema".concat(t),title:"EMA".concat(t,": "),type:"line"}}))},calcTechnicalIndicator:function(t,e){var i=e.params,n=e.plots,a=0,r=[];return t.map((function(t,e){var o={},s=t.close;return a+=s,i.forEach((function(t,i){t-1>e||(r[i]=e>t-1?(2*s+(t-1)*r[i])/(t+1):a/t,o[n[i].key]=r[i])})),o}))}},{name:"MA",shortName:"MA",series:"price",calcParams:[5,10,30,60],precision:2,shouldCheckParamCount:!1,shouldOhlc:!0,plots:[{key:"ma5",title:"MA5: ",type:"line"},{key:"ma10",title:"MA10: ",type:"line"},{key:"ma30",title:"MA30: ",type:"line"},{key:"ma60",title:"MA60: ",type:"line"}],regeneratePlots:function(t){return t.map((function(t){return{key:"ma".concat(t),title:"MA".concat(t,": "),type:"line"}}))},calcTechnicalIndicator:function(t,e){var i=e.params,n=e.plots,a=[];return t.map((function(e,r){var o={},s=e.close;return i.forEach((function(e,i){a[i]=(a[i]||0)+s,e-1>r||(o[n[i].key]=a[i]/e,a[i]-=t[r-(e-1)].close)})),o}))}},a,{name:"SMA",shortName:"SMA",series:"price",calcParams:[12,2],precision:2,plots:[{key:"sma",title:"SMA: ",type:"line"}],shouldCheckParamCount:!0,shouldOhlc:!0,calcTechnicalIndicator:function(t,e){var i=e.params,n=0,a=0;return t.map((function(t,e){var r={},o=t.close;return n+=o,i[0]-1>e||(r.sma=a=e>i[0]-1?(o*i[1]+a*(i[0]-i[1]+1))/(i[0]+1):n/i[0]),r}))}},{name:"TRIX",shortName:"TRIX",calcParams:[12,9],plots:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calcTechnicalIndicator:function(t,e){var i,n,a,r=e.params,o=0,s=0,c=0,l=0,h=[];return t.forEach((function(t,e){var u={},d=t.close;if(o+=d,e>=r[0]-1&&(s+=i=e>r[0]-1?(2*d+(r[0]-1)*i)/(r[0]+1):o/r[0],e>=2*r[0]-2&&(c+=n=e>2*r[0]-2?(2*i+(r[0]-1)*n)/(r[0]+1):s/r[0],e>=3*r[0]-3))){var f,v=0;e>3*r[0]-3?v=((f=(2*n+(r[0]-1)*a)/(r[0]+1))-a)/a*100:f=c/r[0],a=f,u.trix=v,l+=v,3*r[0]+r[1]-4>e||(u.maTrix=l/r[1],l-=h[e-(r[1]-1)].trix)}h.push(u)})),h}},{name:"BRAR",shortName:"BRAR",calcParams:[26],plots:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calcTechnicalIndicator:function(t,e){var i=e.params,n=0,a=0,r=0,o=0;return t.map((function(e,s){var c={},l=e.high,h=e.low,u=e.open,d=(t[s-1]||e).close;if(r+=l-u,o+=u-h,n+=l-d,a+=d-h,s>=i[0]-1){c.ar=0!==o?r/o*100:0,c.br=0!==a?n/a*100:0;var f=t[s-(i[0]-1)],v=f.high,p=f.low,_=f.open,m=(t[s-i[0]]||t[s-(i[0]-1)]).close;n-=v-m,a-=m-p,r-=v-_,o-=_-p}return c}))}},r,{name:"MTM",shortName:"MTM",calcParams:[12,6],plots:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calcTechnicalIndicator:function(t,e){var i=e.params,n=0,a=[];return t.forEach((function(e,r){var o={};r<i[0]||(o.mtm=e.close-t[r-i[0]].close,n+=o.mtm,i[0]+i[1]-1>r||(o.maMtm=n/i[1],n-=a[r-(i[1]-1)].mtm)),a.push(o)})),a}},{name:"PSY",shortName:"PSY",calcParams:[12,6],plots:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calcTechnicalIndicator:function(t,e){var i=e.params,n=0,a=0,r=[],o=[];return t.forEach((function(e,s){var c={},l=e.close-(t[s-1]||e).close>0?1:0;r.push(l),n+=l,i[0]-1>s||(c.psy=n/i[0]*100,a+=c.psy,i[0]+i[1]-2>s||(c.maPsy=a/i[1],a-=o[s-(i[1]-1)].psy),n-=r[s-(i[0]-1)]),o.push(c)})),o}},{name:"ROC",shortName:"ROC",calcParams:[12,6],shouldCheckParamCount:!0,plots:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calcTechnicalIndicator:function(t,e){var i=e.params,n=[],a=0;return t.forEach((function(e,r){var o={};if(r>=i[0]-1){var s=(t[r-i[0]]||t[r-(i[0]-1)]).close;o.roc=0!==s?(e.close-s)/s*100:0,a+=o.roc,i[0]-1+i[1]-1>r||(o.maRoc=a/i[1],a-=n[r-(i[1]-1)].roc)}n.push(o)})),n}},{name:"VR",shortName:"VR",calcParams:[26,6],plots:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calcTechnicalIndicator:function(t,e){var i=e.params,n=0,a=0,r=0,o=0,s=[];return t.forEach((function(e,c){var l={},h=e.close,u=(t[c-1]||e).close,d=e.volume;if(h>u?n+=d:u>h?a+=d:r+=d,c>=i[0]-1){var f=r/2;l.vr=a+f===0?0:(n+f)/(a+f)*100,o+=l.vr,i[0]+i[1]-2>c||(l.maVr=o/i[1],o-=s[c-(i[1]-1)].vr);var v=t[c-(i[0]-1)],p=t[c-i[0]]||v,_=v.close,m=v.volume;_>p.close?n-=m:p.close>_?a-=m:r-=m}s.push(l)})),s}},s,{name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],shouldCheckParamCount:!1,plots:[{key:"bias6",title:"BIAS6: ",type:"line"},{key:"bias12",title:"BIAS12: ",type:"line"},{key:"bias24",title:"BIAS24: ",type:"line"}],regeneratePlots:function(t){return t.map((function(t){return{key:"bias".concat(t),title:"BIAS".concat(t,": "),type:"line"}}))},calcTechnicalIndicator:function(t,e){var i=e.params,n=e.plots,a=[];return t.map((function(e,r){var o={},s=e.close;return i.forEach((function(e,c){if(a[c]=(a[c]||0)+s,r>=e-1){var l=a[c]/i[c];o[n[c].key]=(s-l)/l*100,a[c]-=t[r-(e-1)].close}})),o}))}},c,l,u,d,f,v,{name:"OBV",shortName:"OBV",calcParams:[30],plots:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calcTechnicalIndicator:function(t,e){var i=e.params,n=0,a=0,r=[];return t.forEach((function(e,o){var s=t[o-1]||e;s.close>e.close?a-=e.volume:e.close>s.close&&(a+=e.volume);var c={obv:a};n+=a,i[0]-1>o||(c.maObv=n/i[0],n-=r[o-(i[0]-1)].obv),r.push(c)})),r}},{name:"PVT",shortName:"PVT",plots:[{key:"pvt",title:"PVT: ",type:"line"}],calcTechnicalIndicator:function(t){var e=0;return t.map((function(i,n){var a={},r=(t[n-1]||i).close,o=0;return 0!==r&&(o=(i.close-r)/r*i.volume),a.pvt=e+=o,a}))}},{name:"VOL",shortName:"VOL",series:"volume",calcParams:[5,10,20],shouldCheckParamCount:!1,shouldFormatBigNumber:!0,precision:0,minValue:0,plots:[{key:"ma5",title:"MA5: ",type:"line"},{key:"ma10",title:"MA10: ",type:"line"},{key:"ma20",title:"MA20: ",type:"line"},{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,color:function(t,e){var i=t.current.kLineData||{};return i.close>i.open?e.bar.upColor:i.open>i.close?e.bar.downColor:e.bar.noChangeColor}}],regeneratePlots:function(t){var e=t.map((function(t){return{key:"ma".concat(t),title:"MA".concat(t,": "),type:"line"}}));return e.push({key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,color:function(t,e){var i=t.current.kLineData||{};return i.close>i.open?e.bar.upColor:i.open>i.close?e.bar.downColor:e.bar.noChangeColor}}),e},calcTechnicalIndicator:function(t,e){var i=e.params,n=e.plots,a=[];return t.map((function(e,r){var o=e.volume||0,s={volume:o};return i.forEach((function(e,i){a[i]=(a[i]||0)+o,e-1>r||(s[n[i].key]=a[i]/e,a[i]-=t[r-(e-1)].volume)})),s}))}}]),p.addShapeTemplate([{name:"horizontalRayLine",totalStep:3,checkEventCoordinateOnShape:function(t){var e=t.dataSource;return Tt(e[0],e[1],t.eventCoordinate)},createShapeDataSource:function(t){var e=t.coordinates,i={x:0,y:e[0].y};return e[1]&&e[1].x>e[0].x&&(i.x=t.viewport.width),[{type:"line",isDraw:!0,isCheck:!0,dataSource:[[e[0],i]]}]},performEventPressedMove:function(t){var e=t.points,i=t.pressPoint;e[0].value=i.value,e[1].value=i.value},performEventMoveForDrawing:function(t){2===t.step&&(t.points[0].value=t.movePoint.value)}},{name:"horizontalSegment",totalStep:3,checkEventCoordinateOnShape:function(t){var e=t.dataSource;return Mt(e[0],e[1],t.eventCoordinate)},createShapeDataSource:function(t){var e=t.coordinates,i=[];return 2===e.length&&(i=[e]),[{type:"line",isDraw:!0,isCheck:!0,dataSource:i}]},performEventPressedMove:function(t){var e=t.points,i=t.pressPoint;e[0].value=i.value,e[1].value=i.value},performEventMoveForDrawing:function(t){2===t.step&&(t.points[0].value=t.movePoint.value)}},{name:"horizontalStraightLine",totalStep:2,checkEventCoordinateOnShape:function(t){var e=t.dataSource;return Pt(e[0],e[1],t.eventCoordinate)},createShapeDataSource:function(t){var e=t.coordinates;return[{type:"line",isDraw:!0,isCheck:!0,dataSource:[[{x:0,y:e[0].y},{x:t.viewport.width,y:e[0].y}]]}]}},{name:"verticalRayLine",totalStep:3,checkEventCoordinateOnShape:function(t){var e=t.dataSource;return Tt(e[0],e[1],t.eventCoordinate)},createShapeDataSource:function(t){var e=t.coordinates,i={x:e[0].x,y:0};return e[1]&&e[1].y>e[0].y&&(i.y=t.viewport.height),[{type:"line",isDraw:!0,isCheck:!0,dataSource:[[e[0],i]]}]},performEventPressedMove:function(t){var e=t.points,i=t.pressPoint;e[0].timestamp=i.timestamp,e[0].dataIndex=i.dataIndex,e[1].timestamp=i.timestamp,e[1].dataIndex=i.dataIndex},performEventMoveForDrawing:function(t){var e=t.points,i=t.movePoint;2===t.step&&(e[0].timestamp=i.timestamp,e[0].dataIndex=i.dataIndex)}},{name:"verticalSegment",totalStep:3,checkEventCoordinateOnShape:function(t){var e=t.dataSource;return Mt(e[0],e[1],t.eventCoordinate)},createShapeDataSource:function(t){var e=t.coordinates,i=[];return 2===e.length&&(i=[e]),[{type:"line",isDraw:!0,isCheck:!0,dataSource:i}]},performEventPressedMove:function(t){var e=t.points,i=t.pressPoint;e[0].timestamp=i.timestamp,e[0].dataIndex=i.dataIndex,e[1].timestamp=i.timestamp,e[1].dataIndex=i.dataIndex},performEventMoveForDrawing:function(t){var e=t.points,i=t.movePoint;2===t.step&&(e[0].timestamp=i.timestamp,e[0].dataIndex=i.dataIndex)}},{name:"verticalStraightLine",totalStep:2,checkEventCoordinateOnShape:function(t){var e=t.dataSource;return Pt(e[0],e[1],t.eventCoordinate)},createShapeDataSource:function(t){var e=t.coordinates;return[{type:"line",isDraw:!0,isCheck:!0,dataSource:[[{x:e[0].x,y:0},{x:e[0].x,y:t.viewport.height}]]}]}},{name:"rayLine",totalStep:3,checkEventCoordinateOnShape:function(t){var e=t.dataSource;return Tt(e[0],e[1],t.eventCoordinate)},createShapeDataSource:function(t){var e,i,n,a=t.coordinates,r=t.viewport;return[{type:"line",isDraw:!0,isCheck:!0,dataSource:[(e=a[0],i=a[1],n={x:r.width,y:r.height},e&&i?[e,e.x===i.x&&e.y!==i.y?i.y>e.y?{x:e.x,y:n.y}:{x:e.x,y:0}:e.x>i.x?{x:0,y:At(e,i,{x:0,y:e.y})}:{x:n.x,y:At(e,i,{x:n.x,y:e.y})}]:[])]}]}},{name:"segment",totalStep:3,checkEventCoordinateOnShape:function(t){var e=t.dataSource;return Mt(e[0],e[1],t.eventCoordinate)},createShapeDataSource:function(t){var e=t.coordinates,i=[];return 2===e.length&&(i=[e]),[{type:"line",isDraw:!0,isCheck:!0,dataSource:i}]}},{name:"straightLine",totalStep:3,checkEventCoordinateOnShape:function(t){var e=t.dataSource;return Pt(e[0],e[1],t.eventCoordinate)},createShapeDataSource:function(t){var e=t.coordinates,i=t.viewport;return 2>e.length||e[0].x===e[1].x?[{type:"line",isDraw:!0,isCheck:!0,dataSource:[[{x:e[0].x,y:0},{x:e[0].x,y:i.height}]]}]:[{type:"line",isDraw:!0,isCheck:!0,dataSource:[[{x:0,y:At(e[0],e[1],{x:0,y:e[0].y})},{x:i.width,y:At(e[0],e[1],{x:i.width,y:e[0].y})}]]}]}},{name:"parallelStraightLine",totalStep:4,checkEventCoordinateOnShape:function(t){var e=t.dataSource;return Pt(e[0],e[1],t.eventCoordinate)},createShapeDataSource:function(t){var e=t.viewport;return[{type:"line",isDraw:!0,isCheck:!0,dataSource:Ot(t.coordinates,{x:e.width,y:e.height})}]}},{name:"priceChannelLine",totalStep:4,checkEventCoordinateOnShape:function(t){var e=t.dataSource;return Pt(e[0],e[1],t.eventCoordinate)},createShapeDataSource:function(t){var e=t.viewport;return[{type:"line",isDraw:!0,isCheck:!0,dataSource:Ot(t.coordinates,{x:e.width,y:e.height},1)}]}},{name:"priceLine",totalStep:2,checkEventCoordinateOnShape:function(t){var e=t.dataSource;return Tt(e[0],e[1],t.eventCoordinate)},createShapeDataSource:function(t){var e=t.coordinates,i=t.precision;return[{type:"line",isDraw:!0,isCheck:!0,dataSource:[[e[0],{x:t.viewport.width,y:e[0].y}]]},{type:"text",isDraw:!0,isCheck:!1,dataSource:[{x:e[0].x,y:e[0].y,text:t.yAxis.convertFromPixel(e[0].y).toFixed(i.price)}]}]}},{name:"fibonacciLine",totalStep:3,checkEventCoordinateOnShape:function(t){var e=t.dataSource;return Pt(e[0],e[1],t.eventCoordinate)},createShapeDataSource:function(t){var e=t.points,i=t.coordinates,n=t.precision;if(i.length>0){var a=[],r=[],o=t.viewport.width;if(i.length>1){var s=i[0].y-i[1].y,c=e[0].value-e[1].value;[1,.786,.618,.5,.382,.236,0].forEach((function(t){var l=i[1].y+s*t,h=(e[1].value+c*t).toFixed(n.price);a.push([{x:0,y:l},{x:o,y:l}]),r.push({x:0,y:l,text:"".concat(h," (").concat((100*t).toFixed(1),"%)")})}))}return[{type:"line",isDraw:!0,isCheck:!0,dataSource:a},{type:"text",isDraw:!0,isCheck:!1,dataSource:r}]}return[]}}]),t.dispose=function(t){if(t){var e;if(I(t)){var i=document.getElementById(t);e=i&&i.chartId}else e=t instanceof mi?t.id:t&&t.chartId;e&&(yi[e].destroy(),delete yi[e])}},t.extension=p,t.init=function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return null;if(!(e=I(t)?document.getElementById(t):t))return null;var n=yi[e.chartId||""];if(n)return n;var a="".concat(xi).concat(gi++);return(n=new mi(e,i)).id=a,e.chartId=a,yi[a]=n,n},t.utils=Si,t.version=function(){return"8.3.2"},Object.defineProperty(t,"__esModule",{value:!0})}))},"3f6e":function(t,e,i){"use strict";i.r(e);var n=i("ff09"),a=i.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},4085:function(t,e,i){"use strict";var n=i("8bdb"),a=i("85c1");n({global:!0,forced:a.globalThis!==a},{globalThis:a})},4259:function(t,e,i){"use strict";var n=i("8bdb");n({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})},"53a0":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCQTNFOEJENDdFMzYxMUVBQkMwRUQyQzc0REVGRjQ5NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCQTNFOEJENTdFMzYxMUVBQkMwRUQyQzc0REVGRjQ5NyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkJBM0U4QkQyN0UzNjExRUFCQzBFRDJDNzRERUZGNDk3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJBM0U4QkQzN0UzNjExRUFCQzBFRDJDNzRERUZGNDk3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+8/7oyQAABPlJREFUeNrsnU9sFUUcx2dfSxGiwAEqBBD0wIW/CanxAGhAQZsASROLiSFpUBc4GDAS5EKAgkQCJxA17yBBD/6lGAQxrSYeSMESQSAkGDGhEA6CidBqoJR2+U52GlrdeX2vb/fN7LzvN/lm0tm+znY+O/Obt7Mz6wVBICh75BEIgVAEQiAUgZQpkGw2uwjJMngqPEJlp5VqBu6FO+E/4M/gXwv5A77vx3pClQWAeB7JFniewxfoRrgJ3gpfMHWF5ANjD5IWx2H0qQ4+C68xUXhlHjA+QrK6zLryCvhDuAs+YE0LAYwXyhBGf30MT7Cpy3p/kOPlMETbbUWXhdaxEMk0zeGv4YPwb6p5eymt7PtwFVwDvw3PiPidV+H18F+mY8iLmvyDGOo19APnQiu4CH+h0icjjssR5uemu6wpmvz3HO2a7sD7NceesiGGjNGc9HWH40W7Jn+0DUCi4kKP44HceCzMFDiC8lQQd1UZ06PJjKBScUVQBEIRCIFQBEIgqVaPJr+XQMzob03+P6U6gcoCfz+I+UvSdHg5PB5+TF2Jpu4E/AvP1BxbAY9T5zhAETdXPXWhy3n6G/AR3/fPJwXEi+n2wlwRzs8vTUnLmaU8FG0HtO+QNgLMz3F3WXG0EAmhLUUw4lAtfApg6uIGUmwLmS2bcBnHrkOAUmNTUP+S4wbxlS1AnhP6KeFy0hS0kpfiCuq9RYzJazX5V+Ft8BWR7vn5/nFWztVPhDepkWRUXRyPA0gxekKT/44o0Xx1Esr1KClawmUkJyMOTbIhqI/S5Lc73D3pprsftWWUFaXhDgN5JEe3ZjyoBzkguyrPZiBUHiIQAqEIhEAoAiEQikAIhCIQAqFsUmVKz3sO/ApcLeJ/EiaqjjpEuDz6LIH8X3Jrjx8MlPumCLcU+ZZd1kDtNVi23NHCI5CBqna57DQC+d5g2S0Jx6tUAnkLbjZQroxbftKFpDGoyx0VlsBPw4+LcIOYpCTjxTARPhlzvhT/XFqHvVJt/GJIEQiBUARCEQiBUATiHJCom2jytkEPq82eFlLBKjP3Tf12RJ7cWlyubbhkwbnLZcqlmKAapuqi3TSQK5r8Rrh+CGXdifG8P4AbxMO955OWXBEl94VfK8L17EaAHIY3ROS/nM1mjyH9FL6pur1ckzZ9y+Amx3TOm1XFlLonWanArDICxPf9VlT8OREuZf6vaoV+zWDSMrnT9jJ18SXWRWYs/ud16jRYdofRUZbaCmKTZUC2Gix7V8IDiMHnQwBlF7ouOdx91xIgcgdquWvPa6I0E1QVqmU0qbgpjAJRUHYCSqsI15MvsABKszAzjSusAKKg/ITkWbVXx2J4rHi41DlXMw7UkFdOu3Inh7iA9ANzGsnpvp8L2Ix/H4HEf+ukGI1gddsFhHeWWUkEQhEIgVAEQiAUgVC2AHH5nVaBzUB0ZXU7DKS70HovJZC7mnyXt/jT3SvsKvQDSeiaJl/e0r8lwic7qtJW45qbq32vdG3UfOy6DUDk+rwdEfnyHe2/iPBBCFcGGTJ25Hrw40cbuiy54ulMmYz4csH4E/7Glkp4gwNb8brv+/dsASJbSH0Zw1gHGEdt+x4i3w4wf5DuyzX9Di8FjEF3oTC1CveECN+yIzeQeUaE7zAfKZJ/TrdU8cNTw/yrasDyCWDcz+vDQRAIyiKaBEIgFIEQCEUgbuiBAAMAmiAXAT229AsAAAAASUVORK5CYII="},6686:function(t,e,i){"use strict";function n(t,e,i){this.$children.map((function(a){t===a.$options.name?a.$emit.apply(a,[e].concat(i)):n.apply(a,[t,e].concat(i))}))}i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("fd3c"),i("c223");var a={methods:{dispatch:function(t,e,i){var n=this.$parent||this.$root,a=n.$options.name;while(n&&(!a||a!==t))n=n.$parent,n&&(a=n.$options.name);n&&n.$emit.apply(n,[e].concat(i))},broadcast:function(t,e,i){n.call(this,t,e,i)}}};e.default=a},"66c0":function(t,e,i){"use strict";i.r(e);var n=i("e5b2"),a=i.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},"678a":function(t,e,i){"use strict";i.r(e);var n=i("7d81"),a=i("97f3");for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);var o=i("66c0");for(var r in o)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(r);i("b2c8");var s=i("828b");a["default"].__module="renderKlinechart";var c=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"5122a2e8",null,!1,n["a"],a["default"]);e["default"]=c.exports},"6b4e":function(t,e,i){var n=i("cca9c");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("75e78da4",n,!0,{sourceMap:!1,shadowMode:!1})},"6b6a":function(t,e,i){"use strict";i.r(e);var n=i("c3f8"),a=i.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},7552:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var n={navTop:i("2489").default,klinechart:i("678a").default,uPopup:i("697a").default,uInput:i("da2c").default,uCountDown:i("5a75").default,tabbarBottom:i("33c5").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"content"},[n("navTop",{attrs:{title:t.$t("transaction.txt1"),isBack:!1}}),n("v-uni-view",{staticClass:"top"},[n("v-uni-view",{staticClass:"left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.productShow=!0}}},[n("v-uni-view",{staticClass:"text"},[t._v(t._s(t.productInfo.symbol))]),n("v-uni-image",{attrs:{src:i("c748"),mode:""}})],1),n("v-uni-view",{staticClass:"right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.go("/pages/tabbarPages/mine/record")}}},[n("v-uni-image",{attrs:{src:i("53a0"),mode:""}}),n("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$t("other.txt22")))])],1)],1),n("v-uni-view",{staticClass:"currentData"},[n("v-uni-view",{staticClass:"left"},[n("v-uni-view",{staticClass:"text1"},[t._v(t._s(t.$t("transaction.txt3")))]),n("v-uni-view",{staticClass:"text2"},[t._v(t._s(t.productInfo.price))]),n("v-uni-view",{staticClass:"text3"},[t._v(t._s(t.productInfo.price_zf)+"%")])],1),n("v-uni-view",{staticClass:"right"},[n("v-uni-view",{staticClass:"data"},[n("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$t("transaction.txt4")))]),n("v-uni-view",{staticClass:"num"},[t._v(t._s(t.productInfo.price_high))])],1),n("v-uni-view",{staticClass:"data"},[n("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$t("transaction.txt5")))]),n("v-uni-view",{staticClass:"num"},[t._v(t._s(t.productInfo.price_low))])],1),n("v-uni-view",{staticClass:"data"},[n("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$t("transaction.txt6")))]),n("v-uni-view",{staticClass:"num"},[t._v(t._s(t.productInfo.open_price))])],1),n("v-uni-view",{staticClass:"data"},[n("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$t("transaction.txt7")))]),n("v-uni-view",{staticClass:"num"},[t._v(t._s(t.productInfo.vol))])],1)],1)],1),n("v-uni-view",{staticClass:"timeList"},[n("v-uni-view",{staticClass:"time"},[t._v(t._s(t.$t("transaction.txt8")))]),t._l(t.timeListTop,(function(e,i){return n("v-uni-view",{key:i,class:["time",{time1:i==t.timeIndex}],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTime(i)}}},[t._v(t._s(e.name))])}))],2),n("klinechart",{ref:"klinechart",attrs:{symbol:t.symbol,timeIndex:t.timeIndex},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.getClose.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"btn"},[n("v-uni-view",{staticClass:"left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openPop(-1)}}},[t._v(t._s(t.$t("transaction.txt9")))]),n("v-uni-view",{staticClass:"center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openPop(0)}}},[t._v(t._s(t.$t("transaction.txt10")))]),n("v-uni-view",{staticClass:"right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openPop(1)}}},[t._v(t._s(t.$t("transaction.txt11")))])],1)],1),n("u-popup",{attrs:{mode:"center",length:"80%","border-radius":"20",closeable:!0},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("v-uni-view",{staticClass:"pop"},[n("v-uni-view",{staticClass:"title"},[t._v(t._s(t.$t("transaction.txt12")))]),n("v-uni-view",{staticClass:"info"},[n("v-uni-view",{staticClass:"data"},[n("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("transaction.txt13")))]),n("v-uni-view",{staticClass:"right"},[t._v(t._s(t.productInfo.symbol))])],1),n("v-uni-view",{staticClass:"data"},[n("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("transaction.txt14")))]),n("v-uni-view",{class:["right",{right1:0==t.btnType},{right2:-1==t.btnType}]},[t._v(t._s(t.btnType<=0?0==t.btnType?t.$t("transaction.txt15"):t.$t("transaction.txt9"):t.$t("transaction.txt16")))])],1),n("v-uni-view",{staticClass:"data"},[n("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("transaction.txt17")))]),n("v-uni-view",{staticClass:"right"},[t._v(t._s(t.productInfo.price))])],1),t.productTimeList.length>t.selectTimeIndex?n("v-uni-view",{staticClass:"data"},[n("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("other.txt1")))]),n("v-uni-view",{staticClass:"right"},[t._v(t._s(t.productTimeList[t.selectTimeIndex].profit_ratio))])],1):t._e(),t.productTimeList.length>t.selectTimeIndex?n("v-uni-view",{staticClass:"data"},[n("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("other.txt7")))]),n("v-uni-view",{staticClass:"right"},[t._v(t._s(t.productTimeList[t.selectTimeIndex].lose_ratio))])],1):t._e(),t.productTimeList.length>t.selectTimeIndex&&t.productTimeList[t.selectTimeIndex].min>0?n("v-uni-view",{staticClass:"data"},[n("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("other.txt2")))]),n("v-uni-view",{staticClass:"right"},[t._v(t._s(t.productTimeList[t.selectTimeIndex].min))])],1):t._e(),t.productTimeList.length>t.selectTimeIndex&&t.productTimeList[t.selectTimeIndex].max>0?n("v-uni-view",{staticClass:"data"},[n("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("other.txt3")))]),n("v-uni-view",{staticClass:"right"},[t._v(t._s(t.productTimeList[t.selectTimeIndex].max))])],1):t._e()],1),n("v-uni-view",{staticClass:"selectTime"},[n("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$t("transaction.txt18")))]),n("v-uni-scroll-view",{staticClass:"scrollTime",attrs:{"scroll-x":"true"}},[n("v-uni-view",{staticClass:"timeAll"},t._l(t.productInfo.timeList,(function(e,i){return n("v-uni-view",{key:i,class:["time",{time1:t.selectTimeIndex==i}],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectTime(i)}}},[t._v(t._s(e.seconds_desc))])})),1)],1)],1),n("v-uni-view",{staticClass:"amount"},[n("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$t("transaction.txt19")))]),n("v-uni-view",{staticClass:"input"},[n("u-input",{attrs:{type:"text"},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1),n("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$t("transaction.txt20"))+"："+t._s(t.userInfo.money))])],1),n("v-uni-view",{staticClass:"popBtn"},[n("v-uni-view",{staticClass:"confirm",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v(t._s(t.$t("transaction.txt21")))])],1)],1)],1),n("u-popup",{attrs:{mode:"left",length:"70%"},model:{value:t.productShow,callback:function(e){t.productShow=e},expression:"productShow"}},[n("v-uni-view",{staticClass:"productPop"},[n("v-uni-view",{staticClass:"title"},[t._v(t._s(t.$t("transaction.txt22")))]),n("v-uni-scroll-view",{attrs:{"scroll-y":"true"}},[n("v-uni-view",{staticClass:"productList"},t._l(t.productList,(function(e,i){return n("v-uni-view",{key:i,staticClass:"product",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toDetail(e)}}},[n("v-uni-view",{staticClass:"code"},[t._v(t._s(e.symbol))]),n("v-uni-view",{staticClass:"name"},[t._v(t._s(e.title))])],1)})),1)],1)],1)],1),n("u-popup",{attrs:{mode:"center",length:"80%","border-radius":"20",closeable:!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.orderClose.apply(void 0,arguments)}},model:{value:t.orderShow,callback:function(e){t.orderShow=e},expression:"orderShow"}},[n("v-uni-view",{staticClass:"orderPop"},[n("v-uni-view",{staticClass:"title"},[t._v(t._s(t.$t("transaction.txt23")))]),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.timeEnd,expression:"!timeEnd"}],staticClass:"timeDown"},[n("v-uni-view",{staticClass:"dot"}),n("u-count-down",{ref:"uCountDown",staticClass:"time",attrs:{timestamp:t.orderInfo.countdown,"show-days":!1,"show-hours":t.orderInfo.countdown>3600,"show-minutes":t.orderInfo.countdown>60,"font-size":"34",color:"#FB7208",autoplay:!1},on:{end:function(e){arguments[0]=e=t.$handleEvent(e),t.toTimeEnd.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$t("transaction.txt17")))]),n("v-uni-view",{staticClass:"price"},[t._v(t._s(t.productInfo.price))])],1),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.timeEnd,expression:"timeEnd"}],staticClass:"result"},[n("v-uni-view",{staticClass:"money"},[t._v(t._s(t.orderInfo.fact_profits))]),n("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$t("transaction.txt24")))])],1),n("v-uni-view",{staticClass:"info"},[n("v-uni-view",{staticClass:"data data1"},[n("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("transaction.txt25")))]),n("v-uni-view",{class:["right",{right1:0==t.btnType},{right2:-1==t.btnType}]},[t._v(t._s(t.btnType<=0?t.$t("transaction.txt15"):t.$t("transaction.txt16")))])],1),n("v-uni-view",{staticClass:"data data2"},[n("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("transaction.txt26")))]),n("v-uni-view",{staticClass:"right"},[t._v(t._s(t.orderInfo.amount))])],1),n("v-uni-view",{staticClass:"data data3"},[n("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("transaction.txt27")))]),n("v-uni-view",{staticClass:"right"},[t._v(t._s(t.productInfo.open_price))])],1),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.timeEnd,expression:"!timeEnd"}],staticClass:"data data4"},[n("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("transaction.txt28")))]),n("v-uni-view",{staticClass:"right"},[t._v(t._s(t.orderInfo.profit_loss))])],1),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.timeEnd,expression:"!timeEnd"}],staticClass:"data data5"},[n("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("transaction.txt29")))]),n("v-uni-view",{staticClass:"right"},[t._v(t._s(t.orderInfo.order_sn))])],1)],1),n("v-uni-view",{staticClass:"orderbtn"},[n("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.orderShow=!1}}},[t._v(t._s(t.$t("transaction.txt30")))])],1)],1)],1),n("tabbarBottom",{attrs:{current:2}})],1)},r=[]},"7d81":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"index"},[e("v-uni-view",{wxsProps:{"change:prop":"chartData"},staticClass:"content",attrs:{id:"renderKlinechart",prop:this.chartData,"change:prop":this.renderKlinechart.getData}})],1)},a=[]},"97f3":function(t,e,i){"use strict";i.r(e);var n=i("2dd9"),a=i.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},"99e4":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.content[data-v-1d899ba7]{padding-bottom:80px}.content .title[data-v-1d899ba7]{font-size:16px;text-align:center;padding:15px}.content .top[data-v-1d899ba7]{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #eee;padding:10px 15px}.content .top .left[data-v-1d899ba7],\r\n.content .top .right[data-v-1d899ba7]{display:flex;align-items:center}.content .top .left uni-image[data-v-1d899ba7],\r\n.content .top .right uni-image[data-v-1d899ba7]{width:20px;height:20px}.content .top .left[data-v-1d899ba7]{font-weight:700}.content .currentData[data-v-1d899ba7]{display:flex;align-items:center;justify-content:space-between;padding:15px}.content .currentData .left .text1[data-v-1d899ba7]{color:#4e5b85}.content .currentData .left .text2[data-v-1d899ba7]{font-size:28px;font-weight:700;color:#e43e42}.content .currentData .left .text3[data-v-1d899ba7]{font-size:17px;color:#e43e42;margin-left:5px}.content .currentData .right[data-v-1d899ba7]{display:flex;flex-wrap:wrap;width:50%;font-size:13px}.content .currentData .right .data[data-v-1d899ba7]{width:50%;color:#636e82;margin-bottom:10px}.content .timeList[data-v-1d899ba7]{display:flex;margin-bottom:15px;color:#4e5b85;font-size:11px;font-weight:600}.content .timeList .time[data-v-1d899ba7]{margin-right:10px;padding:7px 5px}.content .timeList .time1[data-v-1d899ba7]{border-bottom:1px solid #fb7208}.content .btn[data-v-1d899ba7]{background-color:#fff;display:flex;justify-content:center;margin-top:10px;width:100%;position:fixed;bottom:50px;left:0;padding:10px 15px;z-index:9999}.content .btn uni-view[data-v-1d899ba7]{width:45vw;height:40px;font-size:16px;color:#fff;border-radius:30px;text-align:center;line-height:40px}.content .btn .left[data-v-1d899ba7]{background:#fb7208!important;margin-right:3vw}.content .btn .center[data-v-1d899ba7]{background:#00c087!important;margin-right:3vw}.content .btn .right[data-v-1d899ba7]{background:#e43e42!important}.pop .title[data-v-1d899ba7]{color:#333;padding:15px 0;border-bottom:1px solid #eee;text-align:center;font-size:16px}.pop .info[data-v-1d899ba7]{padding:10px;background:#f7f7fa;border-radius:5px;margin:5px 15px;color:#333}.pop .info .data[data-v-1d899ba7]{display:flex;justify-content:space-between}.pop .info .data[data-v-1d899ba7]:nth-child(1){color:#8d9dbc;padding-bottom:3px}.pop .info .data[data-v-1d899ba7]:nth-child(2){padding-bottom:3px}.pop .info .data:nth-child(2) .right[data-v-1d899ba7]{color:#e43e42}.pop .info .data:nth-child(2) .right1[data-v-1d899ba7]{color:#59bb5f}.pop .info .data:nth-child(2) .right2[data-v-1d899ba7]{color:#fb7208}.pop .selectTime[data-v-1d899ba7]{padding:0 15px}.pop .selectTime .text[data-v-1d899ba7]{font-size:16px;color:#62759a;margin-bottom:10px}.pop .selectTime .scrollTime[data-v-1d899ba7]{width:100%}.pop .selectTime .scrollTime .timeAll[data-v-1d899ba7]{display:flex}.pop .selectTime .scrollTime .timeAll .time[data-v-1d899ba7]{padding:10px 15px;background:#ededf5;font-size:16px;color:#62759a;border-radius:5px;margin-right:2%;text-align:center}.pop .selectTime .scrollTime .timeAll .time1[data-v-1d899ba7]{background:#fb7208;color:#fff}.pop .amount[data-v-1d899ba7]{padding:0 15px}.pop .amount .text[data-v-1d899ba7]{font-size:16px;color:#62759a;margin:5px 0}.pop .amount .text[data-v-1d899ba7]:nth-last-child(1){margin:10px 0;font-size:14px}.pop .amount .input[data-v-1d899ba7]{margin-bottom:5px;background:#f7f7fa;padding:0 5%;border-radius:5px;color:#62759a}.pop .popBtn[data-v-1d899ba7]{border-top:1px solid #eee}.pop .popBtn .confirm[data-v-1d899ba7]{background:#fb7208;color:#fff;font-size:16px;padding:10px 0;border-radius:20px;width:50%;text-align:center;margin:10px auto}.productPop .title[data-v-1d899ba7]{color:#000;margin-top:10px;line-height:35px;padding-left:15px;padding-bottom:10px;border-bottom:1px solid #f1f1f1;font-size:20px;font-weight:700}.productPop .productList .product[data-v-1d899ba7]{padding:0 15px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #f1f1f1;height:60px;line-height:60px;font-size:18px;font-weight:700;color:#1a384a}.productPop .productList .product .name[data-v-1d899ba7]{font-weight:400;color:#7d818a}.orderPop .title[data-v-1d899ba7]{color:#333;padding:15px 0;border-bottom:1px solid #eee;text-align:center}.orderPop .timeDown[data-v-1d899ba7]{position:relative;height:150px;width:150px;margin:10px auto;border:10px solid #eee;border-radius:50%;text-align:center}.orderPop .timeDown .dot[data-v-1d899ba7]{position:absolute;background:#fb7208;width:10px;height:10px;border-radius:50%;margin:0 calc(50% - 5px);top:-10px}.orderPop .timeDown .time[data-v-1d899ba7]{color:#fb7208;font-size:20px;margin-top:30px}.orderPop .timeDown .text[data-v-1d899ba7]{margin:5px 0;color:#62759a}.orderPop .timeDown .price[data-v-1d899ba7]{color:#59bb5f}.orderPop .result[data-v-1d899ba7]{height:150px;text-align:center;display:flex;flex-direction:column;justify-content:center}.orderPop .result .money[data-v-1d899ba7]{color:#fb7208;font-size:20px;margin-bottom:10px}.orderPop .info[data-v-1d899ba7]{margin:5px auto!important;padding:10px 10px 5px 10px;margin:20px auto;background:#f7f7fa;border-radius:5px;width:90%}.orderPop .info .data[data-v-1d899ba7]{display:flex;justify-content:space-between;align-items:center;color:#62759a;margin-bottom:5px}.orderPop .info .data1 .right[data-v-1d899ba7],\r\n.orderPop .info .data4 .right[data-v-1d899ba7]{color:#59bb5f}.orderPop .info .data1 .right[data-v-1d899ba7]{color:#e43e42}.orderPop .info .data1 .right1[data-v-1d899ba7]{color:#59bb5f}.orderPop .info .data1 .right2[data-v-1d899ba7]{color:#fb7208}.orderPop .orderbtn[data-v-1d899ba7]{border-top:1px solid #eee}.orderPop .orderbtn .btn[data-v-1d899ba7]{background:#fb7208;color:#fff;font-size:16px;padding:10px 0;border-radius:20px;display:block;width:50%;text-align:center;margin:10px auto}',""]),t.exports=e},"9e1d":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.shapes=e.rect=e.intervals1=e.intervals=e.circle=e.chartTypes=void 0;var a=n(i("9b1b"));e.intervals=[{name:"1min",value:"1min",time:1},{name:"5min",value:"5min",time:5},{name:"30min",value:"30min",time:30},{name:"1h",value:"60min",time:60},{name:"1day",value:"1D",time:360},{name:"1week",value:"1W",time:1800},{name:"1mon",value:"1M",time:10800}];e.intervals1=[{name:"5min",value:"5min",time:5},{name:"30min",value:"30min",time:30},{name:"60min",value:"60min",time:60},{name:"1day",value:"1day",time:360}];e.chartTypes=[{name:"蜡烛实心",value:"candle_solid"},{name:"面积图",value:"area"},{name:"蜡烛空心",value:"candle_stroke"},{name:"蜡烛涨空心",value:"candle_up_stroke"},{name:"蜡烛跌空心",value:"candle_down_stroke"},{name:"OHLC",value:"ohlc"}];e.shapes=[{name:"价格线",value:"priceLine"},{name:"价格通道线",value:"priceChannelLine"},{name:"平行直线",value:"parallelStraightLine"},{name:"斐波那契回调",value:"fibonacciLine"},{name:"自定义矩形",value:"rect"},{name:"自定义圆",value:"circle"}];var r={name:"rect",totalStep:3,checkEventCoordinateOnShape:function(t){var e=t.dataSource,i=t.eventCoordinate;return checkCoordinateOnSegment(e[0],e[1],i)},createShapeDataSource:function(t){var e=t.coordinates;return 2===e.length?[{type:"line",isDraw:!1,isCheck:!0,dataSource:[[(0,a.default)({},e[0]),{x:e[1].x,y:e[0].y}],[{x:e[1].x,y:e[0].y},(0,a.default)({},e[1])],[(0,a.default)({},e[1]),{x:e[0].x,y:e[1].y}],[{x:e[0].x,y:e[1].y},(0,a.default)({},e[0])]]},{type:"polygon",isDraw:!0,isCheck:!1,styles:{style:"fill"},dataSource:[[(0,a.default)({},e[0]),{x:e[1].x,y:e[0].y},(0,a.default)({},e[1]),{x:e[0].x,y:e[1].y}]]},{type:"polygon",isDraw:!0,isCheck:!1,dataSource:[[(0,a.default)({},e[0]),{x:e[1].x,y:e[0].y},(0,a.default)({},e[1]),{x:e[0].x,y:e[1].y}]]}]:[]}};e.rect=r;var o={name:"circle",totalStep:3,checkEventCoordinateOnShape:function(t){var e=t.dataSource,i=t.eventCoordinate,n=Math.abs(e.x-i.x),a=Math.abs(e.y-i.y),r=Math.sqrt(n*n+a*a);return Math.abs(r-e.radius)<3},createShapeDataSource:function(t){var e=t.coordinates;if(2===e.length){var i=Math.abs(e[0].x-e[1].x),n=Math.abs(e[0].y-e[1].y),r=Math.sqrt(i*i+n*n);return[{type:"arc",isDraw:!0,isCheck:!1,styles:{style:"fill"},dataSource:[(0,a.default)((0,a.default)({},e[0]),{},{radius:r,startAngle:0,endAngle:2*Math.PI})]},{type:"arc",isDraw:!0,isCheck:!0,dataSource:[(0,a.default)((0,a.default)({},e[0]),{},{radius:r,startAngle:0,endAngle:2*Math.PI})]}]}return[]}};e.circle=o},a85c:function(t,e,i){var n=i("99e4");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("d3d26eec",n,!0,{sourceMap:!1,shadowMode:!1})},b2c8:function(t,e,i){"use strict";var n=i("caa7"),a=i.n(n);a.a},c0de:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e="dark"===t?"#929AA5":"#76808F",i="dark"===t?"#f1f1f1":"#ededed",n="dark"===t?"#646464":"#DDDDDD",a="dark"===t?"#646464":"#DDDDDD",r="dark"===t?"#373a40":"#686d76";return{grid:{horizontal:{color:i},vertical:{color:i}},candle:{bar:{noChangeColor:"#888888"},priceMark:{high:{color:e},low:{color:e}},tooltip:{showRule:"none",labels:["Time","Open","Close","High","Low"],text:{color:e},showType:"standard",rect:{offsetTop:24,borderColor:"#3f4254",backgroundColor:"rgba(17, 17, 17, .3)"}}},technicalIndicator:{tooltip:{showParams:!1}},xAxis:{axisLine:{color:n},tickLine:{color:n},tickText:{color:e}},yAxis:{axisLine:{color:n},tickLine:{color:n},tickText:{color:e}},separator:{color:n},crosshair:{horizontal:{line:{color:a},text:{backgroundColor:r}},vertical:{line:{color:a},text:{backgroundColor:r}}}}}},c34d:function(t,e,i){"use strict";var n=i("a85c"),a=i.n(n);a.a},c3f8:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("bf0f"),i("c9b5"),i("ab80"),i("e838"),i("64aa");var n=i("9e1d"),a={data:function(){return{intervals1:n.intervals1,timeIndex:2,show:!1,productShow:!1,orderShow:!1,timeList:[],productTimeList:[],amount:"",btnType:-1,selectTimeIndex:0,productList:[],productIndex:0,symbol:"",productInfo:{},userInfo:{},isClick:!1,timeEnd:!1,orderId:"",orderInfo:{},timeListTop:[{name:5+this.$t("klinechart.time1"),value:"5min",time:5},{name:30+this.$t("klinechart.time1"),value:"30min",time:30},{name:60+this.$t("klinechart.time1"),value:"60min",time:60},{name:1+this.$t("klinechart.time2"),value:"1day",time:360}]}},onShow:function(){this.getProductList(),this.getUserinfo()},onHide:function(){this.$refs.klinechart.clearTimer(),uni.setStorageSync("code","")},methods:{changeTime:function(t){this.timeIndex=t},selectTime:function(t){this.selectTimeIndex=t},openPop:function(t){this.btnType=t,this.show=!0},toTimeEnd:function(){var t=this;this.$nextTick((function(){t.getOrderInfo()})),this.timeEnd=!0},orderClose:function(){this.getproductData(),this.timeEnd=!1},submit:function(){var t=this,e=0,i=0;1==this.btnType?(e=2,i=0):0==this.btnType?(e=1,i=0):-1==this.btnType&&(i=1),this.isClick||(this.isClick=!0,this.$http.request("POST",this.$apis.orderSubmit,{product_id:this.productInfo.id,direction:e,seconds:this.productInfo.timeList[this.selectTimeIndex].seconds,amount:this.amount,open_price:this.productInfo.price,profit_ratio:this.productInfo.timeList[this.selectTimeIndex].profit_ratio,type:i}).then((function(e){1==e.data.code&&(t.orderId=e.data.data.order_id,t.getOrderInfo(),t.show=!1,t.orderShow=!0,t.$nextTick((function(){t.$refs.uCountDown.start()})),t.amount="")})).finally((function(e){t.isClick=!1})))},getOrderInfo:function(){var t=this;this.$http.request("GET",this.$apis.getOrderInfo,{order_id:this.orderId}).then((function(e){1==e.data.code&&(t.orderInfo=e.data.data,t.orderInfo.amount=parseFloat(Number(t.orderInfo.amount)).toString(),t.orderInfo.fact_profits=parseFloat(Number(t.orderInfo.fact_profits)).toString())})).finally((function(t){}))},getUserinfo:function(){var t=this;this.$http.request("GET",this.$apis.getUserinfo).then((function(e){1==e.data.code&&(t.userInfo=e.data.data)})).finally((function(t){}))},getProductList:function(){var t=this;this.$http.request("GET",this.$apis.getProductList).then((function(e){1==e.data.code&&(t.productList=e.data.data,uni.getStorageSync("code")?t.symbol=uni.getStorageSync("code"):t.symbol=t.productList[0].code,t.getproductData())})).finally((function(t){}))},toDetail:function(t){this.symbol=t.code,this.getproductData(),this.productShow=!1},getproductData:function(){var t=this;this.$http.request("GET",this.$apis.getproductData,{symbol:this.symbol}).then((function(e){1==e.data.code&&(t.productInfo=e.data.data,t.productTimeList=t.productInfo.timeList,t.productInfo.price=parseFloat(Number(t.productInfo.price)).toString(),t.productTimeList[t.selectTimeIndex].min=parseFloat(Number(t.productTimeList[t.selectTimeIndex].min)).toString(),t.productTimeList[t.selectTimeIndex].max=parseFloat(Number(t.productTimeList[t.selectTimeIndex].max)).toString(),t.productInfo.open_price=parseFloat(Number(t.productInfo.open_price)).toString(),t.productInfo.price_low=parseFloat(Number(t.productInfo.price_low)).toString(),t.productInfo.price_high=parseFloat(Number(t.productInfo.price_high)).toString(),t.productInfo.vol=parseFloat(Number(t.productInfo.vol)).toString())})).finally((function(t){}))},getClose:function(t){this.productInfo.price=parseFloat(Number(t)).toString()}}};e.default=a},c748:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAGsElEQVR4Xu3cwW1cdRSF8X8kiqETVmwQikQPdEMRLCmAPT3QABVkARILZBmEnYw9njvvzRy/88va1z73O+/zzYydfFj+IIDAiwQ+YIMAAi8TIIinA4FXCBDE44EAQTwDCMwIuCAzbqZKCBCkpGhrzggQZMbNVAkBgpQUbc0ZAYLMuJkqIUCQkqKtOSNAkBk3UyUECFJStDVnBAgy42aqhABBSoq25owAQWbcTJUQIEhJ0dacESDIjJupEgIEKSnamjMCBJlxM1VCgCAlRVtzRoAgM26mSggQpKRoa84IEGTGzVQJAYKUFG3NGQGCzLiZKiFAkJKirTkjQJAZN1MlBAhSUrQ1ZwQIMuNmqoQAQUqKtuaMAEFm3EyVECBISdHWnBEgyIybqRICBCkp2pozAgSZcTNVQoAgJUVbc0aAIDNupkoIEKSkaGvOCBBkxs1UCQGClBRtzRkBgsy4mSohQJCSoq05I0CQGTdTJQQIUlK0NWcECDLjZqqEAEFKirbmjABBZtxMlRAgSEnR1pwRIMiMm6kSAgQpKdqaMwIEmXEzVUKAICVFW3NGgCAzbqZKCBCkpGhrzggQZMbNVAkBgpQUbc0ZAYLMuJkqIUCQkqKtOSNAkBk3UyUECFJStDVnBAgy42aqhABBSoq25owAQWbcTJUQIEhJ0dacESDIjJupEgIEKSnamjMCBJlxM1VCgCAlRVtzRoAgM26mSggQpKRoa84IEGTGzVQJAYKUFG3NGQGCzLiZKiFAkJKirTkjQJAZN1MlBAhSUrQ1ZwQIMuNmqoQAQUqKtuaMAEFm3EyVECBISdHWnBEgyIybqRICBCkp2pozAgSZcTNVQoAgJUVbc0aAIDNupkoIEKSkaGvOCBBkxs1UCQGClBRtzRmBowry9Vrrp7XWVzMspi4k8Pda68e11u8XzsV/+FEFeQD//VrrZ5Ls/gw+yPFxrfXL7l/pDl/gyIKQZP8H6tByPOA7uiAk2U+Sw8vRIghJtpekQo4mQUiynSQ1crQJQpLrJflrrfXDUV+Qn8LT8Brk8729uzUT5UGOb9dav87G3+dUoyAuyeXPaqUcjX/FevpouCRvE6VWjnZBXJLzglTLQZDHB8QlOS1KvRwE+f/BIMlzScjxL4/WF+mnvmeS5JEKOZ48HQR5rkq7JOT47FsnQb68Ja2SkOPE3ysIcvoFapsk5HjhHT2CvPxWZ4sk5Hjl7W6CvP6zgKNLQo4zPwsiyPkflh1VEnKc777iH0y9AcPZDzmaJOQ4W/njB7ggbwR1oJ+4k+PtnRPkAlZH+LUUclxYuAtyIbB3fEnIcXnXLsiA2Xu8JOQYFu2CDMG9o0tCjnnHLsgV7N7DJSHHlQW7IFcCDL4k5Li+WxdkA4aJl4QcGxXrgmwEMuiSkGO7Tl2QDVkmXBJybFyoC7Ix0DteEnJs36ULsgPTe1wScuxUpAuyE9gbXpJPa63v2v7Hw/1qe/6ZCbIv6b1/C/hBjm/WWr/tu0bvZyfI/t3vJQk59u/Oa5AbMN7jNQk5blScC3Ij0Bu+JiHH7TpzQW7IeotLQo4bF+aC3Bj4FZeEHLfvygW5A/PJJSHHnYpyQe4E/oJLQo77deSC3JH9Wy4JOe5ckAty5wJeuSTkuH83LkhAB6cuCTlCinFBQop4ckn+9OsjOaUQJKeL/y7JH363KqcUguR0IUkgAYIEliJSDgGC5HQhSSABggSWIlIOAYLkdCFJIAGCBJYiUg4BguR0IUkgAYIEliJSDgGC5HQhSSABggSWIlIOAYLkdCFJIAGCBJYiUg4BguR0IUkgAYIEliJSDgGC5HQhSSABggSWIlIOAYLkdCFJIAGCBJYiUg4BguR0IUkgAYIEliJSDgGC5HQhSSABggSWIlIOAYLkdCFJIAGCBJYiUg4BguR0IUkgAYIEliJSDgGC5HQhSSABggSWIlIOAYLkdCFJIAGCBJYiUg4BguR0IUkgAYIEliJSDgGC5HQhSSABggSWIlIOAYLkdCFJIAGCBJYiUg4BguR0IUkgAYIEliJSDgGC5HQhSSABggSWIlIOAYLkdCFJIAGCBJYiUg4BguR0IUkgAYIEliJSDgGC5HQhSSABggSWIlIOAYLkdCFJIAGCBJYiUg4BguR0IUkgAYIEliJSDgGC5HQhSSABggSWIlIOAYLkdCFJIAGCBJYiUg4BguR0IUkgAYIEliJSDgGC5HQhSSABggSWIlIOAYLkdCFJIAGCBJYiUg4BguR0IUkgAYIEliJSDgGC5HQhSSABggSWIlIOgX8AG3mMyZ/gRV0AAAAASUVORK5CYII="},caa7:function(t,e,i){var n=i("2c98");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("772dbc60",n,!0,{sourceMap:!1,shadowMode:!1})},cca9c:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.u-input[data-v-c95e3e40]{position:relative;flex:1;display:flex;flex-direction:row}.u-input__input[data-v-c95e3e40]{font-size:%?28?%;color:#303133;flex:1}.u-input__textarea[data-v-c95e3e40]{width:auto;font-size:%?28?%;color:#303133;padding:%?10?% 0;line-height:normal;flex:1}.u-input--border[data-v-c95e3e40]{border-radius:%?6?%;border-radius:4px;border:1px solid #dcdfe6}.u-input--error[data-v-c95e3e40]{border-color:#fa3534!important}.u-input__right-icon__item[data-v-c95e3e40]{margin-left:%?10?%}.u-input__right-icon--select[data-v-c95e3e40]{transition:-webkit-transform .4s;transition:transform .4s;transition:transform .4s,-webkit-transform .4s}.u-input__right-icon--select--reverse[data-v-c95e3e40]{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}',""]),t.exports=e},da2c:function(t,e,i){"use strict";i.r(e);var n=i("155f"),a=i("3f6e");for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("f197");var o=i("828b"),s=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"c95e3e40",null,!1,n["a"],void 0);e["default"]=s.exports},e062:function(t,e,i){"use strict";var n=i("8bdb");n({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},e5b2:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa"),i("bf0f"),i("fd3c");var n=i("9e1d"),a={name:"klinechart",props:{symbol:{type:String,default:""},timeIndex:{type:Number,default:0},precision:{type:Number,default:4}},data:function(){return{intervals:n.intervals,intervals1:n.intervals1,chartData:{precision:4,historyData:[],updateData:{},chartType:null,createShapeName:null},dataList:[],timer:null}},mounted:function(){},watch:{symbol:function(){var t=this;this.clearTimer(),this.getKlineChart(),this.timer=setInterval((function(){t.getKlineChart()}),3e3)},timeIndex:function(){var t=this;this.clearTimer(),this.getKlineChart(),this.timer=setInterval((function(){t.getKlineChart()}),3e3)}},methods:{clearTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},getKlineChart:function(){var t=this,e=this.timeIndex,i=this.intervals1,n=(this.row,this.symbol),a=Date.parse(new Date)/1e3-24*i[e].time*60*60,r=Date.parse(new Date)/1e3,o=i[e].value;this.period=o,this.$http.request("GET",this.$apis.getKlineChart,{from:a,to:r,symbol:n,period:o}).then((function(e){if(1==e.data.code){var i=e.data.data.map((function(i,n){return n==e.data.data.length-1&&t.$emit("close",i.close),{timestamp:Number(i.time),open:Number(i.open),high:Number(i.high),low:Number(i.low),close:Number(i.close),volume:Number(i.volume)}}));setTimeout((function(){t.chartData.historyData=i}),200),t.dataList=i}})).finally((function(t){}))}}};e.default=a},f042:function(t,e,i){"use strict";var n=i("8bdb"),a=i("e78b");n({target:"Math",stat:!0},{sign:a})},f197:function(t,e,i){"use strict";var n=i("6b4e"),a=i.n(n);a.a},f4ac:function(t,e,i){"use strict";i.r(e);var n=i("7552"),a=i("6b6a");for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("c34d");var o=i("828b"),s=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"1d899ba7",null,!1,n["a"],void 0);e["default"]=s.exports},ff09:function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa"),i("0c26");var a=n(i("6686")),r={name:"u-input",mixins:[a.default],props:{value:{type:[String,Number],default:""},type:{type:String,default:"text"},inputAlign:{type:String,default:"left"},placeholder:{type:String,default:"请输入内容"},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},placeholderStyle:{type:String,default:"color: #c0c4cc;"},confirmType:{type:String,default:"done"},customStyle:{type:Object,default:function(){return{}}},fixed:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},passwordIcon:{type:Boolean,default:!0},border:{type:Boolean,default:!1},borderColor:{type:String,default:"#dcdfe6"},autoHeight:{type:Boolean,default:!0},selectOpen:{type:Boolean,default:!1},height:{type:[Number,String],default:""},clearable:{type:Boolean,default:!0},cursorSpacing:{type:[Number,String],default:0},selectionStart:{type:[Number,String],default:-1},selectionEnd:{type:[Number,String],default:-1},trim:{type:Boolean,default:!0},showConfirmbar:{type:Boolean,default:!0},adjustPosition:{type:Boolean,default:!0}},data:function(){return{defaultValue:this.value,inputHeight:70,textareaHeight:100,validateState:!1,focused:!1,showPassword:!1,lastValue:""}},watch:{value:function(t,e){this.defaultValue=t,t!=e&&"select"==this.type&&this.handleInput({detail:{value:t}})}},computed:{inputMaxlength:function(){return Number(this.maxlength)},getStyle:function(){var t={};return t.minHeight=this.height?this.height+"rpx":"textarea"==this.type?this.textareaHeight+"rpx":this.inputHeight+"rpx",t=Object.assign(t,this.customStyle),t},getCursorSpacing:function(){return Number(this.cursorSpacing)},uSelectionStart:function(){return String(this.selectionStart)},uSelectionEnd:function(){return String(this.selectionEnd)}},created:function(){this.$on("on-form-item-error",this.onFormItemError)},methods:{handleInput:function(t){var e=this,i=t.detail.value;this.trim&&(i=this.$u.trim(i)),this.$emit("input",i),this.defaultValue=i,setTimeout((function(){e.dispatch("u-form-item","on-form-change",i)}),40)},handleBlur:function(t){var e=this,i=t.detail.value;setTimeout((function(){e.focused=!1}),100),this.$emit("blur",i),setTimeout((function(){e.dispatch("u-form-item","on-form-blur",i)}),40)},onFormItemError:function(t){this.validateState=t},onFocus:function(t){this.focused=!0,this.$emit("focus")},onConfirm:function(t){this.$emit("confirm",t.detail.value)},onClear:function(t){this.$emit("input","")},inputClick:function(){this.$emit("click")}}};e.default=r}}]);